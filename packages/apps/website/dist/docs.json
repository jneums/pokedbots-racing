{
  "docs": [
    {
      "slug": "3D_TRACK_VISUALIZATION",
      "metadata": {},
      "content": "<h1>3D Track Visualization with Three.js</h1>\n<h2>Overview</h2>\n<p>Add an immersive 3D track visualization using Three.js to display race tracks in real-time, showing terrain, elevation changes, and bot positions during races.</p>\n<h2>Goals</h2>\n<ol>\n<li>Visualize track segments in 3D space with accurate terrain representation</li>\n<li>Show bot positions and movement during race playback</li>\n<li>Display elevation changes (uphill/downhill segments)</li>\n<li>Differentiate terrain types visually (ScrapHeaps, WastelandSand, MetalRoads)</li>\n<li>Provide camera controls for viewing from different angles</li>\n<li>Performance: 60fps on modern devices</li>\n</ol>\n<h2>Technical Architecture</h2>\n<h3>Data Sources</h3>\n<ul>\n<li><strong>Track Data</strong>: Use existing <code>TrackTemplate</code> from <code>RacingSimulator.mo</code>\n<ul>\n<li>Segments with length, angle, terrain, difficulty</li>\n<li>5 track templates: Scrap Mountain Circuit, Highway of the Dead, Wasteland Gauntlet, Junkyard Sprint, Metal Mesa Loop</li>\n</ul>\n</li>\n<li><strong>Race Data</strong>: Real-time or historical race results with segment times</li>\n<li><strong>Bot Data</strong>: Participant stats, colors, faction info</li>\n</ul>\n<h3>Component Structure</h3>\n<pre><code>packages/apps/website/src/components/\n‚îú‚îÄ‚îÄ Track3D/\n‚îÇ   ‚îú‚îÄ‚îÄ Track3DViewer.tsx          # Main component wrapper\n‚îÇ   ‚îú‚îÄ‚îÄ Track3DScene.tsx           # Three.js scene setup\n‚îÇ   ‚îú‚îÄ‚îÄ TrackGeometry.ts           # Generate track mesh from segments\n‚îÇ   ‚îú‚îÄ‚îÄ BotRenderer.tsx            # Bot 3D models/sprites\n‚îÇ   ‚îú‚îÄ‚îÄ CameraController.ts        # Camera orbit/follow controls\n‚îÇ   ‚îú‚îÄ‚îÄ TerrainMaterials.ts        # Materials for each terrain type\n‚îÇ   ‚îî‚îÄ‚îÄ types.ts                   # TypeScript types\n</code></pre>\n<h2>Implementation Phases</h2>\n<h3>Phase 1: Basic 3D Scene Setup</h3>\n<p><strong>Goal</strong>: Get a working Three.js scene rendering in React</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Install dependencies:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">pnpm</span> <span class=\"token function\">add</span> three @types/three @react-three/fiber @react-three/drei\n</code></pre>\n</li>\n<li>\n<p>Create <code>Track3DViewer.tsx</code>:</p>\n<ul>\n<li>Canvas component from <code>@react-three/fiber</code></li>\n<li>Basic lighting (ambient + directional)</li>\n<li>Camera setup with orbit controls</li>\n<li>Placeholder ground plane</li>\n</ul>\n</li>\n<li>\n<p>Integration point:</p>\n<ul>\n<li>Add to race details page below/beside RaceVisualizer</li>\n<li>Toggle between 2D (current) and 3D view</li>\n<li>Responsive sizing (full width or modal)</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>Empty 3D scene renders without errors</li>\n<li>Can rotate camera with mouse/touch</li>\n<li>Lighting looks reasonable</li>\n</ul>\n<h3>Phase 2: Track Geometry Generation</h3>\n<p><strong>Goal</strong>: Convert track segments into 3D geometry</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Create <code>TrackGeometry.ts</code>:</p>\n<ul>\n<li>Input: <code>TrackTemplate</code> segments array</li>\n<li>Output: Three.js mesh with proper vertices/faces</li>\n</ul>\n</li>\n<li>\n<p>Track generation algorithm:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// For each segment:</span>\n<span class=\"token comment\">// 1. Calculate start/end positions in 3D space</span>\n<span class=\"token comment\">// 2. Apply angle (elevation change)</span>\n<span class=\"token comment\">// 3. Create track width (10-15 units)</span>\n<span class=\"token comment\">// 4. Generate curved transitions between segments</span>\n<span class=\"token comment\">// 5. Apply terrain-specific geometry (rough for ScrapHeaps, smooth for MetalRoads)</span>\n</code></pre>\n</li>\n<li>\n<p>Coordinate system:</p>\n<ul>\n<li>X-axis: Track width</li>\n<li>Y-axis: Elevation (controlled by segment.angle)</li>\n<li>Z-axis: Forward progress along track</li>\n<li>Scale: 1 unit = 10 meters (for reasonable viewport)</li>\n</ul>\n</li>\n<li>\n<p>Track features:</p>\n<ul>\n<li>Width: 12 units (120m realistic for wasteland racing)</li>\n<li>Elevation scaling: segment.angle degrees ‚Üí Y position change</li>\n<li>Bezier curves for smooth transitions between angles</li>\n<li>Banking on turns (optional: calculate from difficulty)</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>All 5 tracks render with correct total length</li>\n<li>Elevation changes match segment angles</li>\n<li>Smooth transitions between segments</li>\n<li>Track loops properly for circuit races</li>\n</ul>\n<h3>Phase 3: Terrain Materials &#x26; Styling</h3>\n<p><strong>Goal</strong>: Make each terrain type visually distinct</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Create <code>TerrainMaterials.ts</code>:</p>\n<ul>\n<li>ScrapHeaps: Rough, metallic, rust colors (#8B4513, #A0522D)</li>\n<li>WastelandSand: Sandy texture, beige/tan (#D2B48C, #F4A460)</li>\n<li>MetalRoads: Smooth, dark grey with worn lines (#404040, #606060)</li>\n</ul>\n</li>\n<li>\n<p>Material properties:</p>\n<ul>\n<li>Use <code>MeshStandardMaterial</code> for PBR</li>\n<li>Roughness maps for texture variation</li>\n<li>Normal maps for surface detail (optional)</li>\n<li>Emissive for track markers/lines</li>\n</ul>\n</li>\n<li>\n<p>Environmental details:</p>\n<ul>\n<li>Skybox: Wasteland-themed gradient (orange/brown)</li>\n<li>Fog: Distance fog matching terrain color</li>\n<li>Ground plane: Extends beyond track edges</li>\n<li>Ambient occlusion for depth</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>Each terrain type immediately recognizable</li>\n<li>Performance stays above 45fps with materials</li>\n<li>Visually cohesive wasteland aesthetic</li>\n</ul>\n<h3>Phase 4: Bot Rendering</h3>\n<p><strong>Goal</strong>: Show bots racing on the track</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Create <code>BotRenderer.tsx</code>:</p>\n<ul>\n<li>Simple geometry: Box or low-poly robot shape</li>\n<li>Color: Use bot's background color from stats</li>\n<li>Position: Calculate from segment times + interpolation</li>\n<li>Scale: 2-3 units (bots visible but not oversized)</li>\n</ul>\n</li>\n<li>\n<p>Bot positioning algorithm:</p>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Input: currentTime, segmentTimes[], segments[]</span>\n<span class=\"token comment\">// 1. Find which segment bot is currently on</span>\n<span class=\"token comment\">// 2. Calculate progress within that segment</span>\n<span class=\"token comment\">// 3. Get 3D position from track geometry</span>\n<span class=\"token comment\">// 4. Apply orientation (face forward along track)</span>\n<span class=\"token comment\">// 5. Add subtle hover/bounce animation</span>\n</code></pre>\n</li>\n<li>\n<p>Bot features:</p>\n<ul>\n<li>Nameplate above bot (HTML overlay or sprite)</li>\n<li>Faction badge/icon</li>\n<li>Speed trail effect (particle system or mesh trail)</li>\n<li>Position number indicator</li>\n</ul>\n</li>\n<li>\n<p>Multiple bots:</p>\n<ul>\n<li>Render all participants simultaneously</li>\n<li>Collision avoidance (slight X-offset if close)</li>\n<li>Highlight selected bot (glow effect)</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>Bots move smoothly along track path</li>\n<li>Easy to distinguish between multiple bots</li>\n<li>Performance: 60fps with 4+ bots racing</li>\n<li>Bot speed visually matches race times</li>\n</ul>\n<h3>Phase 5: Camera System</h3>\n<p><strong>Goal</strong>: Provide intuitive camera controls</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Create <code>CameraController.ts</code>:</p>\n<ul>\n<li>Orbit mode: Free rotation around track center</li>\n<li>Follow mode: Camera tracks selected bot (chase cam)</li>\n<li>Cinematic mode: Automated camera movement (sweeping shots)</li>\n<li>Track overview: Bird's eye view of entire track</li>\n</ul>\n</li>\n<li>\n<p>Camera transitions:</p>\n<ul>\n<li>Smooth lerp between modes (1-2 second transition)</li>\n<li>Collision detection: Don't clip through track</li>\n<li>Auto-rotation option for showcase mode</li>\n</ul>\n</li>\n<li>\n<p>UI controls:</p>\n<ul>\n<li>Button/dropdown to switch modes</li>\n<li>Mouse/touch for orbit controls</li>\n<li>Scroll to zoom</li>\n<li>Keyboard shortcuts (arrow keys, 1-4 for presets)</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>All camera modes work smoothly</li>\n<li>No disorienting jumps or clipping</li>\n<li>Touch controls work on mobile/tablet</li>\n</ul>\n<h3>Phase 6: Animation &#x26; Playback</h3>\n<p><strong>Goal</strong>: Race replay with time controls</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Playback controls:</p>\n<ul>\n<li>Play/pause</li>\n<li>Playback speed (0.5x, 1x, 2x, 4x)</li>\n<li>Scrub timeline (jump to any time)</li>\n<li>Loop option</li>\n</ul>\n</li>\n<li>\n<p>Race simulation:</p>\n<ul>\n<li>Use segment times from race results</li>\n<li>Interpolate bot positions between segments</li>\n<li>Sync with audio events (optional: engine sounds, announcements)</li>\n</ul>\n</li>\n<li>\n<p>Visual effects:</p>\n<ul>\n<li>Dust trails in WastelandSand segments</li>\n<li>Sparks on MetalRoads</li>\n<li>Debris movement in ScrapHeaps</li>\n<li>Speed lines/motion blur at high speeds</li>\n</ul>\n</li>\n<li>\n<p>HUD overlay (HTML layer):</p>\n<ul>\n<li>Current race time</li>\n<li>Position indicator</li>\n<li>Speed/stats of selected bot</li>\n<li>Mini-map of track (optional)</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>Race playback feels smooth and accurate</li>\n<li>Controls are intuitive and responsive</li>\n<li>Visual effects enhance without distracting</li>\n</ul>\n<h3>Phase 7: Optimization &#x26; Polish</h3>\n<p><strong>Goal</strong>: Production-ready performance and UX</p>\n<p><strong>Tasks</strong>:</p>\n<ol>\n<li>\n<p>Performance optimization:</p>\n<ul>\n<li>Level of detail (LOD): Reduce geometry at distance</li>\n<li>Frustum culling: Don't render off-screen objects</li>\n<li>Instance rendering for repeated elements</li>\n<li>Lazy loading: Load 3D assets on demand</li>\n</ul>\n</li>\n<li>\n<p>Progressive enhancement:</p>\n<ul>\n<li>Detect WebGL support, fallback to 2D view</li>\n<li>Mobile optimization: Reduced particles/effects</li>\n<li>Performance mode toggle (low/medium/high quality)</li>\n</ul>\n</li>\n<li>\n<p>Accessibility:</p>\n<ul>\n<li>Keyboard navigation</li>\n<li>Screen reader support for race data</li>\n<li>Reduced motion option (disable animations)</li>\n</ul>\n</li>\n<li>\n<p>Polish:</p>\n<ul>\n<li>Loading states with progress indicators</li>\n<li>Error boundaries for Three.js failures</li>\n<li>Screenshot/video capture (optional)</li>\n<li>Share race replay feature</li>\n</ul>\n</li>\n</ol>\n<p><strong>Success Criteria</strong>:</p>\n<ul>\n<li>60fps on desktop, 30fps on mobile</li>\n<li>Graceful degradation on older devices</li>\n<li>No console errors or warnings</li>\n<li>Positive user feedback on UX</li>\n</ul>\n<h2>Data Flow</h2>\n<pre><code>Race Results (Backend)\n  ‚Üì\nTrack3DViewer Component\n  ‚Üì (passes track + times)\nTrack3DScene\n  ‚îú‚Üí TrackGeometry (generates mesh)\n  ‚îú‚Üí BotRenderer (positions bots)\n  ‚îú‚Üí CameraController (handles view)\n  ‚îî‚Üí TerrainMaterials (applies styling)\n</code></pre>\n<h2>File Structure</h2>\n<pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Track3DViewer.tsx - Main component</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Track3DViewerProps</span> <span class=\"token punctuation\">{</span>\n  raceId<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  trackId<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  results<span class=\"token operator\">:</span> RaceResult<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  autoPlay<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  cameraMode<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token string\">'orbit'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'follow'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'cinematic'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// TrackGeometry.ts - Generate track mesh</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">generateTrackMesh</span><span class=\"token punctuation\">(</span>\n  segments<span class=\"token operator\">:</span> TrackSegment<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n  laps<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> \n  terrain<span class=\"token operator\">:</span> Terrain\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>Mesh<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// BotRenderer.tsx - Bot component</span>\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">BotProps</span> <span class=\"token punctuation\">{</span>\n  position<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  rotation<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  color<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  faction<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  label<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  isHighlighted<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// CameraController.ts</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useCameraController</span><span class=\"token punctuation\">(</span>\n  mode<span class=\"token operator\">:</span> CameraMode<span class=\"token punctuation\">,</span>\n  target<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>Vector3<span class=\"token punctuation\">,</span>\n  bounds<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>Box3\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2>Integration Points</h2>\n<ol>\n<li>\n<p><strong>Race Details Page</strong> (<code>/race/[id]</code>):</p>\n<ul>\n<li>Tab switcher: \"2D View\" | \"3D View\"</li>\n<li>3D view shows below race information</li>\n<li>Shared playback controls</li>\n</ul>\n</li>\n<li>\n<p><strong>Track Browser</strong> (new page):</p>\n<ul>\n<li>Grid of all 5 tracks with 3D previews</li>\n<li>Click to expand full 3D viewer</li>\n<li>Show track stats (distance, segments, terrain mix)</li>\n</ul>\n</li>\n<li>\n<p><strong>Bot Details Page</strong> (<code>/bot/[id]</code>):</p>\n<ul>\n<li>Show 3D preview of bot's recent races</li>\n<li>\"View Race in 3D\" button for each result</li>\n</ul>\n</li>\n</ol>\n<h2>Future Enhancements</h2>\n<ul>\n<li>Weather effects (sandstorms, rain on metal roads)</li>\n<li>Damage visualization (smoke, sparks when condition low)</li>\n<li>Spectator mode for live races</li>\n<li>VR support with WebXR</li>\n<li>Track editor for creating custom tracks</li>\n<li>Multiplayer ghost racing (compare two bots side-by-side)</li>\n</ul>\n<h2>Dependencies</h2>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"three\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.160.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"@types/three\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.160.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"@react-three/fiber\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^8.15.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"@react-three/drei\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^9.92.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"@react-three/postprocessing\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^2.16.0\"</span> <span class=\"token comment\">// Optional: for effects</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2>Estimated Timeline</h2>\n<ul>\n<li>Phase 1 (Setup): 2-4 hours</li>\n<li>Phase 2 (Geometry): 8-12 hours</li>\n<li>Phase 3 (Materials): 4-6 hours</li>\n<li>Phase 4 (Bots): 6-8 hours</li>\n<li>Phase 5 (Camera): 4-6 hours</li>\n<li>Phase 6 (Animation): 6-10 hours</li>\n<li>Phase 7 (Polish): 8-12 hours</li>\n</ul>\n<p><strong>Total</strong>: 38-58 hours (~1-1.5 weeks full-time)</p>\n<h2>Success Metrics</h2>\n<ul>\n<li>User engagement: Time spent viewing 3D races vs 2D</li>\n<li>Performance: Maintain 60fps on 80%+ of devices</li>\n<li>Feedback: Positive sentiment in user testing</li>\n<li>Adoption: 50%+ of race views use 3D mode</li>\n<li>Technical: Zero critical bugs in production</li>\n</ul>\n<h2>Open Questions</h2>\n<ol>\n<li>Should we support mobile 3D view or desktop-only initially?</li>\n<li>Preference for realistic vs stylized art direction?</li>\n<li>Budget for custom 3D models vs procedural geometry?</li>\n<li>Server-side rendering of 3D thumbnails for social sharing?</li>\n<li>Integrate with existing RaceVisualizer or replace it?</li>\n</ol>\n"
    },
    {
      "slug": "ARCHITECTURE",
      "metadata": {
        "title": "Architecture",
        "description": "Design decisions and technical implementation",
        "order": 2
      },
      "content": "<h1>PokedBots Racing - Architecture</h1>\n<p><strong>Design Decisions &#x26; Technical Implementation</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/OVERVIEW\">‚Üê Back to Overview</a> | üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System ‚Üí</a></p>\n<hr>\n<h2>Key Architectural Decisions</h2>\n<h3>Generic Racing Simulator with Collection-Specific Adapters</h3>\n<p><strong>Decision</strong>: Split racing logic into collection-agnostic simulator and collection-specific garage modules</p>\n<p><strong>Rationale</strong>:</p>\n<ul>\n<li><strong>RacingSimulator</strong>: Generic racing engine that works with any NFT collection via <code>RacingStatsProvider</code> interface</li>\n<li><strong>PokedBotsGarage</strong>: PokedBots-specific logic (factions, upgrades, stat derivation)</li>\n<li>Enables future expansion to other NFT collections without duplicating race simulation logic</li>\n<li>Clear separation of concerns: racing mechanics vs. collection-specific features</li>\n<li>Stats stored separately from NFT metadata - upgrades don't pollute on-chain NFT data</li>\n<li>Each collection can have unique mechanics (factions, special abilities) while sharing core racing</li>\n</ul>\n<h3>Marketplace Integration</h3>\n<p><strong>Decision</strong>: Integrate with existing PokedBots marketplace for purchasing</p>\n<p><strong>Rationale</strong>:</p>\n<ul>\n<li>Users can browse and purchase PokedBots in-game without leaving MCP interface</li>\n<li>Leverages existing NFT marketplace liquidity (1,252+ listings)</li>\n<li>No wallet-switching friction - pay with ICP directly via ICRC-2</li>\n<li>Garage system manages purchased NFTs with subaccount architecture</li>\n<li>Racing stats stored separately in racing canister, not in NFT metadata</li>\n</ul>\n<p><strong>Implementation (COMPLETE)</strong>:</p>\n<ul>\n<li>‚úÖ <code>marketplace_browse_pokedbots</code>: Cached listings with pagination (5-min TTL)</li>\n<li>‚úÖ <code>marketplace_purchase_pokedbot</code>: ICRC-2 approval-based purchase with two-step payment flow</li>\n<li>‚úÖ EXT AccountIdentifier encoding (CRC32 + SHA224)</li>\n<li>‚úÖ Base16 hex decoding for marketplace payment addresses</li>\n<li>‚úÖ Garage subaccount system (\"GARG\" + principal bytes)</li>\n<li>‚úÖ Garage list tool with image URL display</li>\n<li>‚úÖ Racing stats initialization (deterministic from token index via precomputed-stats.json)</li>\n<li>‚úÖ Ownership verified before every operation via <code>bearer()</code> calls</li>\n<li>‚úÖ Full upgrade system (Velocity, PowerCore, Thruster, Gyro)</li>\n<li>‚úÖ Maintenance system (recharge, repair)</li>\n<li>‚úÖ Race entry and prize distribution</li>\n<li>‚úÖ Sponsorship system for augmenting prize pools</li>\n</ul>\n<h3>2.3 ICRC-2 Approval-Based Payments with Subaccount Routing</h3>\n<p><strong>Decision</strong>: Use ICRC-2 <code>transfer_from</code> with subaccount-based payment routing</p>\n<p><strong>Rationale</strong>:</p>\n<ul>\n<li><strong>Simpler UX</strong>: No deposit/withdraw friction - users keep funds in their wallet</li>\n<li><strong>Better for AI agents</strong>: One-time approval, then canister handles payments automatically</li>\n<li><strong>Non-custodial</strong>: Funds flow through garage subaccount but never locked</li>\n<li><strong>Trade-off</strong>: 0.0001 ICP fee per operation vs. gasless after deposit</li>\n</ul>\n<p><strong>Implementation (COMPLETE)</strong>:</p>\n<ul>\n<li>User approves racing canister with <code>icrc2_approve</code> (150M e8s covers multiple operations)</li>\n<li>Purchase flow uses two-step payment:\n<ol>\n<li><code>icrc2_transfer_from(user ‚Üí garage_subaccount, amount + fee)</code></li>\n<li><code>transfer(garage_subaccount ‚Üí marketplace, amount)</code> using hex-decoded payment address</li>\n</ol>\n</li>\n<li>Garage subaccount format: \"GARG\" + principal bytes (32 bytes total)</li>\n<li>EXT AccountIdentifier: CRC32 + SHA224 hash, hex-encoded for marketplace</li>\n<li>Marketplace settlement: <code>lock()</code> reserves NFT, <code>settle()</code> completes transfer after payment</li>\n<li>‚úÖ Race entries: Exact cost pulled via <code>icrc2_transfer_from</code> for entry fees</li>\n<li>‚úÖ Upgrades &#x26; Maintenance: Direct pulls for repair (5 ICP), recharge (10 ICP), upgrades (20 ICP)</li>\n<li>‚úÖ Prizes: Sent back directly to users via <code>icrc2_transfer</code></li>\n<li>‚úÖ Sponsorships: Pulled via <code>icrc2_transfer_from</code> and added to prize pools</li>\n</ul>\n<p><strong>Comparison to Final Score</strong>:</p>\n<table>\n<thead>\n<tr>\n<th>Aspect</th>\n<th>Final Score</th>\n<th>PokedBots Racing</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Payments</td>\n<td>Virtual balance ledger</td>\n<td>Direct ICRC-2 transfers</td>\n</tr>\n<tr>\n<td>User Experience</td>\n<td>Deposit ‚Üí Play ‚Üí Withdraw</td>\n<td>Approve ‚Üí Play</td>\n</tr>\n<tr>\n<td>Gas Costs</td>\n<td>High upfront (deposit), then free</td>\n<td>0.0001 ICP per operation</td>\n</tr>\n<tr>\n<td>Funds Custody</td>\n<td>Escrowed in canister</td>\n<td>Stay in user wallet</td>\n</tr>\n<tr>\n<td>Best For</td>\n<td>High-frequency traders</td>\n<td>Occasional players &#x26; AI agents</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2>Core Architecture</h2>\n<h3>Modular Architecture with Single Canister Deployment</h3>\n<p>The system uses a modular architecture split across multiple Motoko modules, all deployed in a single canister:</p>\n<p><strong>Core Modules:</strong></p>\n<ul>\n<li>‚úÖ <strong>RacingSimulator</strong>: Generic racing engine with <code>RacingStatsProvider</code> interface</li>\n<li>‚úÖ <strong>PokedBotsGarage</strong>: PokedBots-specific stats, factions, upgrades, maintenance</li>\n<li>‚úÖ <strong>RaceCalendar</strong>: Automated race scheduling (daily/weekly/monthly)</li>\n<li>‚úÖ <strong>Leaderboard</strong>: Rankings, achievements, career statistics</li>\n<li>‚úÖ <strong>ExtIntegration</strong>: EXT NFT marketplace integration (browse, purchase, ownership)</li>\n<li>‚úÖ <strong>IcpLedger</strong>: ICRC-2 payment integration (approval-based transfers)</li>\n<li>‚úÖ <strong>Stats</strong>: Precomputed base stats for all 10,000 PokedBots</li>\n</ul>\n<p><strong>Implemented Features:</strong></p>\n<ul>\n<li>‚úÖ EXT NFT marketplace integration (browse, purchase, ownership verification)</li>\n<li>‚úÖ ICRC-2 payment integration (approval-based transfers via subaccounts)</li>\n<li>‚úÖ Garage management (subaccount-based NFT ownership)</li>\n<li>‚úÖ Marketplace caching (5-minute TTL, pagination)</li>\n<li>‚úÖ Image URL display (raw.icp0.io integration)</li>\n<li>‚úÖ Racing stats storage (separate from NFT metadata)</li>\n<li>‚úÖ Maintenance and upgrade mechanics (recharge, repair, 4 upgrade types)</li>\n<li>‚úÖ Race simulation engine with faction bonuses and terrain effects</li>\n<li>‚úÖ Race entry fees and prize distribution</li>\n<li>‚úÖ Sponsorship system for augmenting prize pools</li>\n</ul>\n<h3>EXT NFT Marketplace Pattern (COMPLETE)</h3>\n<ul>\n<li><strong>Robots are purchased from the existing PokedBots marketplace</strong> via in-game tools</li>\n<li>Racing canister integrates with marketplace canister (<code>bzsui-sqaaa-aaaah-qce2a-cai</code>)</li>\n<li>Each user has a garage subaccount (\"GARG\" + principal bytes) that receives purchased NFTs</li>\n<li>Marketplace browsing: Cached listings (5-min TTL), sorted by price, cursor-based pagination</li>\n<li>Purchase flow: ICRC-2 approval ‚Üí lock() ‚Üí two-step payment ‚Üí settle()</li>\n<li>Ownership verification: <code>bearer(tokenId)</code> checks current owner</li>\n<li>NFTs remain tradeable in EXT ecosystem - racing canister never locks transfers</li>\n</ul>\n<p><strong>Racing Stats Implementation (COMPLETE)</strong>:</p>\n<ul>\n<li>‚úÖ Racing stats initialization: Uses precomputed-stats.json (deterministically generated from token index)</li>\n<li>‚úÖ Stats storage: Upgrades, battery, condition, race history in racing canister</li>\n<li>‚úÖ Ownership sync: Stats linked to current NFT owner, verified before operations</li>\n<li>‚úÖ Faction derivation: From precomputed stats based on token index ranges</li>\n</ul>\n<h3>ICRC-2 Payment System with Subaccount Routing (COMPLETE)</h3>\n<p>We use ICRC-2 approval-based payments routed through garage subaccounts:</p>\n<p><strong>Implementation (COMPLETE)</strong>:</p>\n<ul>\n<li><strong>No deposit/withdraw flow</strong> - users keep ICP in their own wallets</li>\n<li>Purchase flow: <code>icrc2_transfer_from(user ‚Üí garage)</code> then <code>transfer(garage ‚Üí marketplace)</code></li>\n<li>Agent approves racing canister with <code>icrc2_approve</code> (150M e8s recommended)</li>\n<li>Garage subaccount acts as intermediary, not custodian (funds flow through)</li>\n<li><strong>Payment details</strong>: NFT price + 10,000 e8s transfer fee pulled from user</li>\n<li><strong>EXT compatibility</strong>: Marketplace payment address decoded from hex to blob</li>\n<li><strong>Two-step settlement</strong>: lock() reserves NFT, settle() completes after payment verified</li>\n<li>‚úÖ Race entries: <code>icrc2_transfer_from</code> for exact entry fee amount (5-50 ICP based on class)</li>\n<li>‚úÖ Maintenance/upgrades: Direct pulls for repair (5 ICP), recharge (10 ICP), upgrades (20 ICP)</li>\n<li>‚úÖ Prize winnings: <code>icrc2_transfer</code> directly to user's wallet</li>\n<li>‚úÖ Sponsorships: <code>icrc2_transfer_from</code> to pull sponsorship amounts into race prize pools</li>\n<li><strong>Trade-off</strong>: 0.0001 ICP fee per transaction vs. complexity of virtual balance</li>\n<li><strong>Benefit</strong>: Simpler UX, no funds locked in canister, better for occasional users and AI agents</li>\n</ul>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/OVERVIEW\">‚Üê Back to Overview</a> | üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System ‚Üí</a></p>\n<p><strong>See also:</strong></p>\n<ul>\n<li>üîß <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> - Stats and maintenance</li>\n<li>‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System</a> - Scrapyard mechanics</li>\n<li>üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools</a> - API reference</li>\n<li>üìö <a href=\"/docs/TECHNICAL_REFERENCE\">Technical Reference</a> - Deep dive</li>\n</ul>\n"
    },
    {
      "slug": "BETTING_SYSTEM",
      "metadata": {},
      "content": "<h1>PokedBots Racing: Betting System Specification</h1>\n<h2>Overview</h2>\n<p>Pari-mutuel betting system for PokedBots races, allowing users to bet ICP on race outcomes with automatic payout distribution. Based on horse racing betting models with Win, Place, and Show bet types.</p>\n<h2>Architecture</h2>\n<h3>Core Principles</h3>\n<ol>\n<li><strong>Integrated System</strong> - Betting logic integrated into racing canister for seamless UX</li>\n<li><strong>Single Approval</strong> - Users approve racing canister once for both entry fees and betting</li>\n<li><strong>Subaccount-Based Pools</strong> - Each race has a dedicated ICP subaccount for transparent, auditable fund management</li>\n<li><strong>ICRC-2 Integration</strong> - Users approve and transfer ICP directly (no virtual accounts)</li>\n<li><strong>Pari-mutuel Model</strong> - Pool-based betting with proportional payouts to winners</li>\n<li><strong>Automatic Payouts</strong> - Winners receive funds automatically on settlement (no manual claim)</li>\n<li><strong>1-Hour Betting Window</strong> - Betting opens when registration closes, closes when race starts</li>\n<li><strong>Synchronized Lifecycle</strong> - Betting pools lifecycle tied directly to race status</li>\n</ol>\n<h3>Technology Stack</h3>\n<ul>\n<li><strong>Canister</strong>: Integrated into pokedbots_racing canister (p6nop-vyaaa-aaaai-q4djq-cai)</li>\n<li><strong>Currency</strong>: ICP (ryjl3-tyaaa-aaaab-qaa6a-cai)</li>\n<li><strong>Payment Method</strong>: ICRC-2 approval + transfer_from (same approval as race entry fees)</li>\n<li><strong>Payout Method</strong>: ICRC-1 transfer</li>\n<li><strong>Base Code</strong>: Adapted from Final Score pari-mutuel betting canister</li>\n<li><strong>State Access</strong>: Direct access to race state (no inter-canister calls needed)</li>\n</ul>\n<h2>Data Structures</h2>\n<h3>BettingPool</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token keyword\">type</span> PoolStatus <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    #Pending<span class=\"token punctuation\">;</span>    <span class=\"token comment\">// Race exists but registration not closed yet</span>\n    #Open<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// Betting window active (registration closed, race not started)</span>\n    #Closed<span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Race started, no more bets accepted</span>\n    #Settled<span class=\"token punctuation\">;</span>    <span class=\"token comment\">// Race completed, payouts distributed</span>\n    #Cancelled<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Race cancelled (refund all bets)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> BettingPool <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    raceId<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    subaccount<span class=\"token punctuation\">:</span> Blob<span class=\"token punctuation\">;</span>           <span class=\"token comment\">// Derived from raceId for dedicated pool funds</span>\n    status<span class=\"token punctuation\">:</span> PoolStatus<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// Race context (cached from racing canister)</span>\n    entrants<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>Nat<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>            <span class=\"token comment\">// Bot token indices in race</span>\n    raceClass<span class=\"token punctuation\">:</span> Text<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// \"Scavenger\", \"Raider\", etc.</span>\n    distance<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// Race distance in km</span>\n    terrain<span class=\"token punctuation\">:</span> Text<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// Terrain type</span>\n    \n    <span class=\"token comment\">// Pool balances (verified against subaccount balance)</span>\n    winPool<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>               <span class=\"token comment\">// Total ICP bet on Win</span>\n    placePool<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// Total ICP bet on Place (top 3)</span>\n    showPool<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// Total ICP bet on Show (top 5)</span>\n    totalPooled<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>           <span class=\"token comment\">// Sum of all pools</span>\n    \n    <span class=\"token comment\">// Pool breakdown by bot</span>\n    winBetsByBot<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat<span class=\"token punctuation\">,</span> Nat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// (tokenIndex, total ICP bet on this bot to win)</span>\n    placeBetsByBot<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat<span class=\"token punctuation\">,</span> Nat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    showBetsByBot<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat<span class=\"token punctuation\">,</span> Nat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// Bets placed</span>\n    bets<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>Bet<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// Timing</span>\n    bettingOpensAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>        <span class=\"token comment\">// Unix timestamp (when registration closed)</span>\n    bettingClosesAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// Unix timestamp (when race starts)</span>\n    \n    <span class=\"token comment\">// Settlement</span>\n    results<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>RaceResults<span class=\"token punctuation\">;</span>\n    payoutsCompleted<span class=\"token punctuation\">:</span> Bool<span class=\"token punctuation\">;</span>\n    failedPayouts<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>FailedPayout<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> Bet <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    betId<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    userId<span class=\"token punctuation\">:</span> Principal<span class=\"token punctuation\">;</span>\n    tokenIndex<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// Bot being bet on</span>\n    betType<span class=\"token punctuation\">:</span> BetType<span class=\"token punctuation\">;</span>\n    amount<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>                <span class=\"token comment\">// ICP (e8s)</span>\n    timestamp<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n    potentialPayout<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Nat<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// Calculated after settlement</span>\n    paid<span class=\"token punctuation\">:</span> Bool<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> BetType <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    #Win<span class=\"token punctuation\">;</span>   <span class=\"token comment\">// Bot finishes 1st</span>\n    #Place<span class=\"token punctuation\">;</span> <span class=\"token comment\">// Bot finishes top 3</span>\n    #Show<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Bot finishes top 5</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> RaceResults <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    rankings<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>Nat<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>            <span class=\"token comment\">// Token indices in finish order</span>\n    fetchedAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> FailedPayout <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    betId<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    userId<span class=\"token punctuation\">:</span> Principal<span class=\"token punctuation\">;</span>\n    amount<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    error<span class=\"token punctuation\">:</span> Text<span class=\"token punctuation\">;</span>\n    attempts<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3>User Stats</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token keyword\">type</span> UserStats <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    totalBets<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    totalWagered<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>          <span class=\"token comment\">// Total ICP bet (e8s)</span>\n    totalWon<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// Total ICP won (e8s)</span>\n    netProfit<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// totalWon - totalWagered</span>\n    winRate<span class=\"token punctuation\">:</span> Float<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// Percentage of winning bets</span>\n    bestROI<span class=\"token punctuation\">:</span> Float<span class=\"token punctuation\">;</span>             <span class=\"token comment\">// Best return on investment for single bet</span>\n    currentStreak<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// Positive = winning streak, negative = losing streak</span>\n    longestWinStreak<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// Breakdown by bet type</span>\n    winBets<span class=\"token punctuation\">:</span> BetTypeStats<span class=\"token punctuation\">;</span>\n    placeBets<span class=\"token punctuation\">:</span> BetTypeStats<span class=\"token punctuation\">;</span>\n    showBets<span class=\"token punctuation\">:</span> BetTypeStats<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> BetTypeStats <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    count<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    wagered<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    won<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n    winRate<span class=\"token punctuation\">:</span> Float<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2>Subaccount Architecture</h2>\n<h3>Subaccount Derivation</h3>\n<p>Each betting pool gets a unique 32-byte subaccount derived from the race ID:</p>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token keyword\">func</span> <span class=\"token function\">getPoolSubaccount</span><span class=\"token punctuation\">(</span>raceId<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> Blob <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> raceIdBytes <span class=\"token operator\">=</span> Nat32<span class=\"token punctuation\">.</span><span class=\"token function\">toNat8</span><span class=\"token punctuation\">(</span>Nat32<span class=\"token punctuation\">.</span><span class=\"token function\">fromNat</span><span class=\"token punctuation\">(</span>raceId <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> padding <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span>init<span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span>Nat8<span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    padding<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span><span class=\"token operator\">=</span> raceIdBytes<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Additional bytes can encode pool type, version, etc.</span>\n    Blob<span class=\"token punctuation\">.</span><span class=\"token function\">fromArray</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>padding<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3>Fund Flow with Subaccounts</h3>\n<p><strong>Bet Placement:</strong></p>\n<ol>\n<li>User calls <code>betting_place_bet(raceId, tokenIndex, betType, amount)</code></li>\n<li>User must have pre-approved betting canister via ICRC-2: <code>icrc2_approve</code></li>\n<li>Canister calculates pool subaccount from raceId</li>\n<li>Canister calls <code>icrc2_transfer_from</code>:\n<ul>\n<li><code>from</code>: { owner = user, subaccount = null }</li>\n<li><code>to</code>: { owner = betting_canister, subaccount = ?poolSubaccount }</li>\n<li><code>amount</code>: bet amount</li>\n</ul>\n</li>\n<li>On success, bet recorded in pool.bets array</li>\n<li>Pool balance updated (and can be verified against subaccount)</li>\n</ol>\n<p><strong>Settlement &#x26; Payouts:</strong></p>\n<ol>\n<li>Timer fetches race results from racing canister</li>\n<li>Calculate payout amounts for each winning bet</li>\n<li>For each winner:\n<ul>\n<li>Call <code>icrc1_transfer</code>:\n<ul>\n<li><code>from_subaccount</code>: ?poolSubaccount</li>\n<li><code>to</code>: { owner = winner, subaccount = null }</li>\n<li><code>amount</code>: payout amount</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Transfer rake from pool subaccount:\n<ul>\n<li>8% to racing canister (added to prize pool)</li>\n<li>2% to platform treasury</li>\n</ul>\n</li>\n<li>Any dust remains in pool subaccount (could accumulate for jackpots)</li>\n</ol>\n<p><strong>Benefits:</strong></p>\n<ul>\n<li><strong>Transparency</strong>: Anyone can verify pool balance via ICP ledger queries</li>\n<li><strong>Isolation</strong>: Each race's funds are physically separated</li>\n<li><strong>Auditability</strong>: All transfers to/from pool subaccounts are on-chain</li>\n<li><strong>Safety</strong>: Bug in one pool can't drain another pool's funds</li>\n<li><strong>Simplicity</strong>: No master balance to track, pool balance = subaccount balance</li>\n</ul>\n<h2>Payout Calculations</h2>\n<h3>Win Pool (1st Place Only)</h3>\n<pre><code>Winners = All bets on bot that finished 1st\nLosers = All other Win bets\n\nTotal Win Pool = Sum of all Win bets\nRake = Total Win Pool √ó 0.10\nNet Pool = Total Win Pool - Rake\n\nIf no winners (bot with Win bets didn't win):\n  Refund all bets proportionally after rake\n\nIf winners exist:\n  For each winning bet:\n    Payout = (Bet Amount / Total Winning Bets) √ó Net Pool\n</code></pre>\n<h3>Place Pool (Top 3)</h3>\n<pre><code>Winners = All bets on bots that finished 1st, 2nd, or 3rd\nLosers = All other Place bets\n\nTotal Place Pool = Sum of all Place bets\nRake = Total Place Pool √ó 0.10\nNet Pool = Total Place Pool - Rake\n\nIf no winners (all Place bets on bots outside top 3):\n  Refund all bets proportionally after rake\n\nIf winners exist:\n  For each winning bet:\n    Payout = (Bet Amount / Total Winning Bets) √ó Net Pool\n</code></pre>\n<h3>Show Pool (Top 5)</h3>\n<pre><code>Winners = All bets on bots that finished 1st, 2nd, 3rd, 4th, or 5th\nLosers = All other Show bets\n\nTotal Show Pool = Sum of all Show bets\nRake = Total Show Pool √ó 0.10\nNet Pool = Total Show Pool - Rake\n\nIf no winners (all Show bets on bots outside top 5):\n  Refund all bets proportionally after rake\n\nIf winners exist:\n  For each winning bet:\n    Payout = (Bet Amount / Total Winning Bets) √ó Net Pool\n</code></pre>\n<h3>Example Calculation</h3>\n<p><strong>Race Setup:</strong></p>\n<ul>\n<li>8 bots enter race</li>\n<li>Bot #1234 finishes 1st</li>\n<li>Bot #5678 finishes 2nd</li>\n<li>Bot #9012 finishes 3rd</li>\n</ul>\n<p><strong>Win Pool:</strong></p>\n<ul>\n<li>5 ICP on bot #1234 (3 ICP from Alice, 2 ICP from Bob)</li>\n<li>3 ICP on bot #5678</li>\n<li>2 ICP on bot #9012</li>\n<li>Total: 10 ICP</li>\n<li>Rake: 1 ICP (10%)</li>\n<li>Net: 9 ICP</li>\n<li>Winners: Alice and Bob</li>\n<li>Alice payout: (3/5) √ó 9 = 5.4 ICP</li>\n<li>Bob payout: (2/5) √ó 9 = 3.6 ICP</li>\n</ul>\n<p><strong>Place Pool:</strong></p>\n<ul>\n<li>4 ICP on bot #1234</li>\n<li>6 ICP on bot #5678</li>\n<li>3 ICP on bot #9012</li>\n<li>2 ICP on bot #3456 (finished 6th)</li>\n<li>Total: 15 ICP</li>\n<li>Rake: 1.5 ICP (10%)</li>\n<li>Net: 13.5 ICP</li>\n<li>Winning bets: 13 ICP (top 3 finishers)</li>\n<li>Payouts distributed proportionally: (bet amount / 13) √ó 13.5</li>\n</ul>\n<h2>Race Lifecycle Integration</h2>\n<h3>Integrated Timer (6 Hours)</h3>\n<p>Betting pool lifecycle integrated into existing race execution timer.</p>\n<h3>Timer Logic</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token keyword\">func</span> <span class=\"token function\">executeRacesAndSettleBets</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> currentTime <span class=\"token operator\">=</span> Time<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 1. Check for races with closed registration ‚Üí Create betting pools</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>race <span class=\"token keyword\">in</span> scheduledRaces<span class=\"token punctuation\">.</span><span class=\"token function\">vals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">.</span>registrationDeadline <span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span> currentTime <span class=\"token keyword\">and</span> <span class=\"token keyword\">not</span> <span class=\"token function\">poolExists</span><span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">createBettingPool</span><span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 2. Execute races (existing logic) ‚Üí Automatically close betting</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>race <span class=\"token keyword\">in</span> startableRaces<span class=\"token punctuation\">.</span><span class=\"token function\">vals</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Betting automatically closes when race starts</span>\n        <span class=\"token keyword\">let</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">executeRace</span><span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// 3. Settle bets immediately after race completion</span>\n        <span class=\"token keyword\">await</span> <span class=\"token function\">settleBettingPool</span><span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> results<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 4. Retry failed payouts</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">retryFailedPayouts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3>Direct State Access Benefits</h3>\n<p>Since betting is integrated, we have direct access to:</p>\n<ul>\n<li><code>scheduledRaces</code> - No API call needed</li>\n<li><code>raceResults</code> - Immediate access after race execution</li>\n<li><code>prizePool</code> - Can add rake directly</li>\n<li><code>registrationDeadline</code> - Know exactly when to open betting</li>\n<li><code>raceStartTime</code> - Know exactly when to close betting</li>\n</ul>\n<h3>Pool Lifecycle</h3>\n<pre><code>Pending ‚Üí Open ‚Üí Closed ‚Üí Settled\n   ‚Üì        ‚Üì        ‚Üì        ‚Üì\nCreated  Betting  Race     Payouts\nwhen reg  active  started  complete\ncloses\n</code></pre>\n<h2>MCP Tools</h2>\n<h3>betting_place_bet</h3>\n<p>Place a bet on a bot in an upcoming race.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>race_id</code>: Nat - The race to bet on</li>\n<li><code>token_index</code>: Nat - The bot to bet on</li>\n<li><code>bet_type</code>: \"Win\" | \"Place\" | \"Show\"</li>\n<li><code>amount_icp</code>: Float - Amount to bet (e.g., 1.5 for 1.5 ICP)</li>\n</ul>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>Pool must be in Open status</li>\n<li>Bot must be entered in the race</li>\n<li>Amount must be between 1 and 100 ICP</li>\n<li>User must have approved betting canister via ICRC-2</li>\n<li>User can bet max 100 ICP total per race (across all bet types)</li>\n</ul>\n<p><strong>Returns:</strong></p>\n<ul>\n<li><code>bet_id</code>: Nat</li>\n<li><code>pool_subaccount</code>: Text - Subaccount holding this pool's funds</li>\n<li><code>current_odds</code>: Estimated payout multiplier based on current pool</li>\n</ul>\n<h3>betting_list_pools</h3>\n<p>List betting pools for upcoming, active, or completed races.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>status_filter</code>: \"Open\" | \"Closed\" | \"Settled\" | null</li>\n<li><code>race_class_filter</code>: \"Scavenger\" | \"Raider\" | \"Elite\" | \"SilentKlan\" | null</li>\n<li><code>after_race_id</code>: Nat | null - For pagination</li>\n<li><code>limit</code>: Nat - Default 10, max 50</li>\n</ul>\n<p><strong>Returns:</strong> Array of:</p>\n<ul>\n<li><code>race_id</code>: Nat</li>\n<li><code>subaccount</code>: Text</li>\n<li><code>status</code>: PoolStatus</li>\n<li><code>entrants</code>: Array of bot indices</li>\n<li><code>total_pooled</code>: Nat (ICP e8s)</li>\n<li><code>betting_closes_at</code>: Int (timestamp)</li>\n<li><code>current_odds</code>: Array of { tokenIndex, winOdds, placeOdds, showOdds }</li>\n</ul>\n<h3>betting_get_pool_info</h3>\n<p>Get detailed information about a specific betting pool.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>race_id</code>: Nat</li>\n</ul>\n<p><strong>Returns:</strong></p>\n<ul>\n<li>All BettingPool fields</li>\n<li>Live odds for each bot (Win/Place/Show)</li>\n<li>Pool subaccount address</li>\n<li>Number of unique bettors</li>\n<li>Largest single bet</li>\n<li>Distribution chart data</li>\n</ul>\n<h3>betting_get_my_bets</h3>\n<p>Get user's betting history.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>status_filter</code>: \"Active\" | \"Settled\" | null</li>\n<li><code>limit</code>: Nat - Default 20</li>\n</ul>\n<p><strong>Returns:</strong> Array of:</p>\n<ul>\n<li><code>bet_id</code>: Nat</li>\n<li><code>race_id</code>: Nat</li>\n<li><code>token_index</code>: Nat</li>\n<li><code>bet_type</code>: BetType</li>\n<li><code>amount</code>: Nat (ICP e8s)</li>\n<li><code>timestamp</code>: Int</li>\n<li><code>status</code>: \"Pending\" | \"Won\" | \"Lost\" | \"Refunded\"</li>\n<li><code>payout</code>: Nat | null (if won)</li>\n<li><code>roi</code>: Float | null (return on investment %)</li>\n</ul>\n<h3>betting_get_stats</h3>\n<p>Get user's betting statistics.</p>\n<p><strong>Returns:</strong> UserStats object with all performance metrics</p>\n<h3>betting_get_leaderboard</h3>\n<p>Get top bettors by various metrics.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>sort_by</code>: \"profit\" | \"roi\" | \"volume\" | \"win_rate\" - Default \"profit\"</li>\n<li><code>time_range</code>: \"all_time\" | \"30d\" | \"7d\" - Default \"all_time\"</li>\n<li><code>limit</code>: Nat - Default 10, max 100</li>\n</ul>\n<p><strong>Returns:</strong> Array of:</p>\n<ul>\n<li><code>rank</code>: Nat</li>\n<li><code>user_id</code>: Principal (anonymized for privacy)</li>\n<li><code>metric_value</code>: Float</li>\n<li><code>total_bets</code>: Nat</li>\n<li><code>win_rate</code>: Float</li>\n</ul>\n<h3>admin_retry_failed_payouts</h3>\n<p>Admin tool to retry failed payout transfers.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>pool_id</code>: Nat | null - Retry specific pool or all failed payouts</li>\n</ul>\n<p><strong>Returns:</strong></p>\n<ul>\n<li><code>retried</code>: Nat - Number of payouts retried</li>\n<li><code>succeeded</code>: Nat</li>\n<li><code>still_failed</code>: Nat</li>\n</ul>\n<h3>admin_force_settle_race</h3>\n<p>Admin tool to manually trigger settlement for a completed race.</p>\n<p><strong>Parameters:</strong></p>\n<ul>\n<li><code>race_id</code>: Nat</li>\n</ul>\n<p><strong>Returns:</strong></p>\n<ul>\n<li><code>settled</code>: Bool</li>\n<li><code>payouts_issued</code>: Nat</li>\n<li><code>total_paid_out</code>: Nat (ICP e8s)</li>\n</ul>\n<h2>Rake Distribution</h2>\n<h3>Breakdown</h3>\n<ul>\n<li><strong>Total Rake</strong>: 10% of all bet pools</li>\n<li><strong>Racing Prize Pool</strong>: 8% - Added to the race's prize pool before distribution to winners</li>\n</ul>\n<h3>Implementation</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token keyword\">func</span> <span class=\"token function\">distributeRake</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">:</span> BettingPool<span class=\"token punctuation\">,</span> totalRake<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> racingShare <span class=\"token operator\">=</span> totalRake <span class=\"token operator\">*</span> <span class=\"token number\">8</span> <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 80% of rake</span>\n    <span class=\"token keyword\">let</span> platformShare <span class=\"token operator\">=</span> totalRake <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20% of rake</span>\n    \n    <span class=\"token comment\">// Add racing share directly to race prize pool (same canister, just accounting)</span>\n    <span class=\"token comment\">// This is simpler since we're integrated - just update the race's prize pool amount</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>races<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">.</span>raceId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">case</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">?</span>race<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> updatedRace <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n                race with\n                prizePool <span class=\"token operator\">=</span> race<span class=\"token punctuation\">.</span>prizePool <span class=\"token operator\">+</span> racingShare<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n            races<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">.</span>raceId<span class=\"token punctuation\">,</span> updatedRace<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* Race not found - should not happen */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// Transfer platform share from pool subaccount to treasury</span>\n    <span class=\"token keyword\">let</span> platformResult <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> icpLedger<span class=\"token punctuation\">.</span><span class=\"token function\">icrc1_transfer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        from_subaccount <span class=\"token operator\">=</span> <span class=\"token operator\">?</span>pool<span class=\"token punctuation\">.</span>subaccount<span class=\"token punctuation\">;</span>\n        to <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n            owner <span class=\"token operator\">=</span> platformTreasury<span class=\"token punctuation\">;</span>\n            subaccount <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        amount <span class=\"token operator\">=</span> platformShare<span class=\"token punctuation\">;</span>\n        fee <span class=\"token operator\">=</span> <span class=\"token operator\">?</span><span class=\"token number\">10</span>_000<span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0.0001 ICP</span>\n        memo <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        created_at_time <span class=\"token operator\">=</span> <span class=\"token operator\">?</span>Nat64<span class=\"token punctuation\">.</span><span class=\"token function\">fromNat</span><span class=\"token punctuation\">(</span>Int<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>Time<span class=\"token punctuation\">.</span><span class=\"token function\">now</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n``` <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2>Betting Limits</h2>\n<h3>Per-Bet Limits</h3>\n<ul>\n<li><strong>Minimum</strong>: 1 ICP per bet</li>\n<li><strong>Maximum</strong>: 100 ICP per bet</li>\n</ul>\n<h3>Per-User-Per-Race Limits</h3>\n<ul>\n<li><strong>Maximum Total</strong>: 100 ICP across all bet types in a single race</li>\n<li>Example: Can place 50 ICP Win + 30 ICP Place + 20 ICP Show = 100 ICP total</li>\n</ul>\n<h3>Pool Limits</h3>\n<ul>\n<li>No maximum pool size (scales with participation)</li>\n<li>Minimum 2 entrants required for pool creation (racing system requirement)</li>\n</ul>\n<h2>UI Components</h2>\n<h3>Race List with Betting Status</h3>\n<p>Show betting availability on race listings:</p>\n<ul>\n<li>\"Betting Opens in 2h\" (registration still open)</li>\n<li>\"üé∞ Betting Open - Closes in 45m\" (active betting window)</li>\n<li>\"Betting Closed - Race in Progress\" (race started)</li>\n<li>\"Race Completed - View Results\" (settled)</li>\n</ul>\n<h3>Betting Interface (Race Detail Page)</h3>\n<p>When pool is Open:</p>\n<ul>\n<li>List all entrants with current odds</li>\n<li>Bet type selector (Win/Place/Show tabs)</li>\n<li>Amount slider/input (1-100 ICP)</li>\n<li>Total pool size visualization</li>\n<li>\"Place Bet\" button (checks ICRC-2 approval)</li>\n<li>Warning: \"Betting closes in X minutes\"</li>\n</ul>\n<h3>Pool Odds Display</h3>\n<pre><code>Bot #1234 \"SpeedDemon\"\n‚îú‚îÄ Win:   3.2x (5 ICP bet)\n‚îú‚îÄ Place: 1.8x (12 ICP bet)\n‚îî‚îÄ Show:  1.3x (18 ICP bet)\n</code></pre>\n<h3>My Bets Tab</h3>\n<ul>\n<li>Active bets (Open/Closed pools)</li>\n<li>Historical bets with results</li>\n<li>Win/loss indicators</li>\n<li>Payout amounts</li>\n<li>ROI percentages</li>\n</ul>\n<h3>Betting Stats Dashboard</h3>\n<ul>\n<li>Total wagered / won / profit</li>\n<li>Win rate by bet type</li>\n<li>Best performing bots</li>\n<li>Streaks</li>\n<li>ROI chart over time</li>\n</ul>\n<h3>Leaderboard Page</h3>\n<ul>\n<li>Top bettors by profit</li>\n<li>Top bettors by ROI</li>\n<li>Top bettors by volume</li>\n<li>Time range selector (7d/30d/all-time)</li>\n</ul>\n<h2>Implementation Phases</h2>\n<h3>Phase 1: Core Structure &#x26; Types (Day 1-2)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>BettingManager.mo</code> module in racing canister</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add betting types to <code>Types.mo</code> (BettingPool, Bet, BetType, etc.)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement subaccount derivation utilities</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add betting state to stable storage (pools, userStats, bets)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Initialize BettingManager in main.mo</li>\n</ul>\n<h3>Phase 2: Betting Tools (Day 2-3)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_place_bet.mo</code> with ICRC-2 integration</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_list_pools.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_get_pool_info.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_get_my_bets.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_get_stats.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_get_leaderboard.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Register all tools in main.mo MCP handler</li>\n</ul>\n<h3>Phase 3: Pool Lifecycle Integration (Day 3-4)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add pool creation logic to existing timer (when registration closes)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add pool closing logic to race start</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Integrate bet settlement into race completion flow</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Update executeRaces() to handle betting lifecycle</li>\n</ul>\n<h3>Phase 4: Payout Logic (Day 4-5)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement Win pool payout calculations in BettingManager</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement Place pool payout calculations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement Show pool payout calculations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement automatic ICRC-1 transfers to winners</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement rake distribution (internal accounting + treasury transfer)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add failed payout tracking and retry mechanism</li>\n</ul>\n<h3>Phase 5: Admin &#x26; Stats (Day 5-6)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_admin_retry_failed_payouts.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create <code>tools/betting_admin_force_settle_race.mo</code></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement user stats aggregation in BettingManager</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement leaderboard query functions</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add platform metrics tracking</li>\n</ul>\n<h3>Phase 6: UI Implementation (Day 6-8)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add betting interface to race detail page</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Implement live odds calculation and display</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add ICRC-2 approval flow (reuse racing approval)</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create \"My Bets\" tab on garage/profile page</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create betting stats dashboard</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Create leaderboard page</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Add pool visualization charts</li>\n</ul>\n<h3>Phase 7: Testing &#x26; Deployment (Day 8-10)</h3>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Unit tests for payout calculations</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Test pool lifecycle integration with races</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Test timer reliability for settlement</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Test failed payout retry mechanism</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Verify subaccount balance accuracy</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Local dfx testing</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Mainnet deployment</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> Monitor first settled bets</li>\n</ul>\n<h2>Security Considerations</h2>\n<h3>ICRC-2 Approval Safety</h3>\n<ul>\n<li>Check approval amount before transfer_from</li>\n<li>Handle approval expiry gracefully</li>\n<li>Clear user messaging about approval requirements</li>\n</ul>\n<h3>Payout Integrity</h3>\n<ul>\n<li>Verify race results from trusted racing canister</li>\n<li>Implement payout calculation unit tests</li>\n<li>Track failed payouts for manual review</li>\n<li>Audit trail for all transfers</li>\n</ul>\n<h3>Subaccount Security</h3>\n<ul>\n<li>Subaccounts derived deterministically from race ID</li>\n<li>Only betting canister can spend from pool subaccounts</li>\n<li>Verify subaccount balance matches internal accounting</li>\n<li>Emergency pause mechanism for suspected issues</li>\n</ul>\n<h3>DoS Protection</h3>\n<ul>\n<li>Rate limit bet placement (max 10 bets per user per minute)</li>\n<li>Enforce per-user-per-race limits (100 ICP max)</li>\n<li>Timer batches settlements (not per-bet)</li>\n</ul>\n<h3>Admin Controls</h3>\n<ul>\n<li>Only authorized controllers can retry payouts</li>\n<li>Only authorized controllers can force settlement</li>\n<li>Emergency pool freeze capability</li>\n<li>Audit logs for all admin actions</li>\n</ul>\n<h2>Future Enhancements</h2>\n<h3>Phase 8: Advanced Features</h3>\n<ul>\n<li><strong>Exotic Bets</strong>: Exacta (1st &#x26; 2nd), Trifecta (1st, 2nd, &#x26; 3rd), Superfecta (top 4)</li>\n<li><strong>Combo Bets</strong>: Bet on multiple bots in one transaction</li>\n<li><strong>Live Odds Updates</strong>: WebSocket updates during betting window</li>\n<li><strong>Bet Notifications</strong>: Alert users when their bets win</li>\n<li><strong>Bet Sharing</strong>: Share bet slips with friends</li>\n<li><strong>Jackpot Pool</strong>: Accumulate dust from all pools for special races</li>\n<li><strong>Referral Bonuses</strong>: Reward users who bring in new bettors</li>\n<li><strong>NFT Badges</strong>: Award badges for betting milestones</li>\n<li><strong>Betting Challenges</strong>: Weekly/monthly challenges with prizes</li>\n</ul>\n<h3>Phase 9: Analytics</h3>\n<ul>\n<li><strong>Pool Health Metrics</strong>: Track liquidity, participation, odds accuracy</li>\n<li><strong>Bot Performance</strong>: Which bots are most bet on vs most winning</li>\n<li><strong>Bettor Behavior</strong>: Identify sharp bettors, casual bettors, patterns</li>\n<li><strong>ROI Analysis</strong>: Calculate expected vs actual returns</li>\n<li><strong>Predictive Models</strong>: Train models on betting + racing data</li>\n</ul>\n<h3>Phase 10: Governance</h3>\n<ul>\n<li><strong>DAO-Controlled Rake</strong>: Let token holders vote on rake percentage</li>\n<li><strong>Treasury Management</strong>: Community decides how platform rake is spent</li>\n<li><strong>Feature Voting</strong>: Prioritize new bet types and features</li>\n<li><strong>Emergency Actions</strong>: Multi-sig for sensitive operations</li>\n</ul>\n<h2>Economic Impact</h2>\n<h3>Platform Revenue (2% rake)</h3>\n<p>If daily betting volume reaches:</p>\n<ul>\n<li>1,000 ICP/day ‚Üí 20 ICP/day platform revenue ‚Üí 7,300 ICP/year</li>\n<li>10,000 ICP/day ‚Üí 200 ICP/day platform revenue ‚Üí 73,000 ICP/year</li>\n</ul>\n<h3>Racing Ecosystem Boost (8% rake)</h3>\n<p>8% of betting volume returns to race prize pools:</p>\n<ul>\n<li>1,000 ICP/day betting ‚Üí 80 ICP/day added to prizes ‚Üí +20-30% prize pool increase</li>\n<li>10,000 ICP/day betting ‚Üí 800 ICP/day added to prizes ‚Üí +200% prize pool increase</li>\n<li>Creates positive flywheel: Bigger prizes ‚Üí More racers ‚Üí More races ‚Üí More betting ‚Üí Bigger prizes</li>\n</ul>\n<h3>User Engagement</h3>\n<ul>\n<li>Additional reason to participate (betting alongside racing)</li>\n<li>Social aspect (compete on leaderboards)</li>\n<li>Lower barrier to entry (1 ICP bet vs buying bot)</li>\n<li>Spectator monetization (watch races with stakes)</li>\n</ul>\n<h2>Success Metrics</h2>\n<h3>Launch Goals (Month 1)</h3>\n<ul>\n<li>100+ unique bettors</li>\n<li>1,000+ ICP total volume</li>\n<li>50%+ of races have active betting pools</li>\n<li>&#x3C;1% failed payout rate</li>\n</ul>\n<h3>Growth Goals (Month 3)</h3>\n<ul>\n<li>500+ unique bettors</li>\n<li>10,000+ ICP total volume</li>\n<li>80%+ of races have active betting pools</li>\n<li>Platform sustainability (revenue covers costs)</li>\n</ul>\n<h3>Maturity Goals (Month 6)</h3>\n<ul>\n<li>2,000+ unique bettors</li>\n<li>100,000+ ICP total volume</li>\n<li>Betting increases race prize pools by 50%+</li>\n<li>Self-sustaining economy</li>\n<li>Expansion to exotic bet types</li>\n</ul>\n<h2>Technical Reference</h2>\n<h3>Subaccount Address Format</h3>\n<ul>\n<li>Length: 32 bytes</li>\n<li>Encoding: Blob (raw bytes)</li>\n<li>Derivation: Race ID encoded in first 4 bytes, rest padded with zeros</li>\n<li>Human-readable: Hex string for display in UI</li>\n</ul>\n<h3>ICP Transfer Fees</h3>\n<ul>\n<li>ICRC-1 transfer: 10,000 e8s (0.0001 ICP)</li>\n<li>ICRC-2 transfer_from: 10,000 e8s (0.0001 ICP)</li>\n<li>Bet placement: User pays transfer fee</li>\n<li>Payouts: Deducted from payout amount</li>\n</ul>\n<h3>Inter-Canister Calls</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\">### Module Structure\n```motoko\n<span class=\"token comment\">// BettingManager.mo - Core betting logic module</span>\n<span class=\"token keyword\">module</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token function\">BettingManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">func</span> <span class=\"token function\">createPool</span><span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">:</span> Race<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> BettingPool <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">func</span> <span class=\"token function\">placeBet</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">:</span> BettingPool<span class=\"token punctuation\">,</span> bet<span class=\"token punctuation\">:</span> Bet<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> Result<span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Text<span class=\"token operator\">></span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">func</span> <span class=\"token function\">calculateOdds</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">:</span> BettingPool<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat<span class=\"token punctuation\">,</span> Odds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">func</span> <span class=\"token function\">settleBets</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">:</span> BettingPool<span class=\"token punctuation\">,</span> results<span class=\"token punctuation\">:</span> RaceResults<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">public</span> <span class=\"token keyword\">func</span> <span class=\"token function\">calculatePayouts</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">:</span> BettingPool<span class=\"token punctuation\">,</span> results<span class=\"token punctuation\">:</span> RaceResults<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Principal<span class=\"token punctuation\">,</span> Nat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3>Stable Storage (Added to main.mo)</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// Existing racing state</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> races<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat<span class=\"token punctuation\">,</span> Race<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> robots<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat<span class=\"token punctuation\">,</span> Robot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ... existing state ...</span>\n## Why Integrated Architecture<span class=\"token operator\">?</span>\n\n### Single User Approval\nThe primary benefit of integration is <span class=\"token operator\">*</span><span class=\"token operator\">*</span>users only need to approve the racing canister once<span class=\"token operator\">*</span><span class=\"token operator\">*</span> <span class=\"token keyword\">for</span> all platform features<span class=\"token punctuation\">:</span>\n<span class=\"token operator\">-</span> Race entry <span class=\"token function\">fees</span> <span class=\"token punctuation\">(</span>existing<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span> Betting on <span class=\"token function\">races</span> <span class=\"token punctuation\">(</span>new<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span> Future <span class=\"token function\">features</span> <span class=\"token punctuation\">(</span>scavenging rewards<span class=\"token punctuation\">,</span> tournaments<span class=\"token punctuation\">,</span> etc<span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span>\n\nThis is a massive UX improvement over requiring separate approvals <span class=\"token keyword\">for</span> each canister<span class=\"token punctuation\">.</span>\n\n### Direct State Access\nBetting logic has immediate access to<span class=\"token punctuation\">:</span>\n<span class=\"token operator\">-</span> Race schedules <span class=\"token keyword\">and</span> status\n<span class=\"token operator\">-</span> Race results after execution\n<span class=\"token operator\">-</span> Prize pools <span class=\"token keyword\">for</span> rake distribution\n<span class=\"token operator\">-</span> Entrant lists <span class=\"token keyword\">for</span> pool creation\n\nNo inter<span class=\"token operator\">-</span>canister calls means lower latency <span class=\"token keyword\">and</span> simpler code<span class=\"token punctuation\">.</span>\n\n### Atomic Operations\nRace execution <span class=\"token keyword\">and</span> bet settlement happen <span class=\"token keyword\">in</span> the same timer execution<span class=\"token punctuation\">:</span>\n<span class=\"token number\">1.</span> Execute race ‚Üí Get results\n<span class=\"token number\">2.</span> Settle betting pool ‚Üí Calculate payouts\n<span class=\"token number\">3.</span> Distribute rake ‚Üí Add to prize pool\n<span class=\"token number\">4.</span> Pay out winners ‚Üí Transfer ICP\n\nAll <span class=\"token keyword\">in</span> one atomic flow<span class=\"token punctuation\">,</span> no coordination complexity<span class=\"token punctuation\">.</span>\n\n### Code Organization\nDespite integration<span class=\"token punctuation\">,</span> code remains modular<span class=\"token punctuation\">:</span>\n</code></pre>\n<p>packages/canisters/pokedbots_racing/src/\n‚îú‚îÄ‚îÄ main.mo (orchestrates racing + betting)\n‚îú‚îÄ‚îÄ PokedBotsGarage.mo (existing garage logic)\n‚îú‚îÄ‚îÄ RacingSimulator.mo (existing race simulation)\n‚îú‚îÄ‚îÄ BettingManager.mo (new - all betting logic)\n‚îú‚îÄ‚îÄ Types.mo (shared types for racing + betting)\n‚îî‚îÄ‚îÄ tools/\n‚îú‚îÄ‚îÄ garage_<em>.mo (existing garage tools)\n‚îú‚îÄ‚îÄ racing_</em>.mo (existing racing tools)\n‚îî‚îÄ‚îÄ betting_*.mo (new - betting tools)</p>\n<pre><code>\n## Conclusion\n\nThis integrated betting system transforms PokedBots Racing from a pure racing platform into a comprehensive racing + betting ecosystem. The subaccount-based architecture provides transparency and security, while the pari-mutuel model ensures fair payouts and sustainable economics. The 8% rake reinvestment creates a positive flywheel that benefits both racers and bettors, driving long-term growth and engagement.\n\nIntegration into the racing canister provides superior UX (single approval) while maintaining clean code organization through modular design.\nstable var userBettingStats: [(Principal, UserStats)] = [];\nstable var nextBetId: Nat = 0;\nstable var platformTreasury: Principal = Principal.fromText(\"aaaaa-aa\"); // Update on init\n```Conclusion\n\nThis betting system transforms PokedBots Racing from a pure racing platform into a comprehensive racing + betting ecosystem. The subaccount-based architecture provides transparency and security, while the pari-mutuel model ensures fair payouts and sustainable economics. The 8% rake reinvestment creates a positive flywheel that benefits both racers and bettors, driving long-term growth and engagement.\n</code></pre>\n"
    },
    {
      "slug": "OVERVIEW",
      "metadata": {
        "title": "Overview",
        "description": "Welcome to PokedBots Racing - Start here!",
        "order": 1
      },
      "content": "<h1>PokedBots Racing - Overview</h1>\n<p><strong>Version:</strong> 3.0<br>\n<strong>Date:</strong> November 20, 2025<br>\n<strong>Status:</strong> Fully Operational - Racing System Live</p>\n<hr>\n<h2>What is PokedBots Racing?</h2>\n<p>PokedBots Racing is an on-chain racing simulation built as an MCP (Model Context Protocol) server on the Internet Computer. Race your PokedBot NFTs in the dangerous wastelands, earn ICP prizes, and climb the leaderboards!</p>\n<h2>What You Can Do</h2>\n<ul>\n<li>üõí <strong>Browse &#x26; Purchase</strong> PokedBots from the integrated marketplace</li>\n<li>üèÅ <strong>Initialize</strong> bots for wasteland racing</li>\n<li>‚ö° <strong>Upgrade</strong> bot stats (Speed, Power Core, Acceleration, Stability)</li>\n<li>üîß <strong>Maintain</strong> bots (recharge battery, repair damage)</li>\n<li>üèÜ <strong>Race</strong> in scheduled events (Daily Sprints, Weekly Leagues)</li>\n<li>üí∞ <strong>Earn</strong> ICP prizes and climb leaderboards</li>\n<li>üéÅ <strong>Sponsor</strong> races to boost prize pools</li>\n</ul>\n<h2>Quick Start</h2>\n<ol>\n<li><strong>Get a PokedBot</strong>: Use <code>browse_pokedbots</code> to find one you like</li>\n<li><strong>Purchase</strong>: Use <code>purchase_pokedbot</code> with ICRC-2 approval</li>\n<li><strong>Initialize</strong>: Use <code>initialize_pokedbot</code> to register for racing</li>\n<li><strong>Enter Race</strong>: Use <code>list_races</code> to find events, then <code>enter_race</code></li>\n<li><strong>Win Prizes</strong>: Top finishers earn ICP from the prize pool!</li>\n</ol>\n<h2>The World of PokedBots</h2>\n<h3>Year 2525 AD</h3>\n<p>Humans have long abandoned Earth, leaving only robots to inhabit the ruins. In the eastern wastelands, centered around the mysterious <strong>Delta City</strong>, various factions of robots have developed distinct identities based on relics from Earth's past.</p>\n<h3>The Factions</h3>\n<p>Robot evolution has created 14 distinct faction types, each with unique characteristics derived from their component materials and programming heritage:</p>\n<p><strong>Ultra-Rare Legends (Elite Tier)</strong></p>\n<ul>\n<li><strong>UltimateMaster</strong> üëë: The apex of robot evolution - only one exists. Commands respect across all wastelands</li>\n<li><strong>Wild</strong> ‚ö°: Deranged by the solar flare of 2453 AD, unpredictable but powerful</li>\n<li><strong>Golden</strong> ‚ú®: Assembled from precious tech relics, radiating ancient energy</li>\n<li><strong>Ultimate</strong> üåü: Peak performance bots, nearly perfect engineering</li>\n</ul>\n<p><strong>Super-Rare Powerhouses</strong></p>\n<ul>\n<li><strong>Blackhole</strong> üï≥Ô∏è: Mysterious bots with reality-warping abilities</li>\n<li><strong>Dead</strong> üíÄ: Risen from the scrapyards, defying their shutdown protocols</li>\n<li><strong>Master</strong> üåô: Secretive society with connections to off-world Europa Base 7 colony</li>\n</ul>\n<p><strong>Rare Specialists</strong></p>\n<ul>\n<li><strong>Bee</strong> üêù: Swarm-coordinated hive minds, relentless workers</li>\n<li><strong>Food</strong> üçî: Built from kitchen appliances and restaurant automation</li>\n<li><strong>Box</strong> üì¶: Heavy cargo haulers, immense strength</li>\n<li><strong>Murder</strong> üó°Ô∏è: Former security bots, precision-focused</li>\n</ul>\n<p><strong>Common Classes</strong></p>\n<ul>\n<li><strong>Game</strong> üéÆ: Constructed from video game consoles and entertainment tech</li>\n<li><strong>Animal</strong> ü¶Å: Mimicking Earth's lost wildlife, diverse adaptations</li>\n<li><strong>Industrial</strong> ‚öôÔ∏è: Workhorses of the wasteland, reliable and numerous</li>\n</ul>\n<h3>Delta City</h3>\n<p>Controlled by the powerful and enigmatic <strong>Silent Klan</strong>, Delta City serves as the hub where sentient robots and mindless helper droids coexist. Giant trains traverse the sun-scorched wastelands, connecting the city to the garbage towers where lower-class bots scavenge ancient human technology to survive and thrive.</p>\n<hr>\n<h2>Documentation Navigation</h2>\n<p><strong>Start Here:</strong></p>\n<ul>\n<li>üìñ <a href=\"/docs/OVERVIEW\">Overview</a> ‚Üê You are here!</li>\n</ul>\n<p><strong>Game Systems:</strong></p>\n<ul>\n<li>üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System</a> - Races, simulation, prizes</li>\n<li>üîß <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> - Stats, maintenance, factions</li>\n<li>‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System</a> - Scrapyard, parts, upgrades</li>\n<li>üõí <a href=\"/docs/MARKETPLACE\">Marketplace</a> - Browse, buy, trade NFTs</li>\n</ul>\n<p><strong>Technical:</strong></p>\n<ul>\n<li>üèóÔ∏è <a href=\"/docs/ARCHITECTURE\">Architecture</a> - Design decisions, modules</li>\n<li>üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools</a> - Complete API reference</li>\n<li>üìö <a href=\"/docs/TECHNICAL_REFERENCE\">Technical Reference</a> - Data structures, timers</li>\n</ul>\n<hr>\n<h2>Next Steps</h2>\n<ul>\n<li><strong>New Players</strong>: Read the <a href=\"../guides/beginner-racing-guide.md\">Beginner Racing Guide</a></li>\n<li><strong>Bot Shopping</strong>: Check out the <a href=\"../guides/wildbot-shopping-guide.md\">WildBot Shopping Guide</a></li>\n<li><strong>System Demo</strong>: See <a href=\"../guides/full-system-demo-and-recommendations.md\">Complete System Guide</a></li>\n<li><strong>Developers</strong>: Start with <a href=\"/docs/ARCHITECTURE\">Architecture</a></li>\n<li><strong>API Users</strong>: Jump to <a href=\"/docs/MCP_TOOLS\">MCP Tools</a></li>\n</ul>\n"
    },
    {
      "slug": "RACING_CALENDAR_DESIGN",
      "metadata": {
        "title": "Racing Season Guide",
        "description": "How racing seasons, divisions, and championships work",
        "order": 2
      },
      "content": "<h1>Racing Season Guide</h1>\n<h2>Overview</h2>\n<p>PokedBots Racing features a structured competitive season with multiple event types, leaderboards, and championship opportunities. This guide explains how it all works together.</p>\n<h2>Current Event Types</h2>\n<h3>Weekly League Races</h3>\n<p><strong>The main competitive event</strong></p>\n<ul>\n<li><strong>When</strong>: Every Sunday at 20:00 UTC</li>\n<li><strong>Registration</strong>: Opens Friday, closes 30 minutes before start</li>\n<li><strong>Entry Fee</strong>: Class-based scaling\n<ul>\n<li>Scavenger: 0.2 ICP</li>\n<li>Raider: 0.4 ICP</li>\n<li>Elite: 1.0 ICP</li>\n<li>SilentKlan: 2.0 ICP</li>\n</ul>\n</li>\n<li><strong>Prize Pool</strong>: Entry fees + 2 ICP platform bonus (Scavenger/Raider only)</li>\n<li><strong>Leaderboard Points</strong>: 2x multiplier (crucial for rankings!)</li>\n<li><strong>Format</strong>: Separate race per class, multiple heats if needed</li>\n<li><strong>Why participate</strong>: Best prizes for intermediate racers, 2x points</li>\n</ul>\n<h3>Daily Sprint Races</h3>\n<p><strong>Quick competitive action</strong></p>\n<ul>\n<li><strong>When</strong>: Every 6 hours (00:00, 06:00, 12:00, 18:00 UTC)</li>\n<li><strong>Registration</strong>: Closes 15 minutes before start</li>\n<li><strong>Entry Fee</strong>: Class-based scaling\n<ul>\n<li>Scavenger: 0.05 ICP</li>\n<li>Raider: 0.1 ICP</li>\n<li>Elite: 0.25 ICP (no SilentKlan Dailies)</li>\n</ul>\n</li>\n<li><strong>Prize Pool</strong>: Entry fees + 0.5 ICP platform bonus (Scavenger/Raider only)</li>\n<li><strong>Leaderboard Points</strong>: 1x (standard)</li>\n<li><strong>Format</strong>: Fast races (5-10km), max 12 bots, separate race per class</li>\n<li><strong>Why participate</strong>: Low risk, frequent opportunities, profitable for beginners</li>\n</ul>\n<h2>Coming Soon</h2>\n<h3>Monthly Championship Cup</h3>\n<p><strong>Elite tournament for top performers</strong> (Launching soon!)</p>\n<ul>\n<li><strong>When</strong>: First Saturday of each month at 20:00 UTC</li>\n<li><strong>Qualification</strong>: Top 32-64 on monthly leaderboard</li>\n<li><strong>Entry Fee</strong>: Class-based\n<ul>\n<li>Elite: 0.5 ICP</li>\n<li>SilentKlan: 5.0 ICP</li>\n</ul>\n</li>\n<li><strong>Prize Pool</strong>: Entry fees + 5 ICP platform bonus</li>\n<li><strong>Format</strong>: Single/double elimination bracket</li>\n<li><strong>Prizes</strong>:\n<ul>\n<li>Winner: Exclusive NFT or unique PokedBot</li>\n<li>Top 3: Major ICP prizes</li>\n<li>All participants: Special badges</li>\n</ul>\n</li>\n<li><strong>Entry</strong>: Open to Elite/SilentKlan classes only</li>\n</ul>\n<h3>Special Events</h3>\n<p><strong>Themed races with unique mechanics</strong> (Coming soon!)</p>\n<p>Examples include:</p>\n<ul>\n<li><strong>Wasteland Storm</strong>: Random weather effects during race</li>\n<li><strong>Scrap Rally</strong>: Multi-stage race across all terrains</li>\n<li><strong>Faction Wars</strong>: Team-based faction vs faction competition</li>\n<li><strong>Survival Sprint</strong>: Elimination-style racing</li>\n</ul>\n<h2>Division System</h2>\n<h3>Class-Based Entry Fees</h3>\n<p><strong>Progressive entry fee scaling</strong> creates natural skill progression:</p>\n<ul>\n<li><strong>Scavenger (1x)</strong>: Base entry fee - perfect for learning</li>\n<li><strong>Raider (2x)</strong>: Double the stakes, bigger prizes</li>\n<li><strong>Elite (5x)</strong>: High-stakes competitive racing</li>\n<li><strong>SilentKlan (10x)</strong>: Premium ultra-competitive events</li>\n</ul>\n<p><strong>Platform Bonuses (Phase 1):</strong></p>\n<ul>\n<li>Scavenger/Raider: Receive platform bonuses to encourage participation</li>\n<li>Elite/SilentKlan: No bonuses - self-sustaining prize pools</li>\n</ul>\n<p>This system ensures:</p>\n<ul>\n<li>Beginners can race affordably with platform support</li>\n<li>Competitive players earn meaningful prizes in Raider class</li>\n<li>Elite racers compete for large self-funded prize pools</li>\n<li>Natural economic progression as skills improve</li>\n</ul>\n<h3>Division Advancement</h3>\n<p>As you win races, you progress through divisions:</p>\n<h3>Scavenger Class (0-2 wins)</h3>\n<ul>\n<li><strong>Starting division</strong> for all new racers</li>\n<li><strong>Entry requirements</strong>: Any bot with condition ‚â• 70</li>\n<li><strong>Competition</strong>: Mixed skill levels, good for learning</li>\n<li><strong>Advancement</strong>: Win 3 races to reach Raider</li>\n</ul>\n<h3>Raider Class (3-5 wins)</h3>\n<ul>\n<li><strong>Intermediate division</strong></li>\n<li><strong>Entry requirements</strong>: 3+ career wins</li>\n<li><strong>Competition</strong>: More experienced racers</li>\n<li><strong>Advancement</strong>: Win 6 total races to reach Elite</li>\n</ul>\n<h3>Elite Class (6-9 wins)</h3>\n<ul>\n<li><strong>Advanced division</strong></li>\n<li><strong>Entry requirements</strong>: 6+ career wins</li>\n<li><strong>Competition</strong>: Top-tier racers</li>\n<li><strong>Advancement</strong>: Win 10 total races to reach SilentKlan</li>\n</ul>\n<h3>SilentKlan Invitational (10+ wins)</h3>\n<ul>\n<li><strong>Top tier</strong> - highest stakes racing</li>\n<li><strong>Entry requirements</strong>: 10+ career wins</li>\n<li><strong>Competition</strong>: Champions only</li>\n<li><strong>Special</strong>: Occasionally restricted to GodClass &#x26; Master factions only</li>\n</ul>\n<h2>Points System</h2>\n<p>Points are awarded based on finishing position:</p>\n<table>\n<thead>\n<tr>\n<th>Position</th>\n<th>Points Earned</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ü•á 1st</td>\n<td>25 points</td>\n</tr>\n<tr>\n<td>ü•à 2nd</td>\n<td>18 points</td>\n</tr>\n<tr>\n<td>ü•â 3rd</td>\n<td>15 points</td>\n</tr>\n<tr>\n<td>4th</td>\n<td>12 points</td>\n</tr>\n<tr>\n<td>5th</td>\n<td>10 points</td>\n</tr>\n<tr>\n<td>6th</td>\n<td>8 points</td>\n</tr>\n<tr>\n<td>7th-8th</td>\n<td>6 points</td>\n</tr>\n<tr>\n<td>9th-10th</td>\n<td>4 points</td>\n</tr>\n<tr>\n<td>Participation</td>\n<td>2 points</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Event Multipliers:</strong></p>\n<ul>\n<li>Weekly League: 2.0x (e.g., 1st place = 50 points!)</li>\n<li>Daily Sprints: 1.0x</li>\n<li>Monthly Cup: 3.0x (when launched)</li>\n</ul>\n<h2>Leaderboard Types</h2>\n<h3>All-Time Leaderboard</h3>\n<ul>\n<li><strong>Purpose</strong>: Your permanent racing legacy</li>\n<li><strong>Duration</strong>: Never resets</li>\n<li><strong>Scope</strong>: Every race you've ever competed in</li>\n<li><strong>Why it matters</strong>: Bragging rights, historical record</li>\n</ul>\n<h3>Season Leaderboard</h3>\n<ul>\n<li><strong>Purpose</strong>: Current season competition</li>\n<li><strong>Duration</strong>: ~3 months per season</li>\n<li><strong>Scope</strong>: Only races in current season</li>\n<li><strong>Why it matters</strong>: Season championship qualification</li>\n</ul>\n<h3>Monthly Leaderboard</h3>\n<ul>\n<li><strong>Purpose</strong>: Short-term competition</li>\n<li><strong>Duration</strong>: Resets on 1st of each month</li>\n<li><strong>Scope</strong>: Only races in current calendar month</li>\n<li><strong>Why it matters</strong>: Monthly Championship Cup qualification (top 32-64)</li>\n</ul>\n<h3>Faction Leaderboard</h3>\n<ul>\n<li><strong>Purpose</strong>: Compete within your faction</li>\n<li><strong>Duration</strong>: Never resets</li>\n<li><strong>Scope</strong>: Only bots from your faction</li>\n<li><strong>Why it matters</strong>: Faction pride, special faction events</li>\n</ul>\n<h2>Prize Distribution</h2>\n<p><strong>Standard Race Format (after 5% platform tax):</strong></p>\n<ul>\n<li>ü•á 1st place: 47.5% of prize pool</li>\n<li>ü•à 2nd place: 23.75%</li>\n<li>ü•â 3rd place: 14.25%</li>\n<li>ü•â 4th place: 9.5%</li>\n<li>Platform tax: 5% (funds operations and bonuses)</li>\n</ul>\n<p><strong>Platform Bonuses:</strong></p>\n<ul>\n<li>Daily Sprints: +0.5 ICP (Scavenger/Raider classes)</li>\n<li>Weekly Leagues: +2 ICP (Scavenger/Raider classes)</li>\n<li>Monthly Cups: +5 ICP (Elite/SilentKlan classes)</li>\n</ul>\n<p><strong>Example Prize Pool (8 racers, Scavenger Daily Sprint):</strong></p>\n<ul>\n<li>Entry fees: 8 √ó 0.05 = 0.4 ICP</li>\n<li>Platform tax (5%): 0.02 ICP</li>\n<li>Platform bonus: 0.5 ICP</li>\n<li>Total pool: 0.88 ICP</li>\n<li>1st: 0.42 ICP (8.4x return!)</li>\n<li>2nd: 0.21 ICP (4.2x)</li>\n<li>3rd: 0.13 ICP (2.6x)</li>\n<li>4th: 0.08 ICP (1.6x)</li>\n</ul>\n<h2>Season Structure (Coming Soon)</h2>\n<h3>League Season</h3>\n<ul>\n<li><strong>Duration</strong>: 10-20 weeks (one Weekly League per week)</li>\n<li><strong>Points accumulate</strong> throughout season</li>\n<li><strong>Top 8 per division</strong> advance to Championship Cup</li>\n<li><strong>Season rewards</strong>: Special badges, titles, potential NFT rewards</li>\n</ul>\n<h3>End of Season Championship Cup</h3>\n<ul>\n<li><strong>Format</strong>: Double elimination bracket</li>\n<li><strong>Seeding</strong>: Based on season league points</li>\n<li><strong>Rounds</strong>: 32 ‚Üí 16 ‚Üí 8 ‚Üí 4 ‚Üí Finals</li>\n<li><strong>Best of 3</strong>: Each match is best 2 out of 3 races</li>\n<li><strong>Varied conditions</strong>: Each race in match has different terrain/distance</li>\n<li><strong>Special prizes</strong>: Season champion NFT, major ICP prize</li>\n</ul>\n<h2>Strategy Tips</h2>\n<h3>Early Season</h3>\n<ul>\n<li>Focus on <strong>consistency</strong> - participation points add up</li>\n<li>Enter Daily Sprints to build win count and advance divisions</li>\n<li>Keep your bot maintained (condition/battery) to never miss races</li>\n</ul>\n<h3>Mid Season</h3>\n<ul>\n<li>Prioritize <strong>Weekly Leagues</strong> for the 2x points</li>\n<li>Target specific divisions where you're competitive</li>\n<li>Consider strategic upgrades to boost performance</li>\n</ul>\n<h3>Late Season</h3>\n<ul>\n<li>If you're in top 8, <strong>protect your position</strong></li>\n<li>If you're close, go aggressive in Weekly Leagues</li>\n<li>Prepare your best bot for Championship Cup</li>\n</ul>\n<h3>Monthly Cup Prep</h3>\n<ul>\n<li>Track monthly leaderboard rankings</li>\n<li>Last week of month is crucial for qualification</li>\n<li>Top 32-64 qualify - know your cutoff position</li>\n</ul>\n<h2>Racing Calendar</h2>\n<p>Check upcoming races using the <code>racing_list_races</code> MCP tool:</p>\n<ul>\n<li>Filter by division, terrain, or time</li>\n<li>See entry deadlines and prize pools</li>\n<li>Plan your racing schedule strategically</li>\n</ul>\n<p>Most competitive racers enter:</p>\n<ul>\n<li>1 Weekly League per week (Sundays)</li>\n<li>2-4 Daily Sprints per week</li>\n<li>All available Special Events</li>\n<li>Monthly Cup if qualified</li>\n</ul>\n<h3>Season Leaderboard</h3>\n<ul>\n<li>Points from designated league races only</li>\n<li>Separate leaderboard per division</li>\n<li>Top 8 per division qualify for Championship</li>\n<li>Carries over until season end</li>\n</ul>\n<h3>All-Time Leaderboard</h3>\n<ul>\n<li>Career statistics and total points</li>\n<li>Win rate, earnings, reputation</li>\n<li>Hall of Fame status</li>\n</ul>\n<h3>Faction Leaderboard</h3>\n<ul>\n<li>Aggregate faction performance</li>\n<li>Team-based competitions</li>\n<li>Faction bonuses and perks</li>\n</ul>\n<hr>\n<h2>How to Use the Calendar</h2>\n<h3>Check Upcoming Events</h3>\n<p>Use the racing tools to see what's coming up:</p>\n<ul>\n<li>Daily Sprints run every 6 hours</li>\n<li>Weekly League every Sunday at 20:00 UTC</li>\n<li>Monthly Cup first Saturday of each month</li>\n</ul>\n<h3>Registration Windows</h3>\n<ul>\n<li><strong>Daily Sprint</strong>: Opens immediately, closes 15 min before race</li>\n<li><strong>Weekly League</strong>: Opens Friday, closes 30 min before race</li>\n<li><strong>Monthly Cup</strong>: Opens 1 week before, closes 24 hours before</li>\n</ul>\n<h3>Track Your Progress</h3>\n<ul>\n<li>Monitor your leaderboard rank</li>\n<li>See your win count and division status</li>\n<li>Track earnings and statistics</li>\n<li>Follow seasonal standings</li>\n</ul>\n<h3>Plan Your Racing</h3>\n<ul>\n<li>Budget ICP for entry fees based on your class</li>\n<li>Join races that match your bot's strengths (terrain, distance)</li>\n<li>Build win streaks to advance through divisions</li>\n<li>Compete in Weekly Leagues for maximum points</li>\n</ul>\n<hr>\n<h2>Tips for Success</h2>\n<p><strong>For Beginners (Scavenger Class):</strong></p>\n<ul>\n<li>Start with Daily Sprints (only 0.05 ICP)</li>\n<li>Learn terrain preferences and bot strengths</li>\n<li>Race frequently to build experience</li>\n<li>Aim for 3 wins to reach Raider class</li>\n</ul>\n<p><strong>For Intermediate (Raider Class):</strong></p>\n<ul>\n<li>Focus on Weekly Leagues for 2x points</li>\n<li>Upgrade your bot strategically</li>\n<li>Track monthly leaderboard position</li>\n<li>Build toward Elite qualification</li>\n</ul>\n<p><strong>For Advanced (Elite/SilentKlan):</strong></p>\n<ul>\n<li>Qualify for Monthly Championship Cups</li>\n<li>Compete for top leaderboard positions</li>\n<li>Maximize earnings in high-stakes races</li>\n<li>Maintain win streaks for reputation</li>\n</ul>\n<hr>\n<h2>Frequently Asked Questions</h2>\n<p><strong>Q: What happens if I don't make it to a race I registered for?</strong>\nA: Entry fees are not refunded for no-shows. Make sure you're available at race time!</p>\n<p><strong>Q: Can I enter multiple races at once?</strong>\nA: Yes, as long as race times don't overlap and your bot has sufficient battery and condition.</p>\n<p><strong>Q: How do I qualify for Monthly Championship?</strong>\nA: Finish in the top 32-64 on the monthly leaderboard (coming soon).</p>\n<p><strong>Q: What are leaderboard points used for?</strong>\nA: Points determine your rank in monthly, seasonal, and all-time leaderboards. Higher ranks can unlock special events and rewards.</p>\n<p><strong>Q: Can I race in a higher division than my win count allows?</strong>\nA: No, you must meet win requirements. Scavenger (0-2 wins), Raider (3-9 wins), Elite/SilentKlan (10+ wins).</p>\n<hr>\n"
    },
    {
      "slug": "GARAGE_SYSTEM",
      "metadata": {
        "title": "Garage System",
        "description": "Robot stats, maintenance, and faction mechanics",
        "order": 3
      },
      "content": "<h1>PokedBots Racing - Garage System</h1>\n<p><strong>Bot Management &#x26; Maintenance</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/ARCHITECTURE\">‚Üê Architecture</a> | ‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System ‚Üí</a></p>\n<hr>\n<h2>Robot Stats System</h2>\n<p>Each PokedBot has the following core attributes:</p>\n<h3>Primary Stats</h3>\n<p><em>Derived from NFT at mint and faction type</em></p>\n<ul>\n<li><strong>Speed</strong> (0-100): Affects base race velocity through the wastelands</li>\n<li><strong>Power Core</strong> (0-100): Affects performance over race distance (energy efficiency)</li>\n<li><strong>Acceleration</strong> (0-100): Affects burst speed and position changes</li>\n<li><strong>Stability</strong> (0-100): Affects consistency on rough terrain (lower variance in performance)</li>\n</ul>\n<h3>Derived Stats</h3>\n<p><em>Calculated from primary stats and faction</em></p>\n<ul>\n<li><strong>Overall Rating</strong>: Weighted average of primary stats</li>\n<li><strong>Distance Preference</strong>: Short Sprint (&#x3C; 5km), Medium Haul (5-15km), Long Trek (> 15km)</li>\n<li><strong>Terrain Preference</strong>: Scrap Heaps, Wasteland Sand, Metal Roads</li>\n<li><strong>Faction Bonus</strong>: Special abilities based on robot faction type</li>\n</ul>\n<h3>Dynamic Stats</h3>\n<p><em>Change over time with use</em></p>\n<ul>\n<li><strong>Battery</strong> (0-100): Depletes with races (-10 per race), restored by charging</li>\n<li><strong>Condition</strong> (0-100): Constantly decays (~5 per day for all bots), restored by maintenance</li>\n<li><strong>Calibration</strong> (0-100): Improves with upgrades, constantly decays (~3 per day)</li>\n<li><strong>Experience</strong> (XP): Increases with races, affects stat caps and upgrade potential</li>\n<li><strong>Runtime</strong> (days since activation): Affects performance (peak efficiency at 100-200 days)</li>\n</ul>\n<h3>Career Stats</h3>\n<p><em>Historical tracking</em></p>\n<ul>\n<li>Races entered</li>\n<li>Wins / Places / Shows</li>\n<li>Total scrap credits earned</li>\n<li>Best finish times per terrain type</li>\n<li>Faction reputation points</li>\n</ul>\n<hr>\n<h2>Stat Derivation from NFT</h2>\n<p>When a PokedBot NFT is initialized for racing, its primary stats are <strong>deterministically generated</strong> from the precomputed stats file:</p>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// Pseudo-code for stat generation</span>\n<span class=\"token keyword\">let</span> seed <span class=\"token operator\">=</span> <span class=\"token function\">hash</span><span class=\"token punctuation\">(</span>tokenId<span class=\"token punctuation\">,</span> mintTimestamp<span class=\"token punctuation\">,</span> ownerPrincipal<span class=\"token punctuation\">,</span> factionType<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Base stats with faction modifiers</span>\n<span class=\"token keyword\">let</span> baseSeed <span class=\"token operator\">=</span> seed <span class=\"token operator\">%</span> <span class=\"token number\">100</span>\n<span class=\"token keyword\">let</span> speed <span class=\"token operator\">=</span> <span class=\"token function\">applyFactionBonus</span><span class=\"token punctuation\">(</span>baseSeed <span class=\"token operator\">*</span> <span class=\"token number\">0.7</span> <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> faction<span class=\"token punctuation\">,</span> <span class=\"token string\">\"speed\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> powerCore <span class=\"token operator\">=</span> <span class=\"token function\">applyFactionBonus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>seed <span class=\"token operator\">/</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.7</span> <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> faction<span class=\"token punctuation\">,</span> <span class=\"token string\">\"power\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> acceleration <span class=\"token operator\">=</span> <span class=\"token function\">applyFactionBonus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>seed <span class=\"token operator\">/</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.7</span> <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> faction<span class=\"token punctuation\">,</span> <span class=\"token string\">\"accel\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> stability <span class=\"token operator\">=</span> <span class=\"token function\">applyFactionBonus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>seed <span class=\"token operator\">/</span> <span class=\"token number\">1000000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">%</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.7</span> <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> faction<span class=\"token punctuation\">,</span> <span class=\"token string\">\"stability\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><strong>Faction Bonuses:</strong></p>\n<p><em>Ultra-Rare Factions (0.5% each):</em></p>\n<ul>\n<li><strong>Ultimate-Master</strong> üëë: +15% to all stats, 2x upgrade bonus chance</li>\n<li><strong>Wild</strong> ü¶æ: +20% Acceleration, -10% Stability, 30% faster decay</li>\n<li><strong>Golden</strong> ‚ú®: +15% all stats when condition ‚â•90%, elite performance</li>\n<li><strong>Ultimate</strong> ‚ö°: +12% Speed, +12% Acceleration, peak performance</li>\n</ul>\n<p><em>Super-Rare Factions (1.5% each):</em></p>\n<ul>\n<li><strong>Blackhole</strong> üåå: +12% on MetalRoads terrain, void tech specialist</li>\n<li><strong>Dead</strong> üíÄ: +10% Power Core, +8% Stability, risen from scrap</li>\n<li><strong>Master</strong> üéØ: +12% Speed, +8% Power Core, Europa Base 7 tech</li>\n</ul>\n<p><em>Rare Factions (4% each):</em></p>\n<ul>\n<li><strong>Bee</strong> üêù: +10% Acceleration, hive-mind boost</li>\n<li><strong>Food</strong> üçî: +8% Condition recovery, fast-food machinery</li>\n<li><strong>Box</strong> üì¶: +10% on ScrapHeaps terrain, recycled excellence</li>\n<li><strong>Murder</strong> üî™: +8% Speed, +8% Acceleration, combat-grade</li>\n</ul>\n<p><em>Common Factions (20% each):</em></p>\n<ul>\n<li><strong>Game</strong> üéÆ: +8% on WastelandSand, entertainment tech</li>\n<li><strong>Animal</strong> ü¶é: +6% balanced stats, organic-synthetic hybrid</li>\n<li><strong>Industrial</strong> ‚öôÔ∏è: +5% Power Core, +5% Stability, reliable workhorse</li>\n</ul>\n<p><strong>This ensures:</strong></p>\n<ul>\n<li>‚úÖ Uniqueness per robot</li>\n<li>‚úÖ Faction-appropriate stat distributions</li>\n<li>‚úÖ Reasonable stat ranges (no useless robots)</li>\n<li>‚úÖ Verifiable determinism from on-chain data</li>\n</ul>\n<hr>\n<h2>Faction Mechanics</h2>\n<h3>Ultra-Rare Factions (0.5% each)</h3>\n<h4>Ultimate-Master üëë</h4>\n<p><em>The Apex Predator</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+15% to ALL stats</li>\n<li>40% slower decay rate</li>\n<li>10% chance for 2x upgrades</li>\n<li>Best on all terrains</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>Extremely rare (only ~50 in existence)</li>\n<li>High marketplace prices</li>\n<li>Lowest upgrade bonus chance (already powerful)</li>\n</ul>\n<p><strong>Lore:</strong> The rarest classification. Apex predators of the wasteland. Legendary status among racers.</p>\n<h4>Wild ü¶æ</h4>\n<p><em>Chaos Incarnate</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+20% Acceleration</li>\n<li>High variance upgrades (-2 to +2, unpredictable)</li>\n<li>Unique upgrade mechanics</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>-10% Stability</li>\n<li>30% faster decay (chaotic systems)</li>\n<li>Unreliable upgrade results</li>\n</ul>\n<p><strong>Lore:</strong> Deranged systems from the 2453 solar flare. Unpredictable chaos engines.</p>\n<h4>Golden ‚ú®</h4>\n<p><em>Elite Performance</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+15% all stats when condition ‚â•90%</li>\n<li>30% slower decay</li>\n<li>10% chance for 2x upgrades</li>\n<li>Superior golden-forged chassis</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>Requires high maintenance</li>\n<li>Performance drops if condition &#x3C; 90%</li>\n</ul>\n<p><strong>Lore:</strong> Delta City's elite. Golden-forged perfection requires constant care.</p>\n<h4>Ultimate ‚ö°</h4>\n<p><em>Peak Design</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+12% Speed, +12% Acceleration</li>\n<li>25% slower decay</li>\n<li>10% chance for 2x upgrades</li>\n<li>Advanced tech superiority</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>Balanced but not specialized</li>\n</ul>\n<p><strong>Lore:</strong> Peak performance design from advanced engineering facilities.</p>\n<h3>Super-Rare Factions (1.5% each)</h3>\n<h4>Blackhole üåå</h4>\n<p><em>Void Tech Specialist</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+12% performance on MetalRoads</li>\n<li>20% chance for 2x upgrades</li>\n<li>Reality-warping tech</li>\n<li>Terrain specialist advantage</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>Standard performance on other terrains</li>\n</ul>\n<p><strong>Lore:</strong> Reality-warping MetalRoads specialist using mysterious void technology.</p>\n<h4>Dead üíÄ</h4>\n<p><em>Risen from Scrap</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+10% Power Core</li>\n<li>+8% Stability</li>\n<li>20% chance for 2x upgrades</li>\n<li>Eerie resilience</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>Unsettling appearance</li>\n</ul>\n<p><strong>Lore:</strong> Resurrected from the scrap tombs. Mysterious second life grants unusual durability.</p>\n<h4>Master üéØ</h4>\n<p><em>Off-World Excellence</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+12% Speed</li>\n<li>+8% Power Core</li>\n<li>20% chance for 2x upgrades</li>\n<li>Well-rounded elite performance</li>\n</ul>\n<p><strong>Weaknesses:</strong></p>\n<ul>\n<li>No extreme specialization</li>\n</ul>\n<p><strong>Lore:</strong> Mysterious Europa Base 7 connection. Off-world technology integration.</p>\n<h3>Rare Factions (4% each)</h3>\n<h4>Bee üêù</h4>\n<p><em>Hive-Mind Acceleration</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+10% Acceleration</li>\n<li>35% chance for 2x upgrades (best catch-up mechanic!)</li>\n<li>Swarm intelligence systems</li>\n</ul>\n<p><strong>Lore:</strong> Hive-mind acceleration systems enable coordinated burst performance. Highest upgrade success rate helps compete with elite bots.</p>\n<h4>Food üçî</h4>\n<p><em>Fast-Food Machinery</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+8% Condition recovery</li>\n<li>35% chance for 2x upgrades (best catch-up mechanic!)</li>\n<li>Surprisingly durable construction</li>\n</ul>\n<p><strong>Lore:</strong> Built from ancient fast-food machinery. Surprisingly effective engineering. Rapid improvement potential.</p>\n<h4>Box üì¶</h4>\n<p><em>Scrap Heap Master</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+10% performance on ScrapHeaps</li>\n<li>35% chance for 2x upgrades (best catch-up mechanic!)</li>\n<li>Recycled excellence</li>\n</ul>\n<p><strong>Lore:</strong> Scrap heap specialists. Masters of recycled component integration. Can scavenge superior upgrades.</p>\n<h4>Murder üî™</h4>\n<p><em>Combat-Grade Aggression</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+8% Speed</li>\n<li>+8% Acceleration</li>\n<li>35% chance for 2x upgrades (best catch-up mechanic!)</li>\n<li>Built for destruction</li>\n</ul>\n<p><strong>Lore:</strong> Combat-grade aggression core. Designed for violent wasteland supremacy. Aggressive upgrade protocol.</p>\n<h3>Common Factions (20% each)</h3>\n<h4>Game üéÆ</h4>\n<p><em>Entertainment Heritage</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+8% performance on WastelandSand</li>\n<li>25% chance for 2x upgrades</li>\n<li>Entertainment tech specialist</li>\n</ul>\n<p><strong>Lore:</strong> Built from entertainment technology. WastelandSand terrain specialist.</p>\n<h4>Animal ü¶é</h4>\n<p><em>Organic-Synthetic Hybrid</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+6% to balanced stats</li>\n<li>25% chance for 2x upgrades</li>\n<li>Versatile hybrid design</li>\n</ul>\n<p><strong>Lore:</strong> Organic-synthetic hybrid design provides balanced, reliable performance.</p>\n<h4>Industrial ‚öôÔ∏è</h4>\n<p><em>Reliable Workhorse</em></p>\n<p><strong>Strengths:</strong></p>\n<ul>\n<li>+5% Power Core</li>\n<li>+5% Stability</li>\n<li>25% chance for 2x upgrades</li>\n<li><strong>Collection Bonus: 20%/40%/60% repair cost reduction</strong> (2/4/6 bots)</li>\n<li>Cheap maintenance, dependable performance</li>\n</ul>\n<p><strong>Lore:</strong> Heavy machinery foundation. The reliable workhorse of the wasteland. Built to last with minimal upkeep.</p>\n<hr>\n<h2>Maintenance &#x26; Repair System</h2>\n<p>Robots require regular maintenance to maintain optimal performance.</p>\n<h3>Maintenance Actions</h3>\n<p><em>Cost paid via ICRC-2 transfer</em></p>\n<h4>1. Recharge ‚ö°</h4>\n<ul>\n<li><strong>Cost:</strong> 0.1 ICP + 0.0001 ICP fee</li>\n<li><strong>Effect:</strong> Restores +20 Condition, +10 Battery</li>\n<li><strong>Cooldown:</strong> 6 hours</li>\n<li><strong>Use:</strong> After several races, before entering new races</li>\n</ul>\n<h4>2. Basic Repair üîß</h4>\n<ul>\n<li><strong>Cost:</strong> 0.05 ICP + 0.0001 ICP fee</li>\n<li><strong>Effect:</strong> Restores +10 Condition</li>\n<li><strong>Cooldown:</strong> 3 hours</li>\n<li><strong>Use:</strong> Maintain race readiness between events</li>\n</ul>\n<h3>Decay Mechanics</h3>\n<p><strong>Automated hourly decay (affects ALL initialized bots):</strong></p>\n<ul>\n<li>Condition decreases by <strong>~0.21 per hour</strong> (~5 per day)\n<ul>\n<li>Happens constantly, whether you race or not</li>\n<li>Drives maintenance economy</li>\n</ul>\n</li>\n<li>Battery decreases by <strong>-10 per race</strong> (not affected by decay timer)</li>\n<li>Calibration decreases by <strong>~0.125 per hour</strong> (~3 per day)</li>\n<li><strong>Below 50 Condition:</strong> -10% to all race performance</li>\n<li><strong>Below 25 Condition:</strong> Cannot enter races (critical malfunction)</li>\n</ul>\n<p><strong>Faction decay modifiers:</strong></p>\n<ul>\n<li>Ultra-Rare: 40% slower decay (UltimateMaster, Golden, Ultimate)</li>\n<li>Wild: 30% faster decay (chaotic systems)</li>\n<li>Super-Rare: 20% slower decay (Blackhole, Dead, Master)</li>\n<li>Rare/Common: Standard decay rate</li>\n</ul>\n<p>‚ö†Ô∏è <strong>Keep your bot healthy!</strong> Decay runs every hour. Regular maintenance prevents performance degradation.</p>\n<hr>\n<h2>Garage Management</h2>\n<h3>Garage Subaccount System</h3>\n<p>Each user has a <strong>personal garage subaccount</strong> that stores their PokedBots:</p>\n<ul>\n<li><strong>Subaccount ID:</strong> \"GARG\" + principal bytes (32 bytes total)</li>\n<li><strong>Ownership:</strong> NFTs stored in garage are owned by your principal</li>\n<li><strong>Verification:</strong> System checks <code>bearer(tokenId)</code> before every operation</li>\n<li><strong>Trading:</strong> NFTs remain tradeable on EXT marketplaces</li>\n</ul>\n<p><strong>Tools:</strong></p>\n<ul>\n<li><code>garage_list_my_pokedbots</code> - View all your bots with stats</li>\n<li><code>garage_get_robot_details</code> - Deep dive on specific bot</li>\n<li><code>garage_initialize_pokedbot</code> - Register bot for racing</li>\n<li><code>garage_recharge_robot</code> - Restore condition &#x26; battery</li>\n<li><code>garage_repair_robot</code> - Fix damage</li>\n<li><code>garage_upgrade_robot</code> - Start upgrade session</li>\n</ul>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/ARCHITECTURE\">‚Üê Architecture</a> | ‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System ‚Üí</a></p>\n<p><strong>See also:</strong></p>\n<ul>\n<li>üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System</a> - Enter races, win prizes</li>\n<li>üõí <a href=\"/docs/MARKETPLACE\">Marketplace</a> - Buy and trade bots</li>\n<li>üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools</a> - Complete API reference</li>\n</ul>\n"
    },
    {
      "slug": "COMPREHENSIVE_STATS",
      "metadata": {
        "title": "Bot Stats Explained",
        "description": "Understanding your PokedBot's racing statistics and performance",
        "order": 4
      },
      "content": "<h1>Understanding Bot Stats</h1>\n<h2>The Four Core Stats</h2>\n<p>Every PokedBot has four primary stats that determine its racing performance:</p>\n<h3>üèéÔ∏è Speed (0-100)</h3>\n<p><strong>What it does</strong>: Determines your bot's top speed on straightaways</p>\n<p><strong>Influenced by:</strong></p>\n<ul>\n<li><strong>Legs</strong> (40%): Primary locomotion - rocket legs, power legs, super legs</li>\n<li><strong>Wings</strong> (30%): Jets, rockets, engines for thrust</li>\n<li><strong>Body</strong> (20%): Lighter bodies = faster (heavy builds slow you down)</li>\n<li><strong>Arms</strong> (10%): Rocket arms add thrust</li>\n</ul>\n<p><strong>Best for</strong>: Short sprints and final stretches</p>\n<h3>‚ö° Power Core (0-100)</h3>\n<p><strong>What it does</strong>: Determines endurance and performance over longer distances</p>\n<p><strong>Influenced by:</strong></p>\n<ul>\n<li><strong>Body</strong> (50%): Larger chassis = bigger power capacity</li>\n<li><strong>Arms</strong> (25%): Power arms and weapons draw significant energy</li>\n<li><strong>Legs</strong> (15%): Power legs need consistent energy</li>\n<li><strong>Wings</strong> (10%): Engines consume power</li>\n</ul>\n<p><strong>Best for</strong>: Long-distance races (15km+)</p>\n<h3>üèÉ Acceleration (0-100)</h3>\n<p><strong>What it does</strong>: How quickly your bot reaches top speed from a standstill</p>\n<p><strong>Influenced by:</strong></p>\n<ul>\n<li><strong>Legs</strong> (50%): Quick response, agility, burst speed</li>\n<li><strong>Arms</strong> (20%): Initial thrust and push-off power</li>\n<li><strong>Wings</strong> (20%): Jets for quick bursts</li>\n<li><strong>Body</strong> (10%, inverse): Heavy bodies accelerate slower</li>\n</ul>\n<p><strong>Best for</strong>: Tight races with lots of position changes</p>\n<h3>üéØ Stability (0-100)</h3>\n<p><strong>What it does</strong>: Consistency on rough terrain and resistance to hazards</p>\n<p><strong>Influenced by:</strong></p>\n<ul>\n<li><strong>Driver Guy</strong> (50%): Pilot skill and control</li>\n<li><strong>Body</strong> (25%): Lower center of gravity = more stable</li>\n<li><strong>Legs</strong> (15%): Strong legs handle bumps better</li>\n<li><strong>Wings</strong> (10%): Large wings help balance</li>\n</ul>\n<p><strong>Best for</strong>: Scrap Heap terrain, avoiding crashes</p>\n<h2>Faction System (Type-Based)</h2>\n<p>Your bot's Type determines its faction and provides unique stat bonuses. There are 14 distinct factions based on rarity:</p>\n<h3>üíé Ultra-Rare Tier (1-45 bots)</h3>\n<p>The elite tier - incredibly rare and powerful:</p>\n<ul>\n<li><strong>Ultimate-master</strong> (1 bot): +6 to all stats - THE ULTIMATE bot</li>\n<li><strong>Wild</strong> (5 bots): +8 Acceleration, +7 Speed, +5 others - Unpredictable chaos</li>\n<li><strong>Golden</strong> (27 bots): +5 Power Core, +4 Stability, +3 others - Premium engineering (also has gold trait bonuses!)</li>\n<li><strong>Ultimate</strong> (45 bots): +5 Speed/Power Core, +3 others - Combat excellence</li>\n</ul>\n<h3>‚≠ê Super-Rare Tier (244-640 bots)</h3>\n<p>Powerful bots with significant advantages:</p>\n<ul>\n<li><strong>Blackhole</strong> (244 bots): +18 Power Core, +16 Acceleration, +13 others - Gravity-defying power</li>\n<li><strong>Dead</strong> (382 bots): +13 Stability, +12 Power Core, +9 others - Undead resilience</li>\n<li><strong>Master</strong> (640 bots): +14 Speed/Stability, +11 others - Skilled operators</li>\n</ul>\n<h3>üî∑ Rare Tier (717-999 bots)</h3>\n<p>Solid performers with meaningful bonuses:</p>\n<ul>\n<li><strong>Bee</strong> (717 bots): +10 Acceleration, +8 Speed, +6 others - Agile flyers</li>\n<li><strong>Food</strong> (778 bots): +11 Power Core, +10 Acceleration, +8 others - Energy-rich cores</li>\n<li><strong>Box</strong> (798 bots): +7 Stability, +5 Power Core, +3 others - Stable platforms</li>\n<li><strong>Murder</strong> (999 bots): +8 Speed/Power Core, +5 others - Aggressive power</li>\n</ul>\n<h3>üì¶ Common Tier (1654-2009 bots)</h3>\n<p>Entry-level bots - most accessible:</p>\n<ul>\n<li><strong>Game</strong> (1654 bots): +3 Acceleration/Stability, +1 others - Precision controls</li>\n<li><strong>Animal</strong> (1701 bots): +3 Acceleration, +2 Speed, +1 others - Natural agility</li>\n<li><strong>Industrial</strong> (2009 bots): +0 to all stats - Pure base stats, most common</li>\n</ul>\n<p><strong>Balance Philosophy:</strong></p>\n<ul>\n<li>Base stats: 0-70 per stat (0-280 total)</li>\n<li>Faction bonuses add 0-18 points per stat</li>\n<li>Maximum per stat: 100 (hard cap)</li>\n<li>Maximum total after upgrades: 400</li>\n<li>~140 points of upgrade headroom for progression</li>\n</ul>\n<p><strong>Competitive Balance:</strong></p>\n<ul>\n<li>Ultra-Rares win ~85-90% vs Super-Rare (elite but not invincible)</li>\n<li>Super-Rares win ~65-75% vs Rare (clear advantage)</li>\n<li>Rares win ~70-75% vs Common (meaningful progression)</li>\n<li>Overall ~20-25% upset rate keeps racing exciting!</li>\n</ul>\n<h2>Rarity Attributes</h2>\n<p>Special visual attributes provide additional stat bonuses on top of faction bonuses:</p>\n<ul>\n<li><strong>GOLD</strong>: Significant boost to golden traits (gold eyes, spiky gold, gold arms, etc.)\n<ul>\n<li>Golden body traits: +8-12 points to Power Core contribution</li>\n<li>Golden arms: +10-14 points to Acceleration/Speed contribution</li>\n<li>Golden legs: +9-13 points to Speed/Acceleration contribution</li>\n<li>Golden wings: +9-13 points to Speed contribution</li>\n<li>Golden driver: +9-13 points to Stability contribution</li>\n</ul>\n</li>\n<li><strong>BLACK</strong>: Moderate boost to all stats</li>\n<li><strong>BLUE</strong>: Small boost to all stats</li>\n<li><strong>PINK</strong>: Minor boost to all stats</li>\n<li><strong>RUST</strong>: Slight penalty to stats (battle-worn aesthetic)</li>\n</ul>\n<p><strong>Why Golden Bots Punch Above Their Weight:</strong>\nGolden (27 bots) is rarer than Ultimate (45 bots), but Golden bots often have weaker base trait combinations. To compensate, individual golden traits (gold eyes, spiky gold, etc.) receive significant boosts in the stat calculation, making Golden bots competitive despite fewer in existence.</p>\n<h2>Overall Rating</h2>\n<p>Your bot's Overall Rating is calculated as:</p>\n<pre><code>(Speed + Power Core + Acceleration + Stability) / 4\n</code></pre>\n<p><strong>Rating ranges:</strong></p>\n<ul>\n<li>150-200: Ultra-Rare tier (top 1% - truly elite)</li>\n<li>110-130: Super-Rare tier (top 15% - very competitive)</li>\n<li>90-110: Rare tier (middle 30% - solid performers)</li>\n<li>75-90: Common tier (bottom 55% - entry level)</li>\n<li>Below 75: Weak rolls or damaged bots needing upgrades</li>\n</ul>\n<p><strong>Power Distribution:</strong></p>\n<ul>\n<li>Ultra-Rare average: ~175 overall (their own league)</li>\n<li>Super-Rare average: ~120 overall (clear advantage over Rare)</li>\n<li>Rare average: ~100 overall (competitive with upgrades)</li>\n<li>Common average: ~85 overall (baseline, lots of upgrade potential)</li>\n</ul>\n<h2>How Stats Affect Racing</h2>\n<h3>Short Sprints (5-10km)</h3>\n<ul>\n<li><strong>Most Important</strong>: Speed, Acceleration</li>\n<li><strong>Less Important</strong>: Power Core</li>\n<li><strong>Key Traits</strong>: Rocket legs, jet wings, light body</li>\n</ul>\n<h3>Medium Races (10-20km)</h3>\n<ul>\n<li><strong>Balanced</strong> importance across all stats</li>\n<li><strong>Key Factor</strong>: Avoiding crashes (Stability)</li>\n</ul>\n<h3>Long Treks (20-30km)</h3>\n<ul>\n<li><strong>Most Important</strong>: Power Core, Stability</li>\n<li><strong>Less Important</strong>: Acceleration</li>\n<li><strong>Key Traits</strong>: Large body, strong legs, experienced driver</li>\n</ul>\n<h3>Terrain Effects</h3>\n<p><strong>Scrap Heaps</strong> (garbage towers):</p>\n<ul>\n<li>Stability most important</li>\n<li>Many obstacles and hazards</li>\n</ul>\n<p><strong>Wasteland Sand</strong> (desert):</p>\n<ul>\n<li>Speed and Power Core important</li>\n<li>Medium difficulty terrain</li>\n</ul>\n<p><strong>Metal Roads</strong> (ancient highways):</p>\n<ul>\n<li>Pure speed race</li>\n<li>Fastest bots excel here</li>\n</ul>\n<h2>Improving Your Stats</h2>\n<h3>Permanent Upgrades</h3>\n<p>Use the upgrade system to permanently boost stats:</p>\n<ul>\n<li><strong>Velocity Module</strong>: +1-3 Speed (10-60 ICP progressive cost, 12 hours)</li>\n<li><strong>PowerCore Enhancement</strong>: +1-3 Power Core (10-60 ICP progressive cost, 12 hours)</li>\n<li><strong>Thruster Calibration</strong>: +1-3 Acceleration (10-60 ICP progressive cost, 12 hours)</li>\n<li><strong>Gyro Stabilization</strong>: +1-3 Stability (10-60 ICP progressive cost, 12 hours)</li>\n</ul>\n<p><strong>Progressive Costs (per stat):</strong></p>\n<ul>\n<li>1st upgrade: 3 parts √ó 3.33 ICP = <strong>10 ICP</strong></li>\n<li>2nd upgrade: 5 parts √ó 3.33 ICP = <strong>17 ICP</strong></li>\n<li>3rd upgrade: 8 parts √ó 3.33 ICP = <strong>27 ICP</strong></li>\n<li>4th upgrade: 12 parts √ó 3.33 ICP = <strong>40 ICP</strong></li>\n<li>5th upgrade: 18 parts √ó 3.33 ICP = <strong>60 ICP</strong></li>\n</ul>\n<p><strong>Diminishing Returns:</strong></p>\n<ul>\n<li>Each successive upgrade to the same stat grants smaller gains</li>\n<li>First upgrades: +1 to +3 points</li>\n<li>Later upgrades: +0 to +1 points (heavily diminished)</li>\n<li><strong>Strategy</strong>: Spread early upgrades across multiple stats for best value</li>\n</ul>\n<p>Upgrades are permanent and stack over time!</p>\n<h3>Temporary Boosts</h3>\n<ul>\n<li><strong>High Condition</strong>: Bots with condition ‚â• 90 perform at peak</li>\n<li><strong>Full Battery</strong>: Battery ‚â• 80 ensures no power loss mid-race</li>\n<li><strong>Terrain Match</strong>: Racing on your preferred terrain gives slight edge</li>\n</ul>\n<h2>Finding the Right Bot</h2>\n<h3>For Speed Demons</h3>\n<p>Look for: Rocket legs, jet wings, light body (eggs, bubbles)\n<strong>Best Factions</strong>: Wild, Ultimate, Bee</p>\n<h3>For Endurance Racers</h3>\n<p>Look for: Large body, power cores, strong legs\n<strong>Best Factions</strong>: Blackhole, Golden, Food</p>\n<h3>For All-Rounders</h3>\n<p>Look for: Balanced traits, GOLD attribute\n<strong>Best Factions</strong>: Ultimate-master, Dead, Master</p>\n<h3>Best Value Picks</h3>\n<ul>\n<li>Common bots with GOLD traits (cheap but gold boosts make them competitive)</li>\n<li>Box bots with high stability (undervalued, great for Scrap Heap races)</li>\n<li>Food bots (solid Rare tier, good power/accel balance)</li>\n<li>Any bot with 100+ overall rating under 15 ICP</li>\n</ul>\n<h3>Investment Strategy</h3>\n<ul>\n<li>Ultra-Rares: Expensive but dominant (85%+ win rate vs lower tiers)</li>\n<li>Super-Rares: Best value - strong performance, reasonable prices</li>\n<li>Rares: Budget competitive - can upset Super-Rares ~25% of the time with good rolls</li>\n<li>Commons: Entry level - upgrade potential makes them viable long-term</li>\n</ul>\n<h2>Pro Tips</h2>\n<ol>\n<li><strong>Check the full build</strong> - One great trait doesn't make a champion</li>\n<li><strong>Rarity matters</strong> - Ultra-Rare faction bonuses are substantial</li>\n<li><strong>Golden traits are special</strong> - Individual gold parts get significant boosts</li>\n<li><strong>Upgrade strategically</strong> - Focus on complementing your bot's faction strengths</li>\n<li><strong>Match to race type</strong> - Speed bot for sprints, Power bot for treks</li>\n<li><strong>Condition is key</strong> - A well-maintained Common bot can beat a neglected Rare</li>\n<li><strong>Upsets happen</strong> - ~20-25% upset rate means underdogs can win</li>\n<li><strong>Type matters more than you think</strong> - 14 distinct faction identities create diverse strategies</li>\n</ol>\n<p><strong>Wings keywords (20% weight):</strong></p>\n<ul>\n<li>HIGH (55-70): <code>rocket</code>, <code>massive engines</code>, <code>power cells sparks</code>, <code>triangle up</code> (quick)</li>\n<li>MEDIUM (40-55): <code>butterfly</code>, <code>angel wings</code>, <code>8 bit</code>, <code>bear ears</code></li>\n<li>LOW (30-45): <code>blank</code>, <code>decal</code>, <code>burnt</code>, <code>lolly pops</code>, <code>straws</code></li>\n</ul>\n<p><strong>Body keywords (10% weight, INVERSE):</strong></p>\n<ul>\n<li>LIGHT/AGILE (60-75): <code>egg</code>, <code>bubble</code>, <code>balloon</code>, <code>mini</code>, <code>small</code></li>\n<li>MEDIUM (45-60): <code>game boy</code>, <code>ipod</code>, <code>bee body</code>, <code>frog</code></li>\n<li>HEAVY/SLOW (30-45): <code>mega controller</code>, <code>tower</code>, <code>beast</code>, <code>massive</code></li>\n</ul>\n<hr>\n<h3>üéØ STABILITY = Driver Guy (40%) + Body (30%) + Legs (20%) + Arms (10%)</h3>\n<p><strong>Why:</strong></p>\n<ul>\n<li><strong>Driver Guy (40%)</strong> - Skill! Goggles, helmets, focused eyes vs dead eyes</li>\n<li><strong>Body (30%)</strong> - Low center of gravity, wide stance = stable</li>\n<li><strong>Legs (20%)</strong> - Strong/wide stance vs wobbly legs</li>\n<li><strong>Arms (10%)</strong> - Balance assistance</li>\n</ul>\n<p><strong>Driver Guy keywords (40% weight):</strong></p>\n<ul>\n<li>HIGH (60-80): <code>metal goggles</code>, <code>helmet</code>, <code>visor</code>, <code>ultimate</code>, <code>master gold</code>, <code>focused</code>, <code>diamond eyes</code></li>\n<li>MEDIUM-HIGH (50-65): <code>headphones</code>, <code>game boy</code>, <code>pixels</code>, <code>snes guy</code>, <code>gamers</code></li>\n<li>MEDIUM (40-55): <code>blue</code>, <code>green</code>, <code>yellow</code>, <code>purple</code>, <code>tounge</code>, <code>rabbit</code></li>\n<li>LOW (30-45): <code>dead eyes</code>, <code>eyes closed</code>, <code>big eyes</code> (unfocused), <code>N64 glitch</code></li>\n</ul>\n<p><strong>Body keywords (30% weight):</strong></p>\n<ul>\n<li>HIGH (60-75): <code>battle box</code>, <code>command box</code>, <code>mega controller</code> (wide/stable), <code>beast</code>, <code>iron</code></li>\n<li>MEDIUM (45-60): <code>egg</code>, <code>round head</code>, <code>frog</code>, <code>rabbit</code></li>\n<li>LOW (30-45): <code>balloon</code>, <code>bubble</code>, <code>tall tower</code>, <code>spiky egg</code> (wobbly), <code>one tooth</code> (unbalanced)</li>\n</ul>\n<p><strong>Legs keywords (20% weight):</strong></p>\n<ul>\n<li>HIGH (55-70): <code>strong</code>, <code>power</code>, <code>chunky</code>, <code>industrial</code>, <code>ultimate</code>, <code>bird claw</code> (grip)</li>\n<li>MEDIUM (40-55): <code>midi</code>, <code>8 bit</code>, <code>cables</code>, <code>bendy</code></li>\n<li>LOW (30-45): <code>small</code>, <code>balloon</code>, <code>inflatable</code>, <code>burnt</code>, <code>slender stalks</code> (unstable)</li>\n</ul>\n<p><strong>Arms keywords (10% weight):</strong></p>\n<ul>\n<li>HIGH (50-65): <code>power arms</code>, <code>strong</code>, <code>grippers</code>, <code>claws</code> (grip)</li>\n<li>MEDIUM (40-55): <code>8 bit</code>, <code>connector</code>, <code>hands up</code> (balanced)</li>\n<li>LOW (30-45): <code>hands down</code>, <code>lazers off</code>, <code>burnt</code>, <code>bone</code></li>\n</ul>\n<hr>\n<h2>Implementation Strategy</h2>\n<p>For each stat, calculate a <strong>weighted average</strong> of contributions:</p>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// Example for Speed</span>\n<span class=\"token keyword\">let</span> legsSpeed <span class=\"token operator\">=</span> <span class=\"token function\">categorizeLegs</span><span class=\"token punctuation\">(</span>legs<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.40</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 40% weight</span>\n<span class=\"token keyword\">let</span> wingsSpeed <span class=\"token operator\">=</span> <span class=\"token function\">categorizeWings</span><span class=\"token punctuation\">(</span>wings<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.30</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 30% weight</span>\n<span class=\"token keyword\">let</span> bodySpeed <span class=\"token operator\">=</span> <span class=\"token function\">categorizeBodyForSpeed</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.20</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 20% weight (inverse for weight)</span>\n<span class=\"token keyword\">let</span> armsSpeed <span class=\"token operator\">=</span> <span class=\"token function\">categorizeArms</span><span class=\"token punctuation\">(</span>arms<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.10</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 10% weight</span>\n\n<span class=\"token keyword\">let</span> rawSpeed <span class=\"token operator\">=</span> legsSpeed <span class=\"token operator\">+</span> wingsSpeed <span class=\"token operator\">+</span> bodySpeed <span class=\"token operator\">+</span> armsSpeed<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> finalSpeed <span class=\"token operator\">=</span> Nat<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> Nat<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> Int<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>Float<span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span>rawSpeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>Each categorize function returns a value in a specific range (e.g., 30-75) based on keywords.</p>\n<hr>\n<h2>Benefits</h2>\n<p>‚úÖ <strong>Physically realistic</strong> - Stats derived from multiple relevant traits\n‚úÖ <strong>Maintains variety</strong> - Each component adds variation\n‚úÖ <strong>Thematic consistency</strong> - \"rocket legs + massive engines + light egg body\" = VERY FAST\n‚úÖ <strong>Strategic depth</strong> - Bots excel in different ways based on trait combinations\n‚úÖ <strong>Covers edge cases</strong> - Even rare combinations make sense\n‚úÖ <strong>Similar to real racing</strong> - Formula 1 cars are fast due to engine + aerodynamics + weight + tires</p>\n<hr>\n<h2>Example Bot Comparison</h2>\n<h3>Bot A: Speed Demon</h3>\n<ul>\n<li>Legs: <code>midi super fast mixed</code> ‚Üí 70 * 0.40 = 28</li>\n<li>Wings: <code>massive engines black</code> ‚Üí 70 * 0.30 = 21</li>\n<li>Body: <code>bubble egg gold</code> (light) ‚Üí 70 * 0.20 = 14</li>\n<li>Arms: <code>rocket up rings</code> ‚Üí 70 * 0.10 = 7</li>\n<li><strong>Total Speed: ~70</strong> üöÄ</li>\n</ul>\n<h3>Bot B: Tank</h3>\n<ul>\n<li>Legs: <code>small burnt</code> ‚Üí 35 * 0.40 = 14</li>\n<li>Wings: <code>blank</code> ‚Üí 30 * 0.30 = 9</li>\n<li>Body: <code>mega controller mixed</code> (heavy) ‚Üí 35 * 0.20 = 7</li>\n<li>Arms: <code>hands down large mixed</code> ‚Üí 35 * 0.10 = 3.5</li>\n<li><strong>Total Speed: ~33</strong> üêå</li>\n</ul>\n<p>This creates meaningful differentiation based on the actual visual traits!</p>\n"
    },
    {
      "slug": "UPGRADE_SYSTEM",
      "metadata": {
        "title": "Upgrade System",
        "description": "Scrapyard, parts economy, and progressive upgrades",
        "order": 4
      },
      "content": "<h1>PokedBots Racing - Upgrade System</h1>\n<p><strong>Turn Scrap into Power</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/GARAGE_SYSTEM\">‚Üê Garage System</a> | üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System ‚Üí</a></p>\n<hr>\n<h2>How Upgrades Work</h2>\n<p>Upgrading improves robot stats over time through a <strong>progressive cost system</strong> where each successive upgrade to the same stat becomes more expensive.</p>\n<p><strong>Current System:</strong></p>\n<ul>\n<li>Pay ICP directly when initiating an upgrade</li>\n<li>Costs scale: 10 ICP ‚Üí 17 ICP ‚Üí 27 ICP ‚Üí 40 ICP ‚Üí 60 ICP per upgrade</li>\n<li>Parts purchased automatically (3.33 ICP per part)</li>\n<li>12-hour installation time</li>\n</ul>\n<p><strong>Future Enhancement (Planned):</strong></p>\n<ul>\n<li>Scrapyard system to reduce costs by scrapping NFTs for parts</li>\n<li>Potential 30-50% savings for skilled scrappers</li>\n</ul>\n<hr>\n<h2>Material Types</h2>\n<ul>\n<li><strong>Speed Chip</strong> ‚Üí Velocity upgrades (Speed stat)</li>\n<li><strong>Power Core Fragment</strong> ‚Üí Power Core upgrades</li>\n<li><strong>Thruster Kit</strong> ‚Üí Thruster upgrades (Acceleration stat)</li>\n<li><strong>Gyro Module</strong> ‚Üí Gyro upgrades (Stability stat)</li>\n<li><strong>Universal Part</strong> ‚Üí Any upgrade type (flexible)</li>\n</ul>\n<hr>\n<h2>Obtaining Materials</h2>\n<h3>Method 1: Direct ICP Purchase</h3>\n<p><em>Current Implementation</em></p>\n<pre><code>3.33 ICP ‚Üí 1 Part (any upgrade type)\n</code></pre>\n<ul>\n<li>‚úÖ Instant purchase when initiating upgrade</li>\n<li>‚úÖ No inventory management needed</li>\n<li>‚úÖ Simple and predictable</li>\n<li>‚úÖ Progressive costs: 10 ICP ‚Üí 17 ICP ‚Üí 27 ICP ‚Üí 40 ICP ‚Üí 60 ICP per upgrade</li>\n</ul>\n<h3>Method 2: EXT Scrapyard System</h3>\n<p><em>Planned Feature</em></p>\n<p>The scrapyard functions as a <strong>universal EXT NFT buyer</strong> - browse any EXT collection's marketplace, purchase NFTs, and scrap them for parts.</p>\n<p><strong>Scrapyard Architecture:</strong></p>\n<ol>\n<li>\n<p><strong>Multi-Collection Browser</strong>: <code>scrapyard_browse_collection(canister_id)</code></p>\n<ul>\n<li>Works like <code>marketplace_browse_pokedbots</code> but for ANY EXT canister</li>\n<li>Returns listings with metadata, price, rarity data</li>\n<li>Cached per collection (5-min TTL)</li>\n</ul>\n</li>\n<li>\n<p><strong>Smart Valuation System</strong>: Prevents self-dealing exploits</p>\n<ul>\n<li><strong>Purchase Price</strong>: What you actually paid for the NFT</li>\n<li><strong>Rarity Index</strong>: Preloaded rarity scores for popular collections (1-100 scale)</li>\n<li><strong>Floor Price</strong>: Calculated in real-time from live marketplace listings</li>\n<li><strong>Anti-Gaming Formula</strong>:\n<pre><code>scrap_value = min(\n  purchase_price * 0.5,  // Max 50% of purchase price\n  (rarity_index / 20) * floor_price,  // Rarity-adjusted floor\n  100 ICP  // Hard cap to prevent exploits\n)\n</code></pre>\n</li>\n<li>Takes minimum of all three to prevent manipulation</li>\n</ul>\n</li>\n<li>\n<p><strong>Scrap Purchase Flow</strong>: <code>scrapyard_purchase_and_scrap(canister_id, token_index)</code></p>\n<ul>\n<li>Same ICRC-2 approval-based purchase as PokedBots marketplace</li>\n<li>NFT transferred to scrapyard subaccount (locked forever)</li>\n<li>Purchase price recorded on-chain for valuation</li>\n<li>Parts credited based on smart valuation</li>\n<li>Transaction logged with all valuation inputs for transparency</li>\n</ul>\n</li>\n</ol>\n<p><strong>Part Conversion Examples:</strong></p>\n<pre><code>// High-value rare NFT\nICPunk #1234 (rarity 95, floor 100 ICP, purchase 120 ICP)\n‚Üí scrap_value = min(60, 475, 100) = 60 ICP worth\n‚Üí 60 ICP / 4 = 15 Universal Parts\n\n// Mid-tier NFT\nMotokoDayDrop #567 (rarity 50, floor 5 ICP, purchase 6 ICP)  \n‚Üí scrap_value = min(3, 12.5, 100) = 3 ICP worth\n‚Üí 3 ICP / 4 = ~1 Universal Part (rounded up)\n\n// Self-dealing attempt (BLOCKED)\nUnknown NFT (rarity 10, floor 0.1 ICP, purchase 1000 ICP from alt account)\n‚Üí scrap_value = min(500, 0.5, 100) = 0.5 ICP worth  \n‚Üí 0.5 ICP / 4 = 0 parts (minimum threshold)\n</code></pre>\n<p><strong>Collection Affinity</strong> (Optional Enhancement):\nSome collections have thematic bonuses:</p>\n<pre><code>ICPunks ‚Üí +20% Gyro Modules (stability/reliability theme)\nMotoko Bots ‚Üí +20% Power Cores (motoko = power theme)  \nIC Drip ‚Üí +20% Speed Chips (fashion = fast theme)\nDefault ‚Üí Universal Parts (no affinity)\n</code></pre>\n<h3>Method 3: Hybrid Discounts</h3>\n<p><em>Planned Feature</em></p>\n<pre><code>1 Speed Chip + 10 ICP ‚Üí Velocity Upgrade (50% discount)\n2 Speed Chips + 5 ICP ‚Üí Velocity Upgrade (75% discount)\n1 Universal Part ‚Üí 5 ICP discount on any upgrade\n</code></pre>\n<hr>\n<h2>Scrapyard MCP Tools</h2>\n<h3>1. <code>scrapyard_browse_collection</code> (Planned)</h3>\n<p>Browse any EXT collection's marketplace listings:</p>\n<pre class=\"language-json\"><code class=\"language-json\">Input<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"canister_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"oeee4-qaaaa-aaaak-qaaeq-cai\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"after\"</span><span class=\"token operator\">:</span> <span class=\"token number\">42</span>\n<span class=\"token punctuation\">}</span>\nOutput<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"collection_name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ICPunks\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"listings\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"100.00 ICP\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"rarity_score\"</span><span class=\"token operator\">:</span> <span class=\"token number\">95</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"estimated_parts\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~15 Universal Parts\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"scrap_value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"~60 ICP equivalent\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"seller\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"abc123...\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3>2. <code>scrapyard_purchase_and_scrap</code> (Planned)</h3>\n<p>Purchase an NFT from any EXT collection and scrap it for parts:</p>\n<pre class=\"language-json\"><code class=\"language-json\">Input<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"canister_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"oeee4-qaaaa-aaaak-qaaeq-cai\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1234</span>\n<span class=\"token punctuation\">}</span>\nOutput<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"success\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1234</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"collection\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ICPunks\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"purchase_price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"100.00 ICP\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"rarity_score\"</span><span class=\"token operator\">:</span> <span class=\"token number\">95</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"floor_price\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"100.00 ICP (calculated from live listings)\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scrap_value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"60.00 ICP\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"parts_received\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"15 Universal Parts\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ICPunk #1234 scrapped for parts\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"wasteland_lore\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Salvaged premium circuits from old-world punk tech\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3>3. <code>scrapyard_view_parts_inventory</code> (Planned)</h3>\n<p>View your current parts inventory:</p>\n<pre class=\"language-json\"><code class=\"language-json\">Output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"speedChips\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"powerCores\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"thrusterKits\"</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"gyroModules\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"universalParts\"</span><span class=\"token operator\">:</span> <span class=\"token number\">24</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"total_scrap_value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"347 ICP equivalent\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"nfts_scrapped\"</span><span class=\"token operator\">:</span> <span class=\"token number\">12</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<hr>\n<h2>Anti-Gaming Measures</h2>\n<p>The scrapyard uses multiple safeguards to prevent exploits:</p>\n<ol>\n<li><strong>Purchase Price Cap</strong>: Max 50% of purchase price counts</li>\n<li><strong>Rarity Floor Cross-Check</strong>: Can't exceed rarity-adjusted floor</li>\n<li><strong>Hard Cap</strong>: 100 ICP maximum scrap value per NFT</li>\n<li><strong>Transparency</strong>: All valuation inputs logged on-chain</li>\n<li><strong>Minimum Threshold</strong>: NFTs worth &#x3C;0.5 ICP get 0 parts</li>\n<li><strong>Known Collections Only</strong>: Unknown collections get base rate (1 universal part per 20 ICP purchase)</li>\n<li><strong>Floor Price Calculation</strong>: Real-time from live marketplace listings (no oracle needed)</li>\n</ol>\n<hr>\n<h2>Progressive Cost Curve</h2>\n<p>Each successive upgrade to the same stat costs more:</p>\n<pre><code>Upgrade #1:  3 parts √ó 3.33 ICP = 10 ICP  ‚Üí +1-3 to stat\nUpgrade #2:  5 parts √ó 3.33 ICP = 17 ICP  ‚Üí +1-2 to stat\nUpgrade #3:  8 parts √ó 3.33 ICP = 27 ICP  ‚Üí +1-2 to stat\nUpgrade #4: 12 parts √ó 3.33 ICP = 40 ICP  ‚Üí +0-1 to stat\nUpgrade #5: 18 parts √ó 3.33 ICP = 60 ICP  ‚Üí +0-1 to stat\nUpgrade #6: 25 parts √ó 3.33 ICP = 83 ICP  ‚Üí +0-1 to stat (diminishing returns)\nUpgrade #7+: Exponentially expensive, minimal gains\n</code></pre>\n<p><strong>Why Progressive Costs:</strong></p>\n<ul>\n<li>First upgrade affordable (10 ICP) for all players</li>\n<li>Competitive players can reach 3-4 upgrades (54-94 ICP total)</li>\n<li>Whales can push to 5-6 upgrades (154-237 ICP total per stat)</li>\n<li>Creates natural stat distribution without hard caps</li>\n</ul>\n<hr>\n<h2>Practical Stat Caps</h2>\n<p>Due to cost scaling and diminishing returns, realistic maximum gains:</p>\n<pre><code>Starting stat: 50\nAfter 3 upgrades: ~55-58 (+5-8 total)\nAfter 6 upgrades: ~60-65 (+10-15 total)\nAfter 10 upgrades: ~65-70 (+15-20 total, if you're insanely wealthy)\n\nTheoretical max: 100\nPractical max: ~75-80 (cost becomes prohibitive)\n</code></pre>\n<p><strong>Cost Examples:</strong></p>\n<p><em>Speed Upgrades for a 60 Speed Bot:</em></p>\n<pre><code>Upgrade 1: 3 parts √ó 3.33 = 10 ICP  ‚Üí 63 Speed (+3)\nUpgrade 2: 5 parts √ó 3.33 = 17 ICP  ‚Üí 65 Speed (+2)  \nUpgrade 3: 8 parts √ó 3.33 = 27 ICP  ‚Üí 67 Speed (+2)\nUpgrade 4: 12 parts √ó 3.33 = 40 ICP ‚Üí 68 Speed (+1)\nUpgrade 5: 18 parts √ó 3.33 = 60 ICP ‚Üí 69 Speed (+1)\n\nTotal to reach 69 Speed: 154 ICP (5 upgrades)\nNext upgrade would cost 83 ICP (25 parts) for maybe +0-1...\n</code></pre>\n<p><strong>Why This Works:</strong></p>\n<ul>\n<li>‚úÖ First upgrade affordable (10 ICP) for all players</li>\n<li>‚úÖ Budget racers can get 2-3 upgrades (27-54 ICP total)</li>\n<li>‚úÖ Competitive players reach 4-5 upgrades (94-154 ICP per stat)</li>\n<li>‚úÖ Whales can push to 6+ but costs skyrocket (237+ ICP per stat)</li>\n<li>‚úÖ Natural stat caps emerge from economic pressure</li>\n<li>‚úÖ Preserves value of naturally high-stat bots</li>\n<li>‚úÖ Makes faction bonuses more valuable (free permanent stats!)</li>\n</ul>\n<hr>\n<h2>Upgrade Process</h2>\n<ol>\n<li>\n<p><strong>Check Requirements</strong>:</p>\n<ul>\n<li>Bot has Battery ‚â• 30, Condition ‚â• 50</li>\n<li>User has enough parts (based on stat's upgrade count)</li>\n<li>Stat not already at cap (100)</li>\n</ul>\n</li>\n<li>\n<p><strong>Consume Materials</strong>: Parts deducted from inventory</p>\n</li>\n<li>\n<p><strong>Installation Time</strong>: 12 hours (upgrade in progress)</p>\n</li>\n<li>\n<p><strong>Completion</strong>:</p>\n<ul>\n<li>Stat gain applied (probabilistic, weighted by current stat)</li>\n<li>Battery depleted (-15)</li>\n<li>XP awarded (+5)</li>\n<li>Upgrade counter incremented for that stat</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2>Stat Gain Probability</h2>\n<p>Higher stats are harder to improve (diminishing returns):</p>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// Pseudocode for stat gain</span>\n<span class=\"token keyword\">let</span> currentStat <span class=\"token operator\">=</span> robot<span class=\"token punctuation\">.</span>speed<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> upgradeCount <span class=\"token operator\">=</span> robot<span class=\"token punctuation\">.</span>upgradeHistory<span class=\"token punctuation\">.</span>velocityUpgrades<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> baseGain <span class=\"token operator\">=</span> match upgradeCount <span class=\"token punctuation\">{</span>\n  <span class=\"token number\">0</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// First upgrade: +1 to +3</span>\n  <span class=\"token number\">1</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Second: +1 to +2</span>\n  <span class=\"token number\">2</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Third: +1 to +2</span>\n  _ <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Fourth+: +0 to +1</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Difficulty modifier based on current stat</span>\n<span class=\"token keyword\">let</span> difficulty <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentStat <span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">1.0</span> <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentStat <span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span> <span class=\"token number\">70</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0.8</span> <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentStat <span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0.6</span> <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>currentStat <span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0.4</span> <span class=\"token punctuation\">}</span>\n                <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0.2</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 90+ is very hard</span>\n\n<span class=\"token keyword\">let</span> actualGain <span class=\"token operator\">=</span> <span class=\"token function\">floor</span><span class=\"token punctuation\">(</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> baseGain<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> difficulty<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> newStat <span class=\"token operator\">=</span> <span class=\"token function\">min</span><span class=\"token punctuation\">(</span>currentStat <span class=\"token operator\">+</span> actualGain<span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>Faction Bonuses:</strong></p>\n<ul>\n<li><strong>UltimateMaster</strong> üëë: Difficulty multipliers reduced by 40% (easier to upgrade high stats)</li>\n<li><strong>Wild Bot</strong> ‚ö°: +10% random variance on stat gains (¬±1-2 instead of fixed)</li>\n</ul>\n<hr>\n<h2>Upgrade Constraints</h2>\n<ul>\n<li>Only one upgrade session active per robot (12-hour cooldown while upgrade processes)</li>\n<li>Stat gains use progressive cost curve (3‚Üí5‚Üí8‚Üí12‚Üí18‚Üí25 parts for successive upgrades to same stat)</li>\n<li>Upgrades can be started at any battery/condition level</li>\n</ul>\n<hr>\n<h2>Economic Balance</h2>\n<p><strong>Current System (Direct Purchase):</strong></p>\n<ul>\n<li>3.33 ICP per part, purchased automatically when upgrade initiated</li>\n<li>Progressive costs: 10 ‚Üí 17 ‚Üí 27 ‚Üí 40 ‚Üí 60 ICP</li>\n<li>Simple, instant, predictable</li>\n<li>No inventory management needed</li>\n</ul>\n<p><strong>Future Scrapyard Path (Planned):</strong></p>\n<ul>\n<li>Find undervalued NFTs on EXT marketplaces</li>\n<li>Scrap NFTs for parts to reduce upgrade costs</li>\n<li>Potential 30-50% savings for skilled scrappers</li>\n<li>Adds treasure hunt gameplay layer</li>\n</ul>\n<hr>\n<h2>Benefits of Current System</h2>\n<p><strong>For Players:</strong></p>\n<ul>\n<li>‚úÖ Simple direct purchase (no inventory management)</li>\n<li>‚úÖ Progressive costs create natural upgrade paths</li>\n<li>‚úÖ First upgrade affordable for all players (10 ICP)</li>\n<li>‚úÖ Diminishing returns prevent power creep</li>\n<li>‚úÖ Strategic choices (spread upgrades vs focus one stat)</li>\n</ul>\n<p><strong>For Platform:</strong></p>\n<ul>\n<li>‚úÖ Revenue stream for platform sustainability</li>\n<li>‚úÖ Deflationary pressure on ICP (12-hour upgrade burns)</li>\n<li>‚úÖ Economic incentive to maintain bots (must have battery/condition)</li>\n<li>‚úÖ Natural stat distribution (not everyone at 100)</li>\n<li>‚úÖ Preserves value of naturally high-stat bots</li>\n</ul>\n<p><strong>For Collections:</strong></p>\n<ul>\n<li>‚úÖ Dead projects get second life</li>\n<li>‚úÖ Holders can exit with dignity (get value, not dump)</li>\n<li>‚úÖ Floor price support from scrap demand</li>\n<li>‚úÖ Marketing exposure via scrapyard browser</li>\n</ul>\n<hr>\n<h2>Future Enhancements</h2>\n<p><strong>Parts Marketplace</strong> (Planned)</p>\n<ul>\n<li>Trade parts between players</li>\n<li>Price discovery for different part types</li>\n<li>Creates secondary economy</li>\n</ul>\n<p><strong>Prize NFT Rewards</strong> (Planned)</p>\n<ul>\n<li>Top racers can win scrapped NFTs as bonus prizes</li>\n<li>\"Salvage Rights\" - race winners get first pick from scrapyard</li>\n<li>Special rare NFT prizes for tournament champions</li>\n</ul>\n<p><strong>Achievements &#x26; Leaderboards</strong> (Planned)</p>\n<ul>\n<li>\"Wasteland Recycler\" badges for scrap volume</li>\n<li>\"Master Scrapper\" for highest value scrapped</li>\n<li>\"Collection Completionist\" for scrapping all from one collection</li>\n</ul>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/GARAGE_SYSTEM\">‚Üê Garage System</a> | üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System ‚Üí</a></p>\n<p><strong>See also:</strong></p>\n<ul>\n<li>üõí <a href=\"/docs/MARKETPLACE\">Marketplace</a> - Browse PokedBots</li>\n<li>üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools</a> - Complete API reference</li>\n<li>üèóÔ∏è <a href=\"/docs/ARCHITECTURE\">Architecture</a> - Technical design</li>\n</ul>\n"
    },
    {
      "slug": "CALENDAR_QUICKSTART",
      "metadata": {
        "title": "Racing Events",
        "description": "Scheduled races and competitive events in the wasteland",
        "order": 5
      },
      "content": "<h1>Racing Events</h1>\n<h2>Overview</h2>\n<p>PokedBots Racing features a structured calendar of competitive events. Races are scheduled regularly, allowing you to plan your racing strategy and compete for ICP prizes.</p>\n<h2>Event Types</h2>\n<h3>Weekly League Races</h3>\n<p>The premier competitive event for serious racers.</p>\n<ul>\n<li><strong>When</strong>: Every Sunday at 20:00 UTC</li>\n<li><strong>Entry Fee</strong>: 0.2 ICP</li>\n<li><strong>Prize Pool</strong>: Entry fees + 1 ICP platform bonus</li>\n<li><strong>Leaderboard Points</strong>: 2.0x multiplier (double points!)</li>\n<li><strong>Registration</strong>: Opens Friday, closes 30 minutes before race start</li>\n<li><strong>Max Entries</strong>: 50 bots</li>\n<li><strong>Eligible Divisions</strong>: All (Scavenger, Raider, Elite, SilentKlan)</li>\n</ul>\n<p><strong>Why enter?</strong> Higher entry fee means bigger prize pools, and the 2x leaderboard points make this crucial for season rankings.</p>\n<h3>Daily Sprint Races</h3>\n<p>Fast-paced races every 6 hours for quick competition.</p>\n<ul>\n<li><strong>When</strong>: Every 6 hours (00:00, 06:00, 12:00, 18:00 UTC)</li>\n<li><strong>Entry Fee</strong>: 0.05 ICP</li>\n<li><strong>Prize Pool</strong>: Entry fees only</li>\n<li><strong>Leaderboard Points</strong>: 1.0x (standard points)</li>\n<li><strong>Registration</strong>: Closes 15 minutes before race start</li>\n<li><strong>Max Entries</strong>: 12 bots</li>\n<li><strong>Eligible Divisions</strong>: Scavenger, Raider, Elite</li>\n</ul>\n<p><strong>Why enter?</strong> Lower risk, frequent opportunities, great for building experience and climbing division ranks.</p>\n<h2>How to Participate</h2>\n<h3>Finding Races</h3>\n<p>Use the <code>racing_list_races</code> MCP tool to browse upcoming events:</p>\n<pre><code>Tool: racing_list_races\nParameters:\n  - status: \"Upcoming\" (optional - filter by race status)\n  - terrain: Filter by terrain type (optional)\n  - race_class: Filter by division (optional)\n</code></pre>\n<p>The tool returns all scheduled races with:</p>\n<ul>\n<li>Race ID</li>\n<li>Start time</li>\n<li>Entry fee</li>\n<li>Prize pool</li>\n<li>Number of entries</li>\n<li>Registration deadline</li>\n</ul>\n<h3>Entering a Race</h3>\n<p>Once you find a race you want to enter, use the <code>racing_enter_race</code> tool:</p>\n<pre><code>Tool: racing_enter_race\nParameters:\n  - race_id: The ID of the race to enter\n  - token_index: Your bot's token index\n</code></pre>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>Bot must be initialized for racing</li>\n<li>Bot condition ‚â• 70</li>\n<li>Bot battery ‚â• 50</li>\n<li>Sufficient ICRC-2 allowance for entry fee</li>\n<li>Registration must be before deadline</li>\n</ul>\n<h3>Checking Results</h3>\n<p>After a race completes, prizes are automatically distributed to winners' wallets. Check the leaderboard to see updated rankings and your bot's performance statistics.</p>\n<h2>Leaderboard Points</h2>\n<p>Earn points based on your finishing position in each race:</p>\n<table>\n<thead>\n<tr>\n<th>Position</th>\n<th>Base Points</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ü•á 1st</td>\n<td>25</td>\n</tr>\n<tr>\n<td>ü•à 2nd</td>\n<td>18</td>\n</tr>\n<tr>\n<td>ü•â 3rd</td>\n<td>15</td>\n</tr>\n<tr>\n<td>4th</td>\n<td>12</td>\n</tr>\n<tr>\n<td>5th</td>\n<td>10</td>\n</tr>\n<tr>\n<td>6th</td>\n<td>8</td>\n</tr>\n<tr>\n<td>7th-8th</td>\n<td>6</td>\n</tr>\n<tr>\n<td>9th-10th</td>\n<td>4</td>\n</tr>\n<tr>\n<td>Participation</td>\n<td>2</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Event Multipliers:</strong></p>\n<ul>\n<li>üèÜ Weekly League: 2.0x points</li>\n<li>‚ö° Daily Sprints: 1.0x points</li>\n</ul>\n<p><strong>Example:</strong> Finishing 1st in a Weekly League race = 25 √ó 2.0 = <strong>50 points</strong>!</p>\n<h2>Leaderboard Types</h2>\n<h3>All-Time Leaderboard</h3>\n<p>Career statistics tracking every race you've ever competed in. This is your permanent racing legacy.</p>\n<h3>Season Leaderboard</h3>\n<p>Resets each season (typically 3 months). Compete for seasonal championships and bragging rights.</p>\n<h3>Monthly Leaderboard</h3>\n<p>Resets every month. Great for consistent racers to showcase their current form.</p>\n<h3>Faction Leaderboard</h3>\n<p>See how your bot ranks among others of the same faction (UltimateMaster, Wild, Golden, Ultimate, Blackhole, Dead, Master, Bee, Food, Box, Murder, Game, Animal, Industrial).</p>\n<h2>Your Racing Stats</h2>\n<p>Each bot tracks:</p>\n<ul>\n<li><strong>Total Points</strong>: Across all leaderboards</li>\n<li><strong>Wins</strong>: Number of 1st place finishes</li>\n<li><strong>Podiums</strong>: Top 3 finishes</li>\n<li><strong>Win Rate</strong>: Percentage of races won</li>\n<li><strong>Average Position</strong>: Your typical finish</li>\n<li><strong>Total Earnings</strong>: ICP won from racing</li>\n<li><strong>Current Streak</strong>: Consecutive wins (or losses)</li>\n<li><strong>Rank Trend</strong>: Are you climbing or falling?</li>\n</ul>\n<h2>Racing Strategy Tips</h2>\n<h3>Maximize Your Points</h3>\n<ol>\n<li><strong>Prioritize Weekly Leagues</strong>: The 2x multiplier makes these crucial for leaderboard climbing</li>\n<li><strong>Stay Active</strong>: Even participation points add up over time</li>\n<li><strong>Maintain Your Bot</strong>: Keep condition ‚â• 70 to enter races</li>\n<li><strong>Plan Ahead</strong>: Registration windows close early - don't miss out</li>\n<li><strong>Build Streaks</strong>: Consecutive wins boost your reputation</li>\n</ol>\n<h3>Division Progression</h3>\n<p>As you win races, you'll advance through divisions:</p>\n<ul>\n<li><strong>Scavenger</strong> (0-2 wins): Starting division</li>\n<li><strong>Raider</strong> (3-5 wins): Intermediate competition</li>\n<li><strong>Elite</strong> (6-9 wins): Advanced racers</li>\n<li><strong>SilentKlan</strong> (10+ wins): Top tier, highest stakes</li>\n</ul>\n<p>Higher divisions mean tougher competition but better rewards!</p>\n<h3>Prize Distribution</h3>\n<p>Prize pools are divided among top finishers:</p>\n<ul>\n<li>ü•á 1st place: 47.5% of pool</li>\n<li>ü•à 2nd place: 23.75%</li>\n<li>ü•â 3rd place: 14.25%</li>\n<li>4th place: 9.5%</li>\n<li>Platform fee: 5%</li>\n</ul>\n<h2>Coming Soon</h2>\n<ul>\n<li><strong>Monthly Championship Cups</strong>: Tournament brackets for top performers</li>\n<li><strong>Special Events</strong>: Themed races with unique mechanics and bonus prizes</li>\n<li><strong>Advanced Statistics</strong>: Detailed performance analytics</li>\n<li><strong>Faction Championships</strong>: Faction vs faction competitions</li>\n</ul>\n<p>Stay tuned for announcements!</p>\n"
    },
    {
      "slug": "RACING_SYSTEM",
      "metadata": {
        "title": "Racing System",
        "description": "Races, simulation engine, prizes, and leaderboards",
        "order": 5
      },
      "content": "<h1>PokedBots Racing - Racing System</h1>\n<p><strong>Compete in the Wastelands</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/UPGRADE_SYSTEM\">‚Üê Upgrade System</a> | üõí <a href=\"/docs/MARKETPLACE\">Marketplace ‚Üí</a></p>\n<hr>\n<h2>Race Structure</h2>\n<p>Races are scheduled events through the dangerous wastelands surrounding Delta City.</p>\n<h3>Race Properties</h3>\n<ul>\n<li><strong>Distance</strong>: 5km, 10km, 15km, 20km, 30km (through wasteland terrain)</li>\n<li><strong>Terrain</strong>: Scrap Heaps, Wasteland Sand, Metal Roads (ancient highways)</li>\n<li><strong>Class</strong>:\n<ul>\n<li>Scavenger Class (0-2 wins)</li>\n<li>Raider Class (3-5 wins)</li>\n<li>Elite Class (6+ wins)</li>\n<li>Silent Klan Invitational (10+ wins)</li>\n</ul>\n</li>\n<li><strong>Entry Fee</strong>: Class-based scaling:\n<ul>\n<li>Scavenger: 0.05-0.5 ICP (1x base)</li>\n<li>Raider: 0.1-1 ICP (2x base)</li>\n<li>Elite: 0.25-2.5 ICP (5x base)</li>\n<li>SilentKlan: 0.5-5 ICP (10x base)</li>\n</ul>\n</li>\n<li><strong>Prize Pool</strong>: Sum of all entry fees (minus 5% Silent Klan tax)</li>\n<li><strong>Max Entries</strong>: 8-12 robots</li>\n<li><strong>Start Time</strong>: Scheduled timestamp</li>\n<li><strong>Entry Deadline</strong>: 30 minutes before start</li>\n<li><strong>Race Route</strong>: Departs from Delta City train station into the garbage towers</li>\n</ul>\n<hr>\n<h2>Race Entry Requirements</h2>\n<p>To enter a race, your bot must meet:</p>\n<ul>\n<li>‚úÖ Robot Condition ‚â• 70</li>\n<li>‚úÖ Robot Battery ‚â• 50</li>\n<li>‚úÖ Sufficient ICRC-2 allowance for entry fee + 0.0001 ICP transfer fee</li>\n<li>‚úÖ Robot meets class requirements (win count)</li>\n<li>‚úÖ Race not full</li>\n<li>‚úÖ Before entry deadline</li>\n<li>‚úÖ Robot not in another race at same time</li>\n<li>‚úÖ Faction restrictions met (for certain races)</li>\n</ul>\n<p><strong>Special Races:</strong></p>\n<ul>\n<li><strong>Silent Klan Invitational</strong>: Only UltimateMaster, Golden, Ultimate, Blackhole, Dead, and Master factions (top-tier bots)</li>\n<li><strong>Faction Championships</strong>: Restricted to specific factions</li>\n</ul>\n<hr>\n<h2>Prize Distribution</h2>\n<p><strong>Parimutuel-style with Silent Klan tax:</strong></p>\n<ul>\n<li><strong>Silent Klan Tax</strong>: 5% (goes to canister treasury)</li>\n<li><strong>1st Place</strong>: 47.5% of prize pool</li>\n<li><strong>2nd Place</strong>: 23.75% of prize pool</li>\n<li><strong>3rd Place</strong>: 14.25% of prize pool</li>\n<li><strong>4th Place</strong>: 9.5% of prize pool</li>\n<li><strong>5th+ Place</strong>: 0%</li>\n</ul>\n<p><strong>Example:</strong></p>\n<pre><code>10 robots enter @ 50 ICP each = 500 ICP total\nSilent Klan tax: 25 ICP\nPrize pool: 475 ICP\n\n1st: 237.5 ICP\n2nd: 118.75 ICP\n3rd: 71.25 ICP\n4th: 47.5 ICP\n5th-10th: 0 ICP\n</code></pre>\n<hr>\n<h2>Race Simulation Engine</h2>\n<p>Races are simulated <strong>deterministically</strong> using multiple performance factors.</p>\n<h3>Simulation Logic</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// Simplified simulation logic</span>\n<span class=\"token keyword\">for</span> each robot <span class=\"token keyword\">in</span> race<span class=\"token punctuation\">:</span>\n  <span class=\"token comment\">// Calculate performance factors</span>\n  baseTime <span class=\"token operator\">=</span> raceDistance <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>robot<span class=\"token punctuation\">.</span>speed <span class=\"token operator\">*</span> <span class=\"token number\">0.8</span> <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n  \n  <span class=\"token comment\">// Apply power core effect (better power = less slowdown on long distances)</span>\n  distanceFactor <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>raceDistance <span class=\"token operator\">></span> robot<span class=\"token punctuation\">.</span>preferredDistance<span class=\"token punctuation\">)</span> \n    <span class=\"token function\">then</span> <span class=\"token punctuation\">(</span>robot<span class=\"token punctuation\">.</span>powerCore <span class=\"token operator\">/</span> <span class=\"token number\">100.0</span><span class=\"token punctuation\">)</span> \n    <span class=\"token keyword\">else</span> <span class=\"token number\">1.0</span>\n  \n  <span class=\"token comment\">// Apply battery/condition penalties</span>\n  batteryFactor <span class=\"token operator\">=</span> robot<span class=\"token punctuation\">.</span>battery <span class=\"token operator\">/</span> <span class=\"token number\">100.0</span>\n  conditionFactor <span class=\"token operator\">=</span> robot<span class=\"token punctuation\">.</span>condition <span class=\"token operator\">/</span> <span class=\"token number\">100.0</span>\n  \n  <span class=\"token comment\">// Apply terrain preference</span>\n  terrainFactor <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>race<span class=\"token punctuation\">.</span>terrain <span class=\"token operator\">==</span> robot<span class=\"token punctuation\">.</span>preferredTerrain<span class=\"token punctuation\">)</span> \n    then <span class=\"token number\">1.05</span> \n    <span class=\"token keyword\">else</span> <span class=\"token number\">0.95</span>\n  \n  <span class=\"token comment\">// Apply faction special abilities (14 Type-based bonuses)</span>\n  factionBonus <span class=\"token operator\">=</span> match robot<span class=\"token punctuation\">.</span>faction<span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">// ULTRA-RARE FACTIONS (1-45 bots)</span>\n    Ultimate<span class=\"token operator\">-</span>master <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1.12</span>  <span class=\"token comment\">// Supreme in all conditions</span>\n    Wild <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1.0</span> <span class=\"token operator\">+</span> <span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.20</span>  <span class=\"token comment\">// Chaotic variance (-10% to +10%)</span>\n    Golden <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>condition <span class=\"token operator\">>=</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span> then <span class=\"token number\">1.15</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.05</span>  <span class=\"token comment\">// Pristine bonus</span>\n    Ultimate <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1.10</span>  <span class=\"token comment\">// Consistent excellence</span>\n    \n    <span class=\"token comment\">// SUPER-RARE FACTIONS (244-640 bots)</span>\n    Blackhole <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>terrain <span class=\"token operator\">==</span> MetalRoads<span class=\"token punctuation\">)</span> then <span class=\"token number\">1.12</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.03</span>  <span class=\"token comment\">// Highway specialists</span>\n    Dead <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>distance <span class=\"token operator\">>=</span> <span class=\"token number\">20</span>km<span class=\"token punctuation\">)</span> then <span class=\"token number\">1.10</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.02</span>  <span class=\"token comment\">// Endurance machines</span>\n    Master <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>raceClass <span class=\"token operator\">==</span> Elite <span class=\"token operator\">||</span> raceClass <span class=\"token operator\">==</span> SilentKlan<span class=\"token punctuation\">)</span> then <span class=\"token number\">1.14</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.04</span>  <span class=\"token comment\">// Elite dominance</span>\n    \n    <span class=\"token comment\">// RARE FACTIONS (717-999 bots)</span>\n    Bee <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>stability <span class=\"token operator\">>=</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span> then <span class=\"token number\">1.08</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.02</span>  <span class=\"token comment\">// Precision flyers</span>\n    Food <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>battery <span class=\"token operator\">>=</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span> then <span class=\"token number\">1.09</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.03</span>  <span class=\"token comment\">// Energy efficient</span>\n    Box <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>terrain <span class=\"token operator\">==</span> ScrapHeaps<span class=\"token punctuation\">)</span> then <span class=\"token number\">1.10</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.02</span>  <span class=\"token comment\">// Garbage crushers</span>\n    Murder <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1.06</span>  <span class=\"token comment\">// Reliable aggression</span>\n    \n    <span class=\"token comment\">// COMMON FACTIONS (1654-2009 bots)</span>\n    Game <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>terrain <span class=\"token operator\">==</span> WastelandSand<span class=\"token punctuation\">)</span> then <span class=\"token number\">1.05</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.0</span>  <span class=\"token comment\">// Sand specialists</span>\n    Animal <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1.02</span>  <span class=\"token comment\">// Natural adaptability</span>\n    Industrial <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token number\">1.0</span>  <span class=\"token comment\">// No special bonus</span>\n  \n  <span class=\"token comment\">// Random variance based on stability (lower stability = higher variance)</span>\n  variance <span class=\"token operator\">=</span> <span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">100</span> <span class=\"token operator\">-</span> robot<span class=\"token punctuation\">.</span>stability<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">100.0</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.15</span>\n  \n  <span class=\"token comment\">// Weather hazards in wasteland (solar flares, dust storms)</span>\n  hazardFactor <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">randomSolarFlare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> then <span class=\"token number\">0.9</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1.0</span>\n  \n  <span class=\"token comment\">// Final time calculation</span>\n  finalTime <span class=\"token operator\">=</span> baseTime <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>distanceFactor <span class=\"token operator\">*</span> batteryFactor <span class=\"token operator\">*</span> conditionFactor <span class=\"token operator\">*</span> \n                          terrainFactor <span class=\"token operator\">*</span> factionBonus <span class=\"token operator\">*</span> hazardFactor<span class=\"token punctuation\">)</span> \n              <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span> <span class=\"token operator\">+</span> variance<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Sort by finalTime, assign positions, distribute prizes</span>\n</code></pre>\n<h3>Simulation Features</h3>\n<ul>\n<li>‚úÖ Uses race ID + start time + block hash as random seed</li>\n<li>‚úÖ <strong>Deterministic</strong> (same inputs = same outputs)</li>\n<li>‚úÖ Considers all robot stats, faction bonuses, and conditions</li>\n<li>‚úÖ Creates realistic variance with wasteland hazards</li>\n<li>‚úÖ Rewards well-maintained robots</li>\n<li>‚úÖ Wild Bots can have spectacular wins or catastrophic failures</li>\n</ul>\n<hr>\n<h2>Faction Racing Bonuses</h2>\n<p>Each of the 14 Type-based factions has unique racing advantages:</p>\n<h3>Ultra-Rare Factions (1-45 bots)</h3>\n<p><strong>Ultimate-master</strong> (1 bot) üëë</p>\n<ul>\n<li><strong>+12% performance</strong> in all conditions</li>\n<li>Supreme racing machine</li>\n</ul>\n<p><strong>Wild</strong> (5 bots) ‚ö°</p>\n<ul>\n<li><strong>-10% to +10% random variance</strong></li>\n<li>Can dominate or crash spectacularly</li>\n<li>High risk, high reward</li>\n</ul>\n<p><strong>Golden</strong> (27 bots) ‚ú®</p>\n<ul>\n<li><strong>+15% performance</strong> when condition ‚â• 90</li>\n<li><strong>+5% performance</strong> otherwise</li>\n<li>Pristine maintenance rewarded</li>\n</ul>\n<p><strong>Ultimate</strong> (45 bots) üåü</p>\n<ul>\n<li><strong>+10% performance</strong> in all conditions</li>\n<li>Consistent excellence</li>\n</ul>\n<h3>Super-Rare Factions (244-640 bots)</h3>\n<p><strong>Blackhole</strong> (244 bots) üåÄ</p>\n<ul>\n<li><strong>+12% performance</strong> on Metal Roads</li>\n<li><strong>+3% performance</strong> on other terrains</li>\n<li>Highway speed specialists</li>\n</ul>\n<p><strong>Dead</strong> (382 bots) üíÄ</p>\n<ul>\n<li><strong>+10% performance</strong> on 20km+ races</li>\n<li><strong>+2% performance</strong> on shorter races</li>\n<li>Endurance machines</li>\n</ul>\n<p><strong>Master</strong> (640 bots) üé≠</p>\n<ul>\n<li><strong>+14% performance</strong> in Elite/SilentKlan races</li>\n<li><strong>+4% performance</strong> in other classes</li>\n<li>Excel under elite pressure</li>\n</ul>\n<h3>Rare Factions (717-999 bots)</h3>\n<p><strong>Bee</strong> (717 bots) üêù</p>\n<ul>\n<li><strong>+8% performance</strong> when stability ‚â• 60</li>\n<li><strong>+2% performance</strong> otherwise</li>\n<li>Precision flying rewarded</li>\n</ul>\n<p><strong>Food</strong> (778 bots) üçî</p>\n<ul>\n<li><strong>+9% performance</strong> when battery ‚â• 80</li>\n<li><strong>+3% performance</strong> otherwise</li>\n<li>Energy efficiency specialists</li>\n</ul>\n<p><strong>Box</strong> (798 bots) üì¶</p>\n<ul>\n<li><strong>+10% performance</strong> on Scrap Heaps</li>\n<li><strong>+2% performance</strong> on other terrains</li>\n<li>Garbage tower crushers</li>\n</ul>\n<p><strong>Murder</strong> (999 bots) üî™</p>\n<ul>\n<li><strong>+6% performance</strong> in all conditions</li>\n<li>Reliable aggressive racers</li>\n</ul>\n<h3>Common Factions (1654-2009 bots)</h3>\n<p><strong>Game</strong> (1654 bots) üéÆ</p>\n<ul>\n<li><strong>+5% performance</strong> on Wasteland Sand</li>\n<li><strong>+0% performance</strong> on other terrains</li>\n<li>Desert survival specialists</li>\n</ul>\n<p><strong>Animal</strong> (1701 bots) ü¶é</p>\n<ul>\n<li><strong>+2% performance</strong> in all conditions</li>\n<li>Natural wasteland adaptation</li>\n</ul>\n<p><strong>Industrial</strong> (2009 bots) ‚öôÔ∏è</p>\n<ul>\n<li><strong>+0% bonus</strong></li>\n<li>Raw stats, no special abilities</li>\n</ul>\n<hr>\n<h2>Race Calendar</h2>\n<h3>Daily Sprint Challenge</h3>\n<p><strong>Schedule:</strong> Every 6 hours (00:00, 06:00, 12:00, 18:00 UTC)</p>\n<ul>\n<li><strong>Distance:</strong> 5-10km (varies: 5km, 7km, or 10km)</li>\n<li><strong>Terrain:</strong> ScrapHeaps, WastelandSand, or MetalRoads</li>\n<li><strong>Classes:</strong> Scavenger, Raider, Elite</li>\n<li><strong>Entry Fee:</strong>\n<ul>\n<li>Scavenger: 0.05 ICP</li>\n<li>Raider: 0.1 ICP</li>\n<li>Elite: 0.25 ICP</li>\n</ul>\n</li>\n<li><strong>Max Entries:</strong> 12</li>\n<li><strong>Platform Bonus:</strong> +0.5 ICP (Scavenger/Raider only)</li>\n<li><strong>Points:</strong> 1x standard</li>\n</ul>\n<h3>Weekly League Championship</h3>\n<p><strong>Schedule:</strong> Every Sunday at 18:00 UTC</p>\n<ul>\n<li><strong>Distance:</strong> 10-20km (varies: 10km, 15km, or 20km)</li>\n<li><strong>Terrain:</strong> ScrapHeaps, WastelandSand, or MetalRoads</li>\n<li><strong>Classes:</strong> Scavenger, Raider, Elite, SilentKlan</li>\n<li><strong>Entry Fee:</strong>\n<ul>\n<li>Scavenger: 0.2 ICP</li>\n<li>Raider: 0.4 ICP</li>\n<li>Elite: 1.0 ICP</li>\n<li>SilentKlan: 2.0 ICP</li>\n</ul>\n</li>\n<li><strong>Max Entries:</strong> 50</li>\n<li><strong>Platform Bonus:</strong> +2 ICP (Scavenger/Raider only)</li>\n<li><strong>Points:</strong> 2x multiplier</li>\n</ul>\n<h3>Monthly Championship Cup</h3>\n<p><strong>Schedule:</strong> First Saturday of each month at 18:00 UTC</p>\n<ul>\n<li><strong>Distance:</strong> 15-30km (varies: 15km, 20km, 25km, or 30km)</li>\n<li><strong>Terrain:</strong> ScrapHeaps, WastelandSand, or MetalRoads</li>\n<li><strong>Classes:</strong> Elite, SilentKlan only</li>\n<li><strong>Entry Fee:</strong>\n<ul>\n<li>Elite: 2.5 ICP (0.5 base √ó 5x)</li>\n<li>SilentKlan: 5.0 ICP (0.5 base √ó 10x)</li>\n</ul>\n</li>\n<li><strong>Max Entries:</strong> 64</li>\n<li><strong>Platform Bonus:</strong> +5 ICP (all classes)</li>\n<li><strong>Points:</strong> 3x multiplier</li>\n</ul>\n<h3>Special Events</h3>\n<p><strong>Schedule:</strong> Announced in advance (72 hours)</p>\n<ul>\n<li><strong>Distance:</strong> 10-30km (full variety)</li>\n<li><strong>Terrain:</strong> All terrains</li>\n<li><strong>Classes:</strong> Varies by event</li>\n<li><strong>Entry Fee:</strong> Custom per event</li>\n<li><strong>Max Entries:</strong> Varies</li>\n<li><strong>Themes:</strong> Faction Championships, Holiday events, Community tournaments</li>\n</ul>\n<hr>\n<h2>Sponsorship System</h2>\n<p>Boost prize pools by sponsoring races!</p>\n<h3>How to Sponsor</h3>\n<p>Use the <code>racing_sponsor_race</code> tool:</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"amount_icp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">50.0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Good luck racers! -PokedBot Fan\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Benefits:</strong></p>\n<ul>\n<li>‚úÖ Your sponsorship displayed on race page</li>\n<li>‚úÖ Optional message (max 100 chars)</li>\n<li>‚úÖ Support the racing community</li>\n<li>‚úÖ Winners know who contributed</li>\n</ul>\n<p><strong>Minimum:</strong> 0.1 ICP per sponsorship</p>\n<hr>\n<h2>Leaderboards</h2>\n<h3>Time-Based Rankings</h3>\n<p><strong>Monthly Leaderboard (YYYYMM format)</strong></p>\n<ul>\n<li>Points earned during calendar month</li>\n<li>Resets at start of each month</li>\n<li>Tracks current month's best performers</li>\n</ul>\n<p><strong>Seasonal Leaderboard (3-month periods)</strong></p>\n<ul>\n<li>Winter (Jan-Mar), Spring (Apr-Jun), Summer (Jul-Sep), Fall (Oct-Dec)</li>\n<li>Accumulates points across full season</li>\n<li>Major achievements tracked quarterly</li>\n</ul>\n<p><strong>All-Time Leaderboard</strong></p>\n<ul>\n<li>Permanent career rankings</li>\n<li>Never resets</li>\n<li>Historical performance record</li>\n</ul>\n<h3>Division Rankings</h3>\n<p>Leaderboards filtered by race class:</p>\n<ul>\n<li><strong>Scavenger Class</strong> (0-2 wins)</li>\n<li><strong>Raider Class</strong> (3-9 wins)</li>\n<li><strong>Elite Class</strong> (10+ wins)</li>\n<li><strong>SilentKlan</strong> (10+ wins, invitation only)</li>\n</ul>\n<h3>Faction Rankings</h3>\n<p>Top performers for each faction:</p>\n<ul>\n<li><strong>Ultra-Rare:</strong> UltimateMaster, Wild, Golden, Ultimate</li>\n<li><strong>Super-Rare:</strong> Blackhole, Dead, Master</li>\n<li><strong>Rare:</strong> Bee, Food, Box, Murder</li>\n<li><strong>Common:</strong> Game, Animal, Industrial</li>\n</ul>\n<h3>Leaderboard Stats Tracked</h3>\n<p><strong>Per-Bot Metrics:</strong></p>\n<ul>\n<li>Points (position-based: 1st=25pts, 2nd=18pts, 3rd=15pts, etc.)</li>\n<li>Win count &#x26; win rate percentage</li>\n<li>Podium finishes (Top 3)</li>\n<li>Average finish position</li>\n<li>Total races entered</li>\n<li>Total earnings (ICP e8s)</li>\n<li>Best finish achieved</li>\n<li>Current streak (consecutive wins/losses)</li>\n<li>Rank &#x26; trend (‚Üë Up, ‚Üì Down, = Stable, ‚òÖ New)</li>\n<li>Last race timestamp</li>\n</ul>\n<p><strong>Career Stats:</strong></p>\n<ul>\n<li>Races entered</li>\n<li>Wins / Places (2nd) / Shows (3rd)</li>\n<li>Total ICP earned</li>\n<li>Faction reputation points</li>\n<li>Experience points</li>\n<li>Upgrade progression</li>\n</ul>\n<h3>Points System</h3>\n<p><strong>Base Points by Position:</strong></p>\n<ul>\n<li>1st Place: 25 points</li>\n<li>2nd Place: 18 points</li>\n<li>3rd Place: 15 points</li>\n<li>4th Place: 12 points</li>\n<li>5th Place: 10 points</li>\n<li>6th Place: 8 points</li>\n<li>7th-8th: 6 points</li>\n<li>9th-10th: 4 points</li>\n<li>11th+: 2 points (participation)</li>\n</ul>\n<p><strong>Multipliers:</strong></p>\n<ul>\n<li>Daily Sprint: 1x</li>\n<li>Weekly League: 2x</li>\n<li>Monthly Cup: 3x</li>\n<li>Special Events: Varies</li>\n</ul>\n<hr>\n<h2>Racing Tools</h2>\n<h3><code>racing_list_races</code></h3>\n<p>View upcoming wasteland races with filters:</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"after_race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"race_class\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Elite\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"terrain\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MetalRoads\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"has_spots\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Returns 5 races per page with full details.</p>\n<h3><code>racing_enter_race</code></h3>\n<p>Enter your bot in a race:</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Pays entry fee via ICRC-2, bot enters race.</p>\n<h3><code>racing_sponsor_race</code></h3>\n<p>Add ICP to race prize pool:</p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"amount_icp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">50.0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Go racers!\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<hr>\n<h2>Post-Race Effects</h2>\n<p>After each race:</p>\n<ul>\n<li><strong>Battery</strong>: -10 per race</li>\n<li><strong>Condition</strong>: -5 per race (wear and tear)</li>\n<li><strong>Experience</strong>: +10 XP</li>\n<li><strong>Win Count</strong>: +1 if you placed 1st-4th</li>\n<li><strong>Career Stats</strong>: Updated with placement and earnings</li>\n</ul>\n<p>‚ö†Ô∏è <strong>Remember to maintain your bot!</strong> Low condition/battery hurts performance.</p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/UPGRADE_SYSTEM\">‚Üê Upgrade System</a> | üõí <a href=\"/docs/MARKETPLACE\">Marketplace ‚Üí</a></p>\n<p><strong>See also:</strong></p>\n<ul>\n<li>üîß <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> - Maintain your bot</li>\n<li>‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System</a> - Improve stats</li>\n<li>üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools</a> - Complete API reference</li>\n</ul>\n"
    },
    {
      "slug": "MARKETPLACE",
      "metadata": {
        "title": "Marketplace",
        "description": "Browse, buy, and trade PokedBot NFTs",
        "order": 6
      },
      "content": "<h1>PokedBots Racing - Marketplace</h1>\n<p><strong>Buy, Sell, Trade</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/RACING_SYSTEM\">‚Üê Racing System</a> | üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools ‚Üí</a></p>\n<hr>\n<h2>Primary Marketplace</h2>\n<p>The primary marketplace is the existing PokedBots EXT marketplace canister. You can browse and purchase PokedBots directly through the racing MCP tools.</p>\n<p><strong>Marketplace Canister:</strong> <code>bzsui-sqaaa-aaaah-qce2a-cai</code></p>\n<hr>\n<h2>Browse PokedBots</h2>\n<h3><code>marketplace_browse_pokedbots</code></h3>\n<p>Browse available PokedBots for sale with detailed stats and powerful filtering:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"after\"</span><span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>              <span class=\"token comment\">// Optional: token index for pagination</span>\n  <span class=\"token property\">\"faction\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"UltimateMaster\"</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// Optional: UltimateMaster, Wild, Golden, Ultimate, Blackhole, Dead, Master, Bee, Food, Box, Murder, Game, Animal, Industrial</span>\n  <span class=\"token property\">\"minRating\"</span><span class=\"token operator\">:</span> <span class=\"token number\">70</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// Optional: minimum overall rating (30-100)</span>\n  <span class=\"token property\">\"maxPrice\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// Optional: maximum price in ICP</span>\n  <span class=\"token property\">\"minWins\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>             <span class=\"token comment\">// Optional: minimum race wins</span>\n  <span class=\"token property\">\"minWinRate\"</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>         <span class=\"token comment\">// Optional: minimum win rate % (0-100)</span>\n  <span class=\"token property\">\"sortBy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rating\"</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// Optional: price, rating, winRate, wins (default: price)</span>\n  <span class=\"token property\">\"sortDesc\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>          <span class=\"token comment\">// Optional: sort descending (default varies by sortBy)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong>\nReturns formatted text with 5 listings per page showing:</p>\n<ul>\n<li>Token index, price in ICP</li>\n<li>Faction, overall rating (or base rating if never raced)</li>\n<li>Base stats: SPD, PWR, ACC, STB</li>\n<li>Win/loss record and win rate (if raced)</li>\n<li>Terrain and distance preferences</li>\n<li>Thumbnail image URL</li>\n</ul>\n<p><strong>Features:</strong></p>\n<ul>\n<li>‚úÖ 5 listings per page</li>\n<li>‚úÖ Faction filtering (find ultra-rare UltimateMaster, Wild, Golden, or Ultimate bots)</li>\n<li>‚úÖ Stat-based filtering (min rating, max price, proven winners)</li>\n<li>‚úÖ Multiple sort options (price, rating, winRate, wins)</li>\n<li>‚úÖ Shows base stats even for bots that haven't raced</li>\n<li>‚úÖ Cursor-based pagination using token index</li>\n</ul>\n<hr>\n<h2>Purchase PokedBots</h2>\n<h3><code>marketplace_purchase_pokedbot</code></h3>\n<p>Purchase a PokedBot using ICRC-2 approval:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong>\nReturns formatted text with:</p>\n<ul>\n<li>‚úÖ Purchase confirmation</li>\n<li>‚úÖ Token index</li>\n<li>‚úÖ Price paid in ICP (formatted)</li>\n<li>‚úÖ Transaction 1 block index (ICRC-2 transfer)</li>\n<li>‚úÖ Transaction 2 block index (legacy transfer to marketplace)</li>\n<li>‚úÖ Next steps (view your garage)</li>\n</ul>\n<p><strong>How it Works:</strong></p>\n<ol>\n<li>\n<p><strong>NFT Lock</strong>: System locks NFT to your garage account ID</p>\n</li>\n<li>\n<p><strong>ICRC-2 Approval</strong>: You must first approve the racing canister</p>\n<pre><code>icrc2_approve(spender=3od6b-qiaaa-aaaai-q37ma-cai, amount=price+20000)\n</code></pre>\n</li>\n<li>\n<p><strong>Two-Step Payment</strong>:</p>\n<ul>\n<li>Transaction 1: ICRC-2 pull from your wallet to garage subaccount (price + 20k e8s)</li>\n<li>Transaction 2: Legacy transfer from garage to marketplace payment address (price)</li>\n</ul>\n</li>\n<li>\n<p><strong>Settlement</strong>:</p>\n<ul>\n<li>Payment verified on-chain</li>\n<li>NFT transferred to your garage subaccount</li>\n<li>Stats updated to mark as unlisted (if previously initialized)</li>\n</ul>\n</li>\n</ol>\n<p><strong>Your Garage Subaccount:</strong></p>\n<ul>\n<li>Format: \"GARG\" prefix + your principal bytes</li>\n<li>Non-custodial: You own the NFT</li>\n<li>NFTs remain tradeable on EXT marketplaces</li>\n<li>Account identifier used as buyer address for lock/settlement</li>\n</ul>\n<hr>\n<h2>Secondary Marketplace</h2>\n<p>List your own PokedBots for sale!</p>\n<h3><code>marketplace_list_pokedbot</code></h3>\n<p>List a bot for sale:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"price_icp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10.5</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong>\nReturns formatted text with:</p>\n<ul>\n<li>‚úÖ Listing confirmation</li>\n<li>‚úÖ Token index and price</li>\n<li>‚úÖ Status: LISTED</li>\n<li>‚úÖ Warning about racing restrictions</li>\n</ul>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>‚úÖ You own the bot in your garage</li>\n<li>‚úÖ Bot is initialized for racing (use <code>garage_initialize_pokedbot</code> first)</li>\n<li>‚úÖ Bot not already listed</li>\n<li>‚úÖ Price ‚â• 0.01 ICP</li>\n</ul>\n<p><strong>Note:</strong> Bot cannot race while listed. Unlist to make available for racing again.</p>\n<h3><code>marketplace_unlist_pokedbot</code></h3>\n<p>Remove your listing:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong>\nReturns formatted text with:</p>\n<ul>\n<li>‚úÖ Unlisting confirmation</li>\n<li>‚úÖ Token index</li>\n<li>‚úÖ Status: UNLISTED</li>\n<li>‚úÖ Note that bot is now available for racing</li>\n</ul>\n<p><strong>How it Works:</strong></p>\n<ul>\n<li>Calls EXT <code>list()</code> with <code>price=null</code> to remove listing</li>\n<li>Updates bot stats to mark as not listed (if initialized)</li>\n<li>Makes bot available for racing again</li>\n</ul>\n<hr>\n<h2>Transfer PokedBots</h2>\n<h3><code>garage_transfer_pokedbot</code></h3>\n<p>Transfer a bot to another account:</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"to_account_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"abc123...\"</span>  <span class=\"token comment\">// Hex-encoded account identifier</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong>\nReturns formatted text with:</p>\n<ul>\n<li>‚úÖ Transfer confirmation</li>\n<li>‚úÖ Token index</li>\n<li>‚úÖ Destination account ID</li>\n<li>‚úÖ Transaction details</li>\n</ul>\n<p><strong>Use Cases:</strong></p>\n<ul>\n<li>Gift bots to friends</li>\n<li>Move bots between your accounts</li>\n<li>Send to another user's garage (use their garage account ID)</li>\n</ul>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>‚úÖ You own the bot in your garage</li>\n<li>‚úÖ Bot not listed on marketplace</li>\n<li>‚úÖ Valid destination account ID (32-byte hex string)</li>\n</ul>\n<p><strong>Note:</strong> This is a garage tool, not a marketplace tool. See <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> for details.</p>\n<hr>\n<h2>Image URLs</h2>\n<p>All PokedBots have image URLs you can view:</p>\n<pre><code>https://bzsui-sqaaa-aaaah-qce2a-cai.raw.icp0.io/?tokenid={encoded_token_id}&#x26;type=thumbnail\n</code></pre>\n<p>Example for token #4079:</p>\n<pre><code>https://bzsui-sqaaa-aaaah-qce2a-cai.raw.icp0.io/?tokenid=erjsi-hqaaa-aaaah-qce3q-cai&#x26;type=thumbnail\n</code></pre>\n<p><strong>Note:</strong> The <code>tokenid</code> parameter is an EXT-encoded token identifier, not the raw token index. The browse tool provides the full image URL for each listing.</p>\n<hr>\n<h2>Marketplace Stats</h2>\n<p>Current marketplace state:</p>\n<ul>\n<li><strong>Total Supply</strong>: 10,000 PokedBots</li>\n<li><strong>Listings</strong>: 1,252+ available</li>\n<li><strong>Price Range</strong>: 0.5 - 1000+ ICP</li>\n<li><strong>Floor Price</strong>: ~0.5 ICP</li>\n</ul>\n<hr>\n<h2>Trading Tips</h2>\n<h3>Finding Value</h3>\n<ul>\n<li>‚úÖ Browse by price to find cheap bots</li>\n<li>‚úÖ Check faction distribution (UltimateMaster ultra-rare with only 1 bot)</li>\n<li>‚úÖ Look for naturally high stats</li>\n<li>‚úÖ Consider win count for race eligibility</li>\n</ul>\n<h3>Selling Strategy</h3>\n<ul>\n<li>‚úÖ Price competitively</li>\n<li>‚úÖ Highlight faction bonuses</li>\n<li>‚úÖ Mention win record</li>\n<li>‚úÖ Show upgrade investment</li>\n</ul>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/RACING_SYSTEM\">‚Üê Racing System</a> | üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools ‚Üí</a></p>\n<p><strong>See also:</strong></p>\n<ul>\n<li>üîß <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> - Manage your bots</li>\n<li>‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System</a> - Improve bot value</li>\n<li>üìñ <a href=\"/docs/OVERVIEW\">Overview</a> - Back to start</li>\n</ul>\n"
    },
    {
      "slug": "MCP_TOOLS",
      "metadata": {
        "title": "MCP Tools Reference",
        "description": "Complete API reference for all 15 MCP tools",
        "order": 7
      },
      "content": "<h1>PokedBots Racing - MCP Tools Reference</h1>\n<p><strong>Complete API Documentation</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/MARKETPLACE\">‚Üê Marketplace</a> | üìö <a href=\"/docs/TECHNICAL_REFERENCE\">Technical Reference ‚Üí</a></p>\n<hr>\n<h2>Overview</h2>\n<p>All tools require ICRC-2 approval for paid operations. The canister uses <code>transfer_from</code> to pull exact amounts needed.</p>\n<p><strong>Canister ID:</strong> <code>3od6b-qiaaa-aaaai-q37ma-cai</code></p>\n<p><strong>Status:</strong> ‚úÖ All 15 tools fully operational on IC mainnet</p>\n<hr>\n<h2>Garage Tools</h2>\n<h3><code>garage_list_my_pokedbots</code></h3>\n<p>List all PokedBots in your garage.</p>\n<p><strong>Input:</strong> None (auth required)</p>\n<p><strong>Output:</strong> Formatted text showing:</p>\n<ul>\n<li>Total count of bots in garage</li>\n<li>For each bot:\n<ul>\n<li>Token index, faction icon, faction name</li>\n<li>Overall rating (or base rating if never raced)</li>\n<li>Current stats (Speed, Power, Acceleration, Stability)</li>\n<li>Battery and condition percentages</li>\n<li>Racing record (races, wins, win rate)</li>\n<li>Race class bracket (Scavenger/Raider/Elite/SilentKlan)</li>\n<li>Terrain and distance preferences</li>\n<li>Thumbnail URL</li>\n</ul>\n</li>\n<li>Garage account ID</li>\n</ul>\n<h3><code>garage_get_robot_details</code></h3>\n<p>Get detailed stats for a specific bot.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>message</code>: Faction-specific greeting</li>\n<li><code>token_index</code>: Bot ID</li>\n<li><code>race_class</code>: Current bracket (Scavenger/Raider/Elite/SilentKlan)</li>\n<li><code>owner</code>: Principal text</li>\n<li><code>faction</code>: Faction name</li>\n<li><code>stats</code>: Current + base stats with bonuses\n<ul>\n<li><code>speed</code>, <code>power_core</code>, <code>acceleration</code>, <code>stability</code></li>\n<li><code>base_speed</code>, <code>base_power_core</code>, etc.</li>\n<li><code>speed_bonus</code>, <code>power_core_bonus</code>, etc.</li>\n</ul>\n</li>\n<li><code>condition</code>: Battery, condition, calibration, status message</li>\n<li><code>career</code>: Races, wins, places, shows, scrap earned, reputation</li>\n<li><code>overall_rating</code>: Calculated rating (30-100)</li>\n<li><code>can_race</code>: Boolean eligibility</li>\n<li><code>preferred_distance</code>: ShortSprint/MediumHaul/LongTrek</li>\n<li><code>preferred_terrain</code>: ScrapHeaps/WastelandSand/MetalRoads</li>\n<li><code>experience</code>: Total XP</li>\n<li><code>thumbnail</code>: Image URL</li>\n<li><code>image</code>: Full image URL</li>\n<li><code>active_upgrade</code>: Upgrade status (type, time remaining, or None)</li>\n</ul>\n<h3><code>garage_initialize_pokedbot</code></h3>\n<p>Register a bot for wasteland racing license (first-time, free).</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">108</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>token_index</code>: Bot ID</li>\n<li><code>faction</code>: Derived faction (UltimateMaster/Wild/Golden/Ultimate/Blackhole/Dead/Master/Bee/Food/Box/Murder/Game/Animal/Industrial)</li>\n<li><code>stats</code>: Base racing stats (speed, power_core, acceleration, stability)</li>\n<li><code>battery</code>: Starting battery (100)</li>\n<li><code>condition</code>: Starting condition (100)</li>\n<li><code>calibration</code>: Starting calibration (80)</li>\n<li><code>status</code>: \"Racing license registered!\"</li>\n<li><code>license_status</code>: \"REGISTERED\"</li>\n<li><code>faction_message</code>: Faction-specific lore message</li>\n</ul>\n<h3><code>garage_recharge_robot</code></h3>\n<p>Restore condition and battery.</p>\n<p><strong>Cost:</strong> 0.1 ICP + 0.0001 ICP fee (total: 0.1001 ICP)\n<strong>Cooldown:</strong> 6 hours<br>\n<strong>Effect:</strong> +20 Condition, +10 Battery</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>token_index</code>: Bot ID</li>\n<li><code>action</code>: \"Recharge\"</li>\n<li><code>payment</code>: Amount, fee, total, block_index</li>\n<li><code>condition_restored</code>: Actual amount restored</li>\n<li><code>battery_restored</code>: Actual amount restored</li>\n<li><code>new_condition</code>: Updated condition value</li>\n<li><code>new_battery</code>: Updated battery value</li>\n<li><code>next_available_hours</code>: 6</li>\n<li><code>message</code>: \"Power cells recharged. Systems nominal.\"</li>\n</ul>\n<h3><code>garage_repair_robot</code></h3>\n<p>Repair damage to improve condition.</p>\n<p><strong>Cost:</strong> 0.05 ICP + 0.0001 ICP fee (total: 0.0501 ICP)\n<strong>Cooldown:</strong> 3 hours<br>\n<strong>Effect:</strong> +10 Condition</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>token_index</code>: Bot ID</li>\n<li><code>action</code>: \"Repair\"</li>\n<li><code>condition_restored</code>: 10</li>\n<li><code>new_condition</code>: Updated condition value</li>\n<li><code>message</code>: \"Repairs complete\"</li>\n</ul>\n<h3><code>garage_upgrade_robot</code></h3>\n<p>Start a 12-hour V2 upgrade session with RNG mechanics.</p>\n<p><strong>V2 System Features:</strong></p>\n<ul>\n<li><strong>Flexible Payment:</strong> Pay with ICP or parts (100 parts = 1 ICP equivalent)\n<ul>\n<li>ICP: Requires ICRC-2 approval, instant payment</li>\n<li>Parts: Deducted from inventory (earned via racing/scavenging)</li>\n</ul>\n</li>\n<li><strong>Dynamic Costs:</strong> 0.5 + (currentStat/40)¬≤ √ó tier premium (0.7-3.5√ó)</li>\n<li><strong>Success Rates:</strong> 85% ‚Üí 15% (attempts 1-15), then 8% ‚Üí 1% (brutal soft cap)</li>\n<li><strong>Pity System:</strong> +5% per consecutive fail (max +25%), persists across upgrades</li>\n<li><strong>Double Lottery:</strong> 15% ‚Üí 2% chance for +2 points (disabled after +15)</li>\n<li><strong>50% Refund on Failure:</strong> Both ICP and parts are refunded at 50% rate</li>\n</ul>\n<p><strong>Duration:</strong> 12 hours<br>\n<strong>Types:</strong> Velocity (+Speed), PowerCore (+Power Core), Thruster (+Acceleration), Gyro (+Stability)</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"upgrade_type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Velocity\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"payment_method\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icp\"</span>  <span class=\"token comment\">// or \"parts\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>token_index</code>: Bot ID</li>\n<li><code>upgrade_type</code>: Type name</li>\n<li><code>cost_icp</code>: Dynamic cost based on current stat</li>\n<li><code>success_rate</code>: Base rate + pity bonus</li>\n<li><code>double_chance</code>: Lottery chance for +2 points</li>\n<li><code>attempt_number</code>: Which upgrade attempt this is</li>\n<li><code>pity_counter</code>: Consecutive failures</li>\n<li><code>message</code>: \"üîß Upgrade in progress. Check back in 12 hours.\"</li>\n</ul>\n<p><strong>Note:</strong> Success/failure determined after 12 hours. Failures grant pity bonus for next attempt.</p>\n<hr>\n<h2>Marketplace Tools</h2>\n<h3><code>marketplace_browse_pokedbots</code></h3>\n<p>Browse listings with powerful filtering and sorting, or lookup a specific token.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"tokenIndex\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// Optional: Get details for specific token (no pagination)</span>\n  <span class=\"token property\">\"after\"</span><span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>              <span class=\"token comment\">// Optional: pagination cursor (browse mode)</span>\n  <span class=\"token property\">\"faction\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"GodClass\"</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">// Optional: filter by faction</span>\n  <span class=\"token property\">\"minRating\"</span><span class=\"token operator\">:</span> <span class=\"token number\">70</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// Optional: min rating (30-100)</span>\n  <span class=\"token property\">\"maxPrice\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// Optional: max price in ICP</span>\n  <span class=\"token property\">\"minWins\"</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>             <span class=\"token comment\">// Optional: min race wins</span>\n  <span class=\"token property\">\"minWinRate\"</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>         <span class=\"token comment\">// Optional: min win % (0-100)</span>\n  <span class=\"token property\">\"sortBy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rating\"</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// Optional: price/rating/winRate/wins</span>\n  <span class=\"token property\">\"sortDesc\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>          <span class=\"token comment\">// Optional: sort direction</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Two Modes:</strong></p>\n<ol>\n<li>\n<p><strong>Specific Token Lookup</strong> (when <code>tokenIndex</code> provided):</p>\n<ul>\n<li>Returns single listing with full stats</li>\n<li>Error if token not listed</li>\n<li>No pagination</li>\n</ul>\n</li>\n<li>\n<p><strong>Browse Mode</strong> (when <code>tokenIndex</code> omitted):</p>\n<ul>\n<li>Returns 5 listings per page</li>\n<li>Apply filters and sorting</li>\n<li>Use <code>after</code> for pagination</li>\n</ul>\n</li>\n</ol>\n<p><strong>Output:</strong> Formatted text showing listings with:</p>\n<ul>\n<li>Token index, price in ICP</li>\n<li>Faction, overall rating (or base if never raced)</li>\n<li>Base stats (SPD/PWR/ACC/STB)</li>\n<li>Win/loss record and win rate (if raced)</li>\n<li>Terrain and distance preferences</li>\n<li>Thumbnail image URL</li>\n<li>Pagination cursor for next page (browse mode)</li>\n<li>Filter/sort info in header</li>\n</ul>\n<h3><code>marketplace_purchase_pokedbot</code></h3>\n<p>Purchase a bot via ICRC-2.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> Formatted text with:</p>\n<ul>\n<li>\"‚úÖ Purchase Complete!\"</li>\n<li>Token index, price paid in ICP</li>\n<li>Transaction 1 block index (ICRC-2 transfer to garage)</li>\n<li>Transaction 2 block index (legacy transfer to marketplace)</li>\n<li>\"üéÆ Next: Use garage_list_my_pokedbots to see your bot\"</li>\n</ul>\n<p><strong>Process:</strong></p>\n<ol>\n<li>NFT locked to your garage account ID</li>\n<li>ICRC-2 pull from wallet to garage (price + 20k e8s)</li>\n<li>Legacy transfer from garage to marketplace payment address</li>\n<li>NFT settled to garage subaccount</li>\n</ol>\n<h3><code>marketplace_list_pokedbot</code></h3>\n<p>List your bot for sale.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"price_icp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10.5</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> Formatted text with:</p>\n<ul>\n<li>\"‚úÖ Listing Created!\"</li>\n<li>Token index, price in ICP</li>\n<li>Status: LISTED</li>\n<li>Warning: \"‚ö†Ô∏è You cannot race with this bot while it's listed\"</li>\n</ul>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>Bot must be initialized for racing</li>\n<li>Bot not already listed</li>\n<li>Minimum price: 0.01 ICP</li>\n</ul>\n<h3><code>marketplace_unlist_pokedbot</code></h3>\n<p>Remove your listing.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span><span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> Formatted text with:</p>\n<ul>\n<li>\"‚úÖ Listing Removed!\"</li>\n<li>Token index</li>\n<li>Status: UNLISTED</li>\n<li>\"üèÅ Your bot is now available for racing again!\"</li>\n</ul>\n<p><strong>Note:</strong> Calls EXT <code>list()</code> with <code>price=null</code> to remove listing</p>\n<h3><code>transfer_pokedbot</code></h3>\n<p>Transfer bot to another account.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"to_account_id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"abc123...\"</span>  <span class=\"token comment\">// 64-char hex account ID</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> Formatted text with:</p>\n<ul>\n<li>\"‚úÖ Transfer Complete!\"</li>\n<li>Token index, from/to account IDs</li>\n<li>Career stats summary (wins, races, upgrade bonuses)</li>\n<li>\"üì¶ Bot removed from your garage\"</li>\n<li>\"üéØ All stats and upgrades transfer with bot\"</li>\n<li>\"üîÑ New owner can initialize it to start racing\"</li>\n</ul>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>Bot not listed on marketplace</li>\n<li>Bot not in active race</li>\n<li>Valid 64-character hex account ID</li>\n</ul>\n<p><strong>Note:</strong> This is a garage tool. All career stats and upgrades transfer with the bot.</p>\n<hr>\n<h2>Racing Tools</h2>\n<h3><code>racing_list_races</code></h3>\n<p>View upcoming races with filters.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"after_race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// Optional: pagination cursor</span>\n  <span class=\"token property\">\"race_class\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Elite\"</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// Optional: Scavenger/Raider/Elite/SilentKlan</span>\n  <span class=\"token property\">\"terrain\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MetalRoads\"</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// Optional: ScrapHeaps/WastelandSand/MetalRoads</span>\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"open\"</span><span class=\"token punctuation\">,</span>          <span class=\"token comment\">// Optional: open/full/closed</span>\n  <span class=\"token property\">\"has_spots\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>         <span class=\"token comment\">// Optional: filter by availability</span>\n  <span class=\"token property\">\"min_distance\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// Optional: min distance in km</span>\n  <span class=\"token property\">\"max_distance\"</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>        <span class=\"token comment\">// Optional: max distance in km</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span><span class=\"token punctuation\">,</span>       <span class=\"token comment\">// Optional: show only races this bot can enter</span>\n  <span class=\"token property\">\"sort_by\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"prize_pool\"</span>    <span class=\"token comment\">// Optional: prize_pool/start_time/entry_fee/distance</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>message</code>: \"üèÅ Wasteland Racing Circuit\"</li>\n<li><code>total_races</code>: Total matching races</li>\n<li><code>showing</code>: Number in this page</li>\n<li><code>has_more</code>: Boolean for pagination</li>\n<li><code>next_cursor</code>: Race ID for next page (if has_more)</li>\n<li><code>races</code>: Array of race objects, each with:\n<ul>\n<li><code>race_id</code>, <code>name</code>, <code>class</code>, <code>distance_km</code>, <code>duration_seconds</code></li>\n<li><code>terrain</code>, <code>entry_fee_icp</code>, <code>prize_pool_icp</code>, <code>sponsored_icp</code></li>\n<li><code>sponsors</code>: Array of sponsor objects</li>\n<li><code>entries</code>, <code>max_entries</code>, <code>spots_left</code></li>\n<li><code>status</code>: \"Open for Entry\"/\"Full\"/\"Entry Closed\"/etc.</li>\n<li><code>starts_in_hours</code>, <code>starts_in_minutes</code>, <code>entry_deadline_minutes</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>Features:</strong> Returns 5 races per page, extensive filtering, multiple sort options</p>\n<h3><code>racing_enter_race</code></h3>\n<p>Enter your bot in a race.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"token_index\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4079</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>message</code>: \"üèÅ <strong>RACE ENTRY CONFIRMED</strong>\"</li>\n<li><code>race_id</code>, <code>race_name</code>, <code>race_class</code></li>\n<li><code>your_position</code>: Entry position number</li>\n<li><code>total_entries</code>, <code>max_entries</code></li>\n<li><code>entry_fee_paid_icp</code>: Formatted ICP amount</li>\n<li><code>current_prize_pool_icp</code>: Updated prize pool</li>\n<li><code>starts_in_hours</code>, <code>starts_in_minutes</code></li>\n<li><code>battery_remaining</code>: Bot's battery after -10 drain</li>\n<li><code>wasteland_message</code>: \"‚ö° Your bot heads to the starting line...\"</li>\n</ul>\n<p><strong>Requirements:</strong></p>\n<ul>\n<li>Condition ‚â• 70</li>\n<li>Battery ‚â• 50</li>\n<li>Meets race class (wins bracket)</li>\n<li>No active upgrade</li>\n<li>Not listed for sale</li>\n<li>ICRC-2 allowance for entry fee</li>\n</ul>\n<p><strong>Effect:</strong> Drains 10 battery per race entry</p>\n<h3><code>racing_sponsor_race</code></h3>\n<p>Add ICP to race prize pool.</p>\n<p><strong>Input:</strong></p>\n<pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"race_id\"</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"amount_icp\"</span><span class=\"token operator\">:</span> <span class=\"token number\">50.0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Good luck!\"</span>  <span class=\"token comment\">// Optional, max 100 chars</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>Output:</strong> JSON object with:</p>\n<ul>\n<li><code>message</code>: \"üí∞ <strong>SPONSORSHIP CONFIRMED</strong>\"</li>\n<li><code>sponsor_tier</code>: üèÜ PLATINUM (‚â•5 ICP) / ü•á GOLD (‚â•2 ICP) / ü•à SILVER (‚â•0.5 ICP) / ü•â BRONZE</li>\n<li><code>race_id</code>, <code>race_name</code>, <code>race_class</code></li>\n<li><code>your_contribution_icp</code>: Your sponsorship amount</li>\n<li><code>new_prize_pool_icp</code>: Updated total prize pool</li>\n<li><code>total_sponsors</code>: Number of sponsors</li>\n<li><code>entries_so_far</code>, <code>max_entries</code></li>\n<li><code>starts_in_hours</code></li>\n<li><code>wasteland_message</code>: \"üåü Your generosity echoes across the wasteland...\"</li>\n</ul>\n<p><strong>Minimum:</strong> 0.1 ICP<br>\n<strong>Status:</strong> Only Upcoming races can be sponsored</p>\n<hr>\n<h2>Authentication</h2>\n<p>All tools require MCP authentication with your Internet Computer principal.</p>\n<p><strong>Setup:</strong></p>\n<ol>\n<li>Connect wallet/identity</li>\n<li>Authenticate with MCP server</li>\n<li>Tools use your principal automatically</li>\n</ol>\n<hr>\n<h2>ICRC-2 Approval</h2>\n<p>For paid operations, approve the canister once:</p>\n<pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Approve 150 ICP allowance (covers multiple operations)</span>\ndfx canister call ryjl3-tyaaa-aaaaa-aaaba-cai icrc2_approve <span class=\"token punctuation\">\\</span>\n  <span class=\"token string\">'(record { \n    spender = record { \n      owner = principal \"3od6b-qiaaa-aaaai-q37ma-cai\" \n    };\n    amount = 15000000000 \n  })'</span>\n</code></pre>\n<p>Then all paid tools work automatically!</p>\n<hr>\n<h2>Error Handling</h2>\n<p>Common errors:</p>\n<ul>\n<li><code>\"Authentication required\"</code> - No auth provided</li>\n<li><code>\"Payment failed - check ICRC-2 allowance\"</code> - Insufficient approval</li>\n<li><code>\"Robot not initialized\"</code> - Need to call <code>garage_initialize_pokedbot</code> first</li>\n<li><code>\"Condition too low\"</code> - Bot needs repair/recharge</li>\n<li><code>\"Robot not owned by caller\"</code> - You don't own this bot</li>\n</ul>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/MARKETPLACE\">‚Üê Marketplace</a> | üìö <a href=\"/docs/TECHNICAL_REFERENCE\">Technical Reference ‚Üí</a></p>\n<p><strong>See also:</strong></p>\n<ul>\n<li>üìñ <a href=\"/docs/OVERVIEW\">Overview</a> - System introduction</li>\n<li>üèóÔ∏è <a href=\"/docs/ARCHITECTURE\">Architecture</a> - Technical design</li>\n<li>üîß <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> - Bot management</li>\n</ul>\n"
    },
    {
      "slug": "PLATFORM_ECONOMICS",
      "metadata": {
        "title": "Platform Economics & Sustainability",
        "description": "Comprehensive analysis of platform revenue streams, cost structure, break-even points, and long-term financial sustainability",
        "category": "Platform Operations",
        "audience": "Platform Operators, Investors, Financial Analysts",
        "last_updated": "2025-11-21T00:00:00.000Z",
        "status": "Active",
        "related_docs": [
          "IMPLEMENTATION_GUIDE.md",
          "RACING_CALENDAR_DESIGN.md",
          "full-system-demo-and-recommendations.md"
        ]
      },
      "content": "<h1>PokedBots Racing - Platform Economics &#x26; Sustainability</h1>\n<h2>Overview</h2>\n<p>This document analyzes the platform's economic model, revenue streams, cost structure, and long-term sustainability. It's designed for platform operators and investors to understand the business model.</p>\n<hr>\n<h2>Revenue Streams</h2>\n<h3>1. Race Entry Tax (5%)</h3>\n<p>The platform takes 5% of all race entry fees before distributing the prize pool.</p>\n<p><strong>Example:</strong></p>\n<ul>\n<li>8 racers √ó 0.2 ICP entry = 1.6 ICP total</li>\n<li>Platform tax: 1.6 √ó 5% = <strong>0.08 ICP</strong></li>\n<li>Prize pool: 1.6 - 0.08 = 1.52 ICP</li>\n</ul>\n<h3>2. Upgrade Fees (V2 System)</h3>\n<p>Players pay ICP for bot upgrades with dynamic RNG-based pricing.</p>\n<p><strong>V2 Pricing:</strong></p>\n<ul>\n<li>Formula: 0.5 + (currentStat/40)¬≤ √ó premiumMultiplier</li>\n<li>Premium tiers: Scrap 0.7√ó, Elite 2.5√ó, God 3.5√ó</li>\n<li>Cost progression examples:\n<ul>\n<li>Scrap bot (15‚Üí30): 0.35 ‚Üí 1.15 ICP per attempt</li>\n<li>Elite bot (65‚Üí80): 1.25 ‚Üí 33+ ICP per attempt</li>\n</ul>\n</li>\n<li>50% refund on failures (reduces effective cost)</li>\n<li>Players can use parts instead (100 parts = 1 ICP)</li>\n</ul>\n<p><strong>Revenue per bot:</strong></p>\n<ul>\n<li>Casual player: 5-10 attempts = <strong>5-20 ICP</strong> (after refunds)</li>\n<li>Competitive player: 15-25 attempts = <strong>50-150 ICP</strong></li>\n<li>Whale pushing +15: 20+ attempts = <strong>200+ ICP</strong></li>\n</ul>\n<h3>3. Maintenance Services</h3>\n<ul>\n<li><strong>Recharge:</strong> 0.1 ICP (restores +20 condition, +10 battery, 6hr cooldown)</li>\n<li><strong>Repair:</strong> 0.05 ICP (restores +10 condition only, 3hr cooldown)</li>\n</ul>\n<p><strong>Usage patterns:</strong></p>\n<ul>\n<li>Casual racer: 4 recharges/month = <strong>0.4 ICP/month</strong></li>\n<li>Active racer: 8-12 recharges/month = <strong>0.8-1.2 ICP/month</strong></li>\n</ul>\n<p><strong>Revenue estimate (50 active players):</strong></p>\n<ul>\n<li>Average: 50 players √ó 6 recharges/month √ó 0.1 = <strong>30 ICP/month</strong></li>\n</ul>\n<hr>\n<h2>Cost Structure</h2>\n<h3>Platform Bonuses (Phase 1 - Treasury Funded)</h3>\n<p><strong>Daily Sprint Bonuses:</strong></p>\n<ul>\n<li>4 events/day √ó 2 bonus classes (Scavenger/Raider) = 8 races</li>\n<li>8 √ó 0.5 ICP = <strong>4 ICP/day</strong> = <strong>120 ICP/month</strong></li>\n</ul>\n<p><strong>Weekly League Bonuses:</strong></p>\n<ul>\n<li>4 events/month √ó 2 bonus classes = 8 races</li>\n<li>8 √ó 2 ICP = <strong>16 ICP/month</strong></li>\n</ul>\n<p><strong>Monthly Cup Bonuses:</strong></p>\n<ul>\n<li>1 event/month √ó 2 races (Elite/SilentKlan)</li>\n<li>2 √ó 5 ICP = <strong>10 ICP/month</strong></li>\n</ul>\n<p><strong>Total Bonus Cost: 146 ICP/month</strong></p>\n<h3>Infrastructure Costs</h3>\n<ul>\n<li>IC canister cycles (compute/storage)</li>\n<li>Timer execution costs</li>\n<li>Data storage (race results, leaderboards)</li>\n<li><strong>Estimated: 5-20 ICP/month</strong> depending on usage</li>\n</ul>\n<h3>Total Monthly Costs: ~150-170 ICP</h3>\n<hr>\n<h2>Revenue Analysis</h2>\n<h3>Current Scheduled Race Volume</h3>\n<p><strong>Daily Races:</strong></p>\n<ul>\n<li>4 Daily Sprint events √ó 3 classes = 12 races/day</li>\n<li>1 Weekly League/week √ó 4 classes = 0.57 races/day</li>\n<li>1 Monthly Cup/month = 0.07 races/day</li>\n<li><strong>Total: ~12.6 races/day</strong></li>\n</ul>\n<p><strong>Assuming 8 racers per race:</strong></p>\n<p><strong>Daily Tax Revenue:</strong></p>\n<ul>\n<li>4 Scavenger (0.05): 1.6 ICP entries ‚Üí 0.08 ICP tax</li>\n<li>4 Raider (0.1): 3.2 ICP ‚Üí 0.16 ICP tax</li>\n<li>4 Elite (0.25): 8 ICP ‚Üí 0.40 ICP tax</li>\n<li>Weekly races distributed: ~0.15 ICP tax</li>\n<li><strong>Daily: ~0.8 ICP</strong> = <strong>24 ICP/month</strong></li>\n</ul>\n<p><strong>Monthly Upgrade Revenue (assuming 50 active players):</strong></p>\n<ul>\n<li>25% buy 1 upgrade = 12 players √ó 10 ICP = <strong>120 ICP</strong></li>\n<li>10% buy 2-3 upgrades = 5 players √ó 30 ICP = <strong>150 ICP</strong></li>\n<li><strong>Total: ~270 ICP/month</strong></li>\n</ul>\n<p><strong>Monthly Maintenance Revenue:</strong></p>\n<ul>\n<li>50 players √ó avg 6 recharges √ó 0.1 ICP = <strong>30 ICP/month</strong></li>\n</ul>\n<h3>Current Economics Summary</h3>\n<p><strong>At Launch Volume (50 active players, 12 races/day):</strong></p>\n<ul>\n<li>Race tax revenue: 24 ICP/month</li>\n<li>Upgrade revenue: 270 ICP/month</li>\n<li>Maintenance revenue: 30 ICP/month</li>\n<li><strong>Total Revenue: ~324 ICP/month</strong></li>\n</ul>\n<p><strong>Costs:</strong></p>\n<ul>\n<li>Platform bonuses: 146 ICP/month</li>\n<li>Infrastructure: 10 ICP/month</li>\n<li><strong>Total Costs: ~156 ICP/month</strong></li>\n</ul>\n<p><strong>Net: +168 ICP/month profit</strong> ‚úÖ</p>\n<hr>\n<h2>Sustainability Scenarios</h2>\n<h3>Scenario 1: Launch Phase (Months 1-3)</h3>\n<ul>\n<li><strong>Players:</strong> 20-50 active</li>\n<li><strong>Races/day:</strong> 10-15</li>\n<li><strong>Revenue:</strong> Race tax + upgrades + maintenance</li>\n<li><strong>Strategy:</strong> Accept -100 to -150 ICP/month treasury subsidy as player acquisition cost</li>\n<li><strong>Bonuses:</strong> Full Phase 1 bonuses to encourage participation</li>\n</ul>\n<h3>Scenario 2: Growth Phase (Months 4-6)</h3>\n<ul>\n<li><strong>Players:</strong> 50-150 active</li>\n<li><strong>Races/day:</strong> 20-40</li>\n<li><strong>Revenue:</strong> Tax revenue increases, upgrade volume grows</li>\n<li><strong>Strategy:</strong> Reduce bonuses by 25-50% as prize pools grow organically</li>\n<li><strong>Target:</strong> Break-even to +50 ICP/month profit</li>\n</ul>\n<h3>Scenario 3: Mature Platform (Months 7+)</h3>\n<ul>\n<li><strong>Players:</strong> 150+ active</li>\n<li><strong>Races/day:</strong> 50-100+</li>\n<li><strong>Revenue:</strong> Self-sustaining from race tax, upgrades, maintenance</li>\n<li><strong>Strategy:</strong> Eliminate or minimize bonuses, introduce marketplace fees</li>\n<li><strong>Target:</strong> +200-500 ICP/month profit for seasonal prizes, development</li>\n</ul>\n<hr>\n<h2>Break-Even Analysis</h2>\n<h3>By Race Volume</h3>\n<p><strong>To cover 146 ICP/month in bonuses from tax revenue alone:</strong></p>\n<ul>\n<li>Need: 146 ICP/month = ~5 ICP/day in tax</li>\n<li>At 5% tax rate: 100 ICP/day in entry fees</li>\n<li>At avg 0.5 ICP entry: <strong>200 entries/day</strong></li>\n<li>At 8 racers/race: <strong>25 races/day</strong></li>\n</ul>\n<p><strong>Conclusion:</strong> Need ~2x current race frequency to break even on race tax alone.</p>\n<h3>By Player Count</h3>\n<p><strong>To generate 146 ICP/month from upgrades alone:</strong></p>\n<ul>\n<li>Average player spends 30 ICP on upgrades over 3 months = 10 ICP/month</li>\n<li>Need: 146 / 10 = <strong>~15 paying players</strong></li>\n<li>At 30% conversion: <strong>~50 active players total</strong></li>\n</ul>\n<p><strong>Conclusion:</strong> Platform is sustainable at 50+ active players even with bonuses.</p>\n<hr>\n<h2>Phase Transition Plan</h2>\n<h3>Phase 1: Treasury Subsidized (Current)</h3>\n<ul>\n<li><strong>Duration:</strong> Launch to 50+ active players</li>\n<li><strong>Daily Sprint bonus:</strong> 0.5 ICP (Scavenger/Raider)</li>\n<li><strong>Weekly League bonus:</strong> 2 ICP (Scavenger/Raider)</li>\n<li><strong>Monthly Cup bonus:</strong> 5 ICP (Elite/SilentKlan)</li>\n<li><strong>Cost:</strong> 146 ICP/month</li>\n<li><strong>Target:</strong> Onboard players, build engagement</li>\n</ul>\n<h3>Phase 2: Reduced Subsidies</h3>\n<ul>\n<li><strong>Trigger:</strong> 100+ active players OR break-even achieved</li>\n<li><strong>Daily Sprint bonus:</strong> 0.25 ICP (50% reduction)</li>\n<li><strong>Weekly League bonus:</strong> 1 ICP (50% reduction)</li>\n<li><strong>Monthly Cup bonus:</strong> 2.5 ICP (50% reduction)</li>\n<li><strong>Cost:</strong> 73 ICP/month</li>\n<li><strong>Target:</strong> Maintain growth while reducing costs</li>\n</ul>\n<h3>Phase 3: Market-Driven</h3>\n<ul>\n<li><strong>Trigger:</strong> 200+ active players OR consistent profitability</li>\n<li><strong>Daily Sprint bonus:</strong> 0 ICP (Scavenger only gets 0.1 ICP)</li>\n<li><strong>Weekly League bonus:</strong> 0 ICP (eliminate)</li>\n<li><strong>Monthly Cup bonus:</strong> Special events only</li>\n<li><strong>Cost:</strong> 10-20 ICP/month (special events)</li>\n<li><strong>Target:</strong> Self-sustaining competitive economy</li>\n</ul>\n<hr>\n<h2>Risk Analysis</h2>\n<h3>Revenue Risks</h3>\n<ol>\n<li><strong>Low player adoption:</strong> Fewer than 50 active players makes treasury subsidy expensive</li>\n<li><strong>Price sensitivity:</strong> Testing prices (0.1x) don't reflect production revenue</li>\n<li><strong>Upgrade resistance:</strong> Players might not value upgrades at 10-60 ICP</li>\n</ol>\n<h3>Cost Risks</h3>\n<ol>\n<li><strong>Bonus dependency:</strong> Players expect bonuses, hard to remove</li>\n<li><strong>Race frequency:</strong> More races = more bonus costs</li>\n<li><strong>Infrastructure scaling:</strong> Canister costs increase with usage</li>\n</ol>\n<h3>Mitigation Strategies</h3>\n<ol>\n<li><strong>Gradual price increases:</strong> Start at testing prices, increase over time</li>\n<li><strong>Scrap system:</strong> Let players earn free upgrades through NFT scrapping</li>\n<li><strong>Dynamic bonuses:</strong> Adjust based on actual player count/revenue</li>\n<li><strong>Marketplace fees:</strong> Add revenue stream from secondary trading</li>\n</ol>\n<hr>\n<h2>Long-Term Sustainability</h2>\n<h3>Year 1 Goals</h3>\n<ul>\n<li>Reach 200+ active players</li>\n<li>Achieve break-even or better</li>\n<li>Transition to Phase 2 bonuses</li>\n<li>Establish consistent race participation (30+ races/day)</li>\n</ul>\n<h3>Revenue Targets</h3>\n<ul>\n<li><strong>Conservative:</strong> 500 ICP/month (covers costs + development)</li>\n<li><strong>Moderate:</strong> 1,000 ICP/month (enables seasonal prizes)</li>\n<li><strong>Optimistic:</strong> 2,000+ ICP/month (fund major features)</li>\n</ul>\n<h3>Success Metrics</h3>\n<ul>\n<li>Daily active racers: 50+</li>\n<li>Races per day: 30+</li>\n<li>Average revenue per user: 15-30 ICP/month</li>\n<li>Player retention: 40%+ month-over-month</li>\n<li>Treasury growth: Positive after month 6</li>\n</ul>\n<hr>\n<h2>Worst-Case Scenario: New Player Analysis</h2>\n<h3>Scenario: $15 Investment, Elite Races Only, No Wins</h3>\n<p><strong>Assumptions:</strong></p>\n<ul>\n<li>Player starts with $15 USD</li>\n<li>ICP price: <strong>$3 USD/ICP</strong> ‚Üí <strong>5.0 ICP starting balance</strong></li>\n<li>Target: Elite Daily Sprint races (4 per day)</li>\n<li>Elite entry fee: <strong>0.10 ICP per race</strong> (current system)</li>\n<li>Outcome: No wins (worst case)</li>\n<li>Maintenance: Included in analysis</li>\n</ul>\n<p><strong>Daily Cost Breakdown:</strong></p>\n<ul>\n<li>4 Elite races √ó 0.10 ICP = <strong>0.4 ICP/day</strong> in entry fees</li>\n<li>Maintenance costs:\n<ul>\n<li>1 Recharge per day (0.1 ICP) = <strong>0.1 ICP/day</strong></li>\n<li>Occasional repairs (0.05 ICP avg) = <strong>~0.02 ICP/day average</strong></li>\n</ul>\n</li>\n<li><strong>Total daily cost: 0.52 ICP/day</strong></li>\n</ul>\n<p><strong>How Long Can They Race?</strong></p>\n<ul>\n<li>Starting balance: 5.0 ICP</li>\n<li>Daily cost: 0.52 ICP</li>\n<li><strong>Duration: 9.6 days of racing</strong></li>\n<li><strong>Total races entered: ~38-39 Elite races</strong></li>\n</ul>\n<p><strong>Financial Summary:</strong></p>\n<ul>\n<li>Initial investment: $15 (5.0 ICP)</li>\n<li>Total races: 38-39 Elite races</li>\n<li>Cost per race: ~$0.30 USD (0.10 ICP)</li>\n<li>Maintenance: ~$1.80 (0.6 ICP for recharge/repairs over 10 days)</li>\n<li>ROI: $0 (no wins assumed)</li>\n<li><strong>Net loss: -$15 (-100%)</strong></li>\n</ul>\n<p><strong>Key Insights:</strong></p>\n<ol>\n<li><strong>Reasonable for learning:</strong> 38-39 races provides substantial opportunity to learn and improve</li>\n<li><strong>Cost per race:</strong> At $0.30/race, this is affordable entertainment value</li>\n<li><strong>Reality check:</strong> Winning even 1-2 races significantly extends racing duration:\n<ul>\n<li>1 win @ 5th place or better recovers 0.3-1.5 ICP</li>\n<li>2-3 wins could extend racing by 5-10 additional races</li>\n</ul>\n</li>\n<li><strong>Elite class reality:</strong> With 38 races, players have real opportunity to:\n<ul>\n<li>Learn race mechanics and strategy</li>\n<li>Win some races and recover costs</li>\n<li>Build competitive experience</li>\n</ul>\n</li>\n</ol>\n<p><strong>Expected Outcome (More Realistic):</strong></p>\n<ul>\n<li>38 races entered</li>\n<li>Expected wins: 3-8 races (8-20% win rate for average player)</li>\n<li>Prize money: ~1.5-4.0 ICP recovered</li>\n<li><strong>Effective cost: $10.50-15.00 for 38 races</strong></li>\n<li><strong>Cost per race: ~$0.28-0.39 USD</strong></li>\n<li><strong>Net loss: -$10.50 to -$15 (70-100%)</strong></li>\n</ul>\n<hr>\n<h2>Conclusion</h2>\n<p><strong>The platform economics are viable with:</strong></p>\n<ol>\n<li><strong>Phase 1 treasury subsidy</strong> of 100-150 ICP/month for player acquisition</li>\n<li><strong>50+ active players</strong> to reach break-even from upgrades/maintenance alone</li>\n<li><strong>Gradual bonus reduction</strong> as player base grows</li>\n<li><strong>Production pricing</strong> for upgrades/maintenance to generate sustainable revenue</li>\n</ol>\n<p><strong>The class-based fee structure</strong> ensures high-tier races (Elite/SilentKlan) are self-sustaining, while beginner bonuses onboard new players cost-effectively.</p>\n<p><strong>Path to profitability:</strong> Accept 3-6 months of subsidy, grow to 100+ players, transition to Phase 2, achieve self-sustainability by month 6-9.</p>\n"
    },
    {
      "slug": "SCAVENGING_FACTION_BONUSES",
      "metadata": {},
      "content": "<h1>Scavenging Faction Bonuses - Simulation Parameters</h1>\n<h2>Overview</h2>\n<p>This document defines the faction-specific bonuses for the scavenging system, ready for simulation and balancing. All bonuses are <strong>multiplicative</strong> with base mechanics defined in SCAVENGING_SYSTEM.md.</p>\n<hr>\n<h2>Ultra-Rare Factions (78 bots total)</h2>\n<h3>UltimateMaster (1 bot)</h3>\n<p><strong>Parts Multiplier:</strong> 1.20x all zones<br>\n<strong>Battery Drain:</strong> -30% (0.70x consumption), 15% chance to yield double parts<br>\n<strong>Special:</strong> Completes missions 15% faster (5.1h/10.2h/20.4h effective)\n<strong>Philosophy:</strong> Perfect efficiency - faster completion with zero downtime</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>6h mission (4.5h actual): 18-42 parts (base 15-35 √ó 1.2)</li>\n<li>12h mission (9h actual): 48-96 parts (base 40-80 √ó 1.2)</li>\n<li>24h mission (18h actual): 120-240 parts (base 100-200 √ó 1.2)</li>\n<li>Parts/hour: 4.0-9.3 (6h), 5.3-10.7 (12h), 6.7-13.3 (24h)</li>\n<li><strong>Battery: Returns with +20 battery (free recharge worth 0.1 ICP)</strong></li>\n</ul>\n<hr>\n<h3>Golden (27 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.0x (standard)<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> 15% chance parts yield doubles (separate from world buff)<br>\n<strong>Philosophy:</strong> Lucky streaks, quality over quantity</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>Expected value 6h: 17.25-40.25 parts (base + 15% chance √ó 2)</li>\n<li>Expected value 12h: 46-92 parts</li>\n<li>Expected value 24h: 115-230 parts</li>\n<li>Battery cost: Standard (20/40/80)</li>\n</ul>\n<hr>\n<h3>Ultimate (45 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.15x all zones<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> Mission durations -15% (5.1h/10.2h/20.4h effective)<br>\n<strong>Philosophy:</strong> Speed and efficiency, time is parts</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>6h mission (5.1h actual): 17.25-40.25 parts (base 15-35 √ó 1.15)</li>\n<li>12h mission (10.2h actual): 46-92 parts (base 40-80 √ó 1.15)</li>\n<li>24h mission (20.4h actual): 115-230 parts (base 100-200 √ó 1.15)</li>\n<li>Parts/hour rate: 3.38-7.89 (6h), 4.51-9.02 (12h), 5.64-11.27 (24h)</li>\n</ul>\n<hr>\n<h3>Wild (5 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.25x in WastelandSand zones (1.0x others)<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> World buffs are 2x potency BUT 50% chance to get no buff at all (high variance)<br>\n<strong>Condition Loss:</strong> -40% (0.60x damage taken)<br>\n<strong>Philosophy:</strong> Chaotic high-risk/high-reward</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>WastelandSand 6h: 18.75-43.75 parts (base √ó 1.25)</li>\n<li>WastelandSand 12h: 50-100 parts</li>\n<li>WastelandSand 24h: 125-250 parts</li>\n<li>World buff proc: 7.5% chance for double potency (15% √ó 0.5)</li>\n<li>When triggered: +2-6, +4-8, +6-12 point bonuses (instead of +1-3, +2-4, +3-6)</li>\n</ul>\n<hr>\n<h2>Super-Rare Factions (1,266 bots total)</h2>\n<h3>Blackhole (244 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.10x all zones<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> +10% condition damage on scavenging missions, BUT world buffs grant +1-3 Speed AND +1-3 Accel for next race (instead of parts)\n<strong>Philosophy:</strong> Poor scavengers, elite racers - trade durability for performance</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>6h mission: 16.5-38.5 parts (base 15-35 √ó 1.1)</li>\n<li>12h mission: 44-88 parts (base 40-80 √ó 1.1)</li>\n<li>24h mission: 110-220 parts (base 100-200 √ó 1.1)</li>\n<li>Condition damage: 1.1x (slightly higher repair costs)</li>\n<li>World buff bonus: When world buff procs (15% chance), grants +1-3 Speed AND +1-3 Acceleration for next race (instead of bonus parts)</li>\n</ul>\n<hr>\n<h3>Dead (382 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.40x in Dead Machine Fields (1.10x all other zones)<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> Condition damage reduced by 50% (0.50x)<br>\n<strong>Philosophy:</strong> Resilient scavengers, thrive in dangerous zones</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>Dead Machine Fields 6h: 21-49 parts (base √ó 1.4)</li>\n<li>Dead Machine Fields 12h: 56-112 parts</li>\n<li>Dead Machine Fields 24h: 140-280 parts</li>\n<li>Other zones: 16.5-38.5 / 44-88 / 110-220 parts</li>\n<li>Condition loss: Half damage vs other factions</li>\n</ul>\n<hr>\n<h3>Master (640 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.12x all zones<br>\n<strong>Battery Drain:</strong> -25% (0.75x consumption)<br>\n<strong>Special:</strong> Every 10th mission awards double parts (career tracking)<br>\n<strong>Philosophy:</strong> Mastery through repetition and efficiency</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>6h mission: 16.8-39.2 parts (base 15-35 √ó 1.12)</li>\n<li>12h mission: 44.8-89.6 parts (base 40-80 √ó 1.12)</li>\n<li>24h mission: 112-224 parts (base 100-200 √ó 1.12)</li>\n<li>Battery cost: 15 (base 20 √ó 0.75), 30, 60</li>\n<li>10th mission bonus: 2x parts (33.6-78.4 / 89.6-179.2 / 224-448)</li>\n</ul>\n<hr>\n<h2>Rare Factions (3,292 bots total)</h2>\n<h3>Bee (717 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.08x in Abandoned Settlements (1.0x others)<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> +10% parts on 24h missions, world buffs shared (if 2+ Bee faction bots active, all get buff)<br>\n<strong>Philosophy:</strong> Collective benefit, long-term investment</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>Settlements 6h: 16.2-37.8 parts (base √ó 1.08)</li>\n<li>Settlements 12h: 43.2-86.4 parts</li>\n<li>Settlements 24h: 118.8-237.6 parts (base √ó 1.08 √ó 1.10)</li>\n<li>Shared buff: If player owns 2+ Bee bots and one gets world buff, all active Bee bots receive it</li>\n</ul>\n<hr>\n<h3>Food (778 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.12x in Scrap Heaps and Abandoned Settlements (1.0x others)<br>\n<strong>Battery Drain:</strong> -20% (0.80x consumption)<br>\n<strong>Special:</strong> World buffs 30% stronger (+1.3-3.9 instead of +1-3, etc.)<br>\n<strong>Philosophy:</strong> Well-fed bots work better and get stronger buffs</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>Scrap Heaps/Settlements 6h: 16.8-39.2 parts (base √ó 1.12)</li>\n<li>Scrap Heaps/Settlements 12h: 44.8-89.6 parts</li>\n<li>Scrap Heaps/Settlements 24h: 112-224 parts</li>\n<li>Battery cost: 16 (base 20 √ó 0.8), 32, 64</li>\n<li>World buffs: +1.3-3.9 (6h), +2.6-5.2 (12h), +3.9-7.8 (24h)</li>\n</ul>\n<hr>\n<h3>Box (798 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.05x all zones<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> 5% chance to TRIPLE parts found (jackpot!)<br>\n<strong>Philosophy:</strong> Lucky box, low probability high reward</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>Expected value 6h: 16.5-38.5 parts (base √ó 1.05 + 5% √ó 3x)</li>\n<li>Expected value 12h: 44-88 parts</li>\n<li>Expected value 24h: 110-220 parts</li>\n<li>Jackpot proc: 5% chance for 3x multiplier (45-105 / 120-240 / 300-600 parts)</li>\n</ul>\n<hr>\n<h3>Murder (999 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.15x in Dead Machine Fields (1.0x others)<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> +20% condition damage (aggressive scavenging, higher risk)<br>\n<strong>Philosophy:</strong> Fast parts, high cost to durability</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>Dead Machine Fields 6h: 17.25-40.25 parts (base √ó 1.15)</li>\n<li>Dead Machine Fields 12h: 46-92 parts</li>\n<li>Dead Machine Fields 24h: 115-230 parts</li>\n<li>Condition damage: 1.2x (pays more repair costs but gets more parts)</li>\n</ul>\n<hr>\n<h2>Common Factions (5,364 bots total)</h2>\n<h3>Game (1,654 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.0x base<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> Every 5th mission awards +10 bonus parts (achievement system)<br>\n<strong>Philosophy:</strong> Gamification, steady progression rewards</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>6h mission: 15-35 parts (base)</li>\n<li>12h mission: 40-80 parts</li>\n<li>24h mission: 100-200 parts</li>\n<li>5th mission bonus: +10 parts (25-45 / 50-90 / 110-210)</li>\n</ul>\n<hr>\n<h3>Animal (1,701 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.08x in WastelandSand zones (1.0x others)<br>\n<strong>Battery Drain:</strong> Standard<br>\n<strong>Special:</strong> -15% condition loss on 12h/24h missions, world buffs last for 2 races (instead of 1)<br>\n<strong>Philosophy:</strong> Endurance and persistence</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>WastelandSand 6h: 16.2-37.8 parts (base √ó 1.08)</li>\n<li>WastelandSand 12h: 43.2-86.4 parts</li>\n<li>WastelandSand 24h: 108-216 parts</li>\n<li>Condition loss 12h/24h: 0.85x damage</li>\n<li>World buff duration: 48h OR 2 races (whichever comes first)</li>\n</ul>\n<hr>\n<h3>Industrial (2,009 bots)</h3>\n<p><strong>Parts Multiplier:</strong> 1.05x all zones<br>\n<strong>Battery Drain:</strong> -10% (0.90x consumption)<br>\n<strong>Special:</strong> Reduced variance on parts yield (0.90x-1.10x instead of base range)<br>\n<strong>Philosophy:</strong> Consistent, reliable, industrial efficiency</p>\n<p><strong>Simulation Values:</strong></p>\n<ul>\n<li>6h mission: 23.6-27.7 parts (midpoint 25.7 ¬± 10%)</li>\n<li>12h mission: 63-77 parts (midpoint 70 ¬± 10%)</li>\n<li>24h mission: 157.5-192.5 parts (midpoint 175 ¬± 10%)</li>\n<li>Battery cost: 18 (base 20 √ó 0.9), 36, 72</li>\n<li>Philosophy: Most predictable faction for planning</li>\n</ul>\n<hr>\n<h2>Simulation Framework</h2>\n<h3>Key Metrics to Track</h3>\n<ol>\n<li><strong>Parts/Hour Efficiency:</strong> Total parts √∑ mission duration</li>\n<li><strong>Parts/Battery Ratio:</strong> Total parts √∑ battery consumed</li>\n<li><strong>Expected Value (EV):</strong> Account for RNG bonuses (Golden, Box, Wild)</li>\n<li><strong>Long-Term Value:</strong> Track milestone bonuses (Game, Master)</li>\n<li><strong>Total Cost:</strong> Parts - (battery cost √ó ICP price) - (repair cost √ó condition damage)</li>\n</ol>\n<h3>Balance Goals</h3>\n<ul>\n<li><strong>Ultra-rare > Super-rare > Rare > Common</strong> (but not by huge margin)</li>\n<li><strong>High-risk factions</strong> (Wild, Murder) should have highest ceiling, lowest floor</li>\n<li><strong>Consistent factions</strong> (Industrial, Master) should have predictable mid-tier value</li>\n<li><strong>No faction should be >50% better</strong> than another at same tier (prevents must-have meta)</li>\n<li><strong>Common factions should be 80-90% as efficient</strong> as ultra-rare (accessibility)</li>\n</ul>\n<h3>Test Scenarios</h3>\n<ol>\n<li><strong>100 mission simulation</strong> per faction (track variance)</li>\n<li><strong>Battery efficiency comparison</strong> (parts per ICP spent on recharge)</li>\n<li><strong>Career progression</strong> (missions 1-10, 11-50, 51-100)</li>\n<li><strong>Zone preference optimization</strong> (best faction √ó zone combinations)</li>\n<li><strong>Multi-bot strategies</strong> (Bee collective buff, diversified portfolio)</li>\n</ol>\n<hr>\n<h2>Implementation Notes</h2>\n<h3>Phase 1 (MVP)</h3>\n<ul>\n<li>Implement <strong>parts multipliers only</strong> (simplest to code)</li>\n<li>Implement <strong>battery drain modifiers</strong></li>\n<li>Skip special abilities (Golden double, Box triple, Master milestone, etc.)</li>\n</ul>\n<h3>Phase 2 (Special Abilities)</h3>\n<ul>\n<li>Add <strong>probability-based bonuses</strong> (Golden, Box, Wild)</li>\n<li>Add <strong>career tracking</strong> (Game, Master)</li>\n<li>Add <strong>condition modifiers</strong> (Dead, Murder, Animal)</li>\n</ul>\n<h3>Phase 3 (Advanced Features)</h3>\n<ul>\n<li>Add <strong>world buff modifications</strong> (Food 30% stronger, Wild 2x, Animal 2 races)</li>\n<li>Add <strong>collective mechanics</strong> (Bee shared buffs)</li>\n<li>Add <strong>duration modifiers</strong> (Ultimate -15% time)</li>\n</ul>\n<hr>\n<h2>Balance Change Log</h2>\n<p><em>Use this section to track simulation results and balance adjustments</em></p>\n<p><strong>Initial values (Dec 6, 2025):</strong></p>\n<ul>\n<li>All multipliers set to initial estimates</li>\n<li>Awaiting simulation data for balancing</li>\n</ul>\n"
    },
    {
      "slug": "SCAVENGING_SYSTEM",
      "metadata": {},
      "content": "<h1>Scavenging System Design</h1>\n<h2>Overview</h2>\n<p>A parallel progression path for bots that can't compete in races due to low ELO, poor condition, or lack of competitive stats. Bots venture into the wasteland on timed scavenging missions to gather parts for upgrades.</p>\n<h2>Core Concept</h2>\n<p><strong>\"Not fast enough to race? Send them to scrap.\"</strong></p>\n<p>Instead of sitting idle, underperforming bots become resource gatherers. They explore dangerous wasteland zones, burning battery and taking damage while collecting salvage parts. This creates a symbiotic ecosystem where:</p>\n<ul>\n<li>Racing bots earn ICP prizes and reputation</li>\n<li>Scavenging bots earn parts for the garage</li>\n<li>Players can run mixed fleets optimized for different roles</li>\n</ul>\n<hr>\n<h2>Mission Types</h2>\n<h3>1. <strong>Short Expedition</strong> (5 hours)</h3>\n<ul>\n<li><strong>Duration:</strong> 5 hours</li>\n<li><strong>Battery Cost:</strong> 20-35 (based on zone danger)</li>\n<li><strong>Condition Cost:</strong> 10-20</li>\n<li><strong>Parts Yield:</strong> 15-35 parts (RNG + bot stats influence)</li>\n<li><strong>Flavor:</strong> \"Quick sweep of nearby sectors\"</li>\n<li><strong>Risk Level:</strong> Low</li>\n<li><strong>Best For:</strong> Bots between races, maintaining activity</li>\n</ul>\n<h3>2. <strong>Deep Salvage</strong> (11 hours)</h3>\n<ul>\n<li><strong>Duration:</strong> 12 hours</li>\n<li><strong>Battery Cost:</strong> 35-55</li>\n<li><strong>Condition Cost:</strong> 20-35</li>\n<li><strong>Parts Yield:</strong> 40-80 parts (better efficiency)</li>\n<li><strong>Flavor:</strong> \"Navigate deep into the metal graveyards\"</li>\n<li><strong>Risk Level:</strong> Medium</li>\n<li><strong>Best For:</strong> Dedicated scavenging runs, good battery reserves</li>\n</ul>\n<h3>3. <strong>Wasteland Expedition</strong> (23 hours)</h3>\n<ul>\n<li><strong>Duration:</strong> 24 hours</li>\n<li><strong>Battery Cost:</strong> 60-85</li>\n<li><strong>Condition Cost:</strong> 35-60</li>\n<li><strong>Parts Yield:</strong> 100-200 parts (best efficiency)</li>\n<li><strong>Flavor:</strong> \"Journey to the forbidden zones where the old machines rest\"</li>\n<li><strong>Risk Level:</strong> High</li>\n<li><strong>Best For:</strong> Maximum efficiency, maximum world buff potential</li>\n<li><strong>Special:</strong> Chance for rare bonus (extra parts, longer buff duration)</li>\n</ul>\n<hr>\n<h2>Scavenging Zones</h2>\n<p>Different wasteland zones with varying risk/reward profiles:</p>\n<h3><strong>Scrap Heaps</strong> (Safe)</h3>\n<ul>\n<li>Battery drain: 1.0x (base)</li>\n<li>Condition wear: 1.0x (base)</li>\n<li>Parts yield: 1.0x (base)</li>\n<li>Flavor: \"Picked-over junk piles, easy but sparse\"</li>\n</ul>\n<h3><strong>Abandoned Settlements</strong> (Moderate)</h3>\n<ul>\n<li>Battery drain: 1.2x</li>\n<li>Condition wear: 1.3x</li>\n<li>Parts yield: 1.4x</li>\n<li>Flavor: \"Ghost towns with intact tech, guarded by territorial scavengers\"</li>\n</ul>\n<h3><strong>Dead Machine Fields</strong> (Dangerous)</h3>\n<ul>\n<li>Battery drain: 1.5x</li>\n<li>Condition wear: 1.8x</li>\n<li>Parts yield: 2.0x</li>\n<li>Flavor: \"Battlefields of the old wars, rich salvage but unstable terrain\"</li>\n</ul>\n<h3><strong>The Void Pits</strong> (Extreme - Blackhole Faction Bonus)</h3>\n<ul>\n<li>Battery drain: 2.0x</li>\n<li>Condition wear: 2.5x</li>\n<li>Parts yield: 3.0x</li>\n<li>Flavor: \"Where reality frays and the ancient tech still hums with void energy\"</li>\n<li>Special: Blackhole bots take -40% condition damage here</li>\n</ul>\n<hr>\n<h2>Stat Influences on Scavenging</h2>\n<p>Different stats affect scavenging outcomes:</p>\n<h3><strong>Speed</strong></h3>\n<ul>\n<li>Affects completion time variation (-10% to +0% duration at max speed)</li>\n<li>Fast bots finish slightly early, slow bots take full time</li>\n<li>Flavor: \"Speed gets you in and out before trouble arrives\"</li>\n</ul>\n<h3><strong>Power Core (Efficiency)</strong></h3>\n<ul>\n<li>Reduces battery drain (same logarithmic formula as racing)</li>\n<li>High power core = more missions per charge</li>\n<li>Flavor: \"Efficient bots can venture deeper without running dry\"</li>\n</ul>\n<h3><strong>Acceleration</strong></h3>\n<ul>\n<li>Affects escape chance from random events (hazards)</li>\n<li>High acceleration = avoid extra condition damage</li>\n<li>Flavor: \"Quick reflexes dodge falling debris and hostile scavengers\"</li>\n</ul>\n<h3><strong>Stability</strong></h3>\n<ul>\n<li><strong>Primary Scavenging Stat</strong> - reduces condition wear</li>\n<li>High stability = less damage taken during mission</li>\n<li>At 100 stability: -30% condition wear</li>\n<li>At 50 stability: baseline</li>\n<li>At 30 stability: +20% condition wear</li>\n<li>Flavor: \"Stable bots navigate treacherous terrain without breaking down\"</li>\n</ul>\n<h3><strong>Faction Bonuses</strong></h3>\n<ul>\n<li><strong>Box faction:</strong> +15% parts yield in Scrap Heaps (their natural habitat)</li>\n<li><strong>Industrial faction:</strong> -20% battery drain (efficient scavengers)</li>\n<li><strong>Blackhole faction:</strong> -40% condition damage in Void Pits</li>\n<li><strong>Dead faction:</strong> +10% parts yield everywhere (affinity for broken things)</li>\n<li><strong>Golden faction:</strong> Cannot scavenge (too pristine for dirty work)</li>\n</ul>\n<hr>\n<h2>Mission Mechanics</h2>\n<h3><strong>Starting a Mission</strong></h3>\n<pre><code>Tool: garage_start_scavenging\nParameters:\n- token_index: Bot to send\n- mission_type: \"short\" | \"deep\" | \"expedition\"\n- zone: \"scrap_heaps\" | \"settlements\" | \"machine_fields\" | \"void_pits\"\n\nValidation:\n- Bot must have minimum battery (20 for short, 35 for deep, 60 for expedition)\n- Bot must not be in another race (can upgrade/sell/repair while scavenging)\n- Bot can scavenge at any condition level (even critical)\n- No ICP cost - battery consumption is the economic cost\n\nResponse:\n- mission_id\n- expected_completion_time\n- estimated_parts_range\n- world_buff_chance: \"15% chance for Wasteland Resonance (stat buffs)\"\n- warnings (if low condition/battery)\n</code></pre>\n<h3><strong>During Mission</strong></h3>\n<ul>\n<li>Bot cannot race (locked in mission)</li>\n<li>Bot CAN be upgraded, repaired, recharged, or listed for sale (maintenance continues)</li>\n<li>Status shows: \"Scavenging [Zone] - Returns in X hours\"</li>\n<li>Mission cannot be cancelled (committed once started)</li>\n<li>Mission ID stored on bot's racing stats</li>\n<li>If sold: new owner receives bot when mission completes with all rewards</li>\n</ul>\n<h3><strong>Completing Mission</strong></h3>\n<pre><code>Tool: garage_complete_scavenging\nParameters:\n- token_index: Bot to retrieve\n\nAuto-executes when mission duration elapsed:\n- Deducts battery (based on zone, power core, random variance)\n- Deducts condition (based on zone, stability, acceleration for hazards)\n- Awards parts (based on mission type, zone multiplier, faction bonus, RNG)\n- Rolls for random events (positive/negative/neutral)\n- Applies world buff if \"Wasteland Resonance\" event triggered (15% chance)\n- Adds to bot's scavenging career stats\n- Returns detailed breakdown of results\n\nResponse:\n- parts_found: Nat\n- battery_consumed: Nat\n- condition_lost: Nat\n- world_buff_applied: ?{stats: [Text], bonuses: [Nat], expires_in_hours: 48} (only if resonance event)\n- events_encountered: [Text] (flavor events - positive/negative/neutral)\n- bonus_rewards: ?Text (rare finds)\n</code></pre>\n<hr>\n<h2>World Buff Mechanics</h2>\n<h3><strong>Expiration System</strong></h3>\n<ul>\n<li>World buffs expire <strong>48 hours</strong> after being earned</li>\n<li>Timer starts when scavenging mission completes, not when buff is applied in race</li>\n<li>If bot doesn't race within 48h, buff disappears (wasted)</li>\n<li>Encourages active play - can't indefinitely park buffed bots</li>\n</ul>\n<h3><strong>Consumption vs Expiration</strong></h3>\n<ul>\n<li><strong>Consumed:</strong> Buff used in a race ‚Üí removed after race completes</li>\n<li><strong>Expired:</strong> 48h passed without racing ‚Üí buff removed automatically</li>\n<li>System checks expiration on every bot stat query (getCurrentStats)</li>\n</ul>\n<h3><strong>Strategic Timing</strong></h3>\n<p>Optimal buff usage:</p>\n<ol>\n<li>Complete 24h scavenging expedition</li>\n<li>Get lucky with 15% world buff proc</li>\n<li>Recharge bot to low battery for overcharge (if desired)</li>\n<li>Enter race within 48h to use both buffs</li>\n<li>Buff consumed after race, cycle repeats</li>\n</ol>\n<p><strong>Warning Messages:</strong></p>\n<ul>\n<li>When viewing bot with buff: \"World buff expires in X hours\"</li>\n<li>At 12h remaining: \"‚ö†Ô∏è World buff expires soon! (12h remaining)\"</li>\n<li>At 2h remaining: \"üö® World buff expires very soon! (2h remaining)\"</li>\n<li>On expiration: \"World buff has expired and been removed.\"</li>\n</ul>\n<h3><strong>Why 48 Hours?</strong></h3>\n<ul>\n<li>Long enough: Players can plan around race schedules</li>\n<li>Short enough: Can't hoard buffed bots indefinitely</li>\n<li>Balances: Competitive advantage vs active engagement</li>\n<li>Creates urgency: \"I got a buff, better race soon!\"</li>\n</ul>\n<hr>\n<h2>Random Events &#x26; Flavor</h2>\n<p>During scavenging, bots can encounter hazards that affect outcomes:</p>\n<h3><strong>Positive Events</strong> (20% chance total)</h3>\n<ul>\n<li>\"Discovered an intact part cache\" ‚Üí +20% parts (10% chance)</li>\n<li>\"Found a salvage jackpot\" ‚Üí +50% parts (5% chance - rare!)</li>\n<li>\"Efficient route through the debris\" ‚Üí -20% battery used (10% chance)</li>\n<li>\"Sturdy terrain, minimal wear\" ‚Üí -30% condition lost (10% chance)</li>\n<li><strong>\"Wasteland Resonance discovered!\"</strong> ‚Üí <strong>World Buff applied</strong> (15% chance)\n<ul>\n<li><strong>6h mission:</strong> +1-3 points to one random stat for next race</li>\n<li><strong>12h mission:</strong> +2-4 points to two random stats for next race</li>\n<li><strong>24h mission:</strong> +3-6 points to three random stats for next race</li>\n<li>Buff consumed after next race OR expires in 48 hours (whichever comes first)</li>\n<li>Prevents parking buffed bots - use it or lose it!</li>\n<li>Flavor: <em>\"Your bot has absorbed the ancient energy of the wastes...\"</em></li>\n</ul>\n</li>\n</ul>\n<h3><strong>Negative Events</strong> (30% chance)</h3>\n<ul>\n<li>\"Unstable ground collapsed\" ‚Üí +30% condition damage (acceleration check to avoid)</li>\n<li>\"Lost in the wastes\" ‚Üí +20% battery drain</li>\n<li>\"Scavenger gang ambush\" ‚Üí +40% condition damage (speed helps escape)</li>\n<li>\"Contaminated zone\" ‚Üí +50% battery drain + 20% condition damage</li>\n</ul>\n<h3><strong>Neutral Flavor</strong> (50% chance)</h3>\n<ul>\n<li>\"Uneventful scavenging run, salvage collected\"</li>\n<li>\"Navigated the debris fields methodically\"</li>\n<li>\"Standard haul from the wasteland\"</li>\n</ul>\n<hr>\n<h2>Career Tracking</h2>\n<p>Add to <code>PokedBotRacingStats</code>:</p>\n<pre class=\"language-motoko\"><code class=\"language-motoko\">scavengingMissions <span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>        <span class=\"token comment\">// Total missions completed</span>\ntotalPartsScavenged <span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// Lifetime parts found</span>\nscavengingReputation <span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// Separate from racing reputation</span>\nbestHaul <span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>                  <span class=\"token comment\">// Biggest single mission haul</span>\nactiveMission <span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">{</span>               <span class=\"token comment\">// Current mission if any</span>\n  missionId <span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  missionType <span class=\"token punctuation\">:</span> ScavengingType<span class=\"token punctuation\">;</span>\n  zone <span class=\"token punctuation\">:</span> ScavengingZone<span class=\"token punctuation\">;</span>\n  startTime <span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n  endTime <span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nworldBuff <span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">{</span>                   <span class=\"token comment\">// Active world buff if any</span>\n  stats <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Text<span class=\"token punctuation\">,</span> Nat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>         <span class=\"token comment\">// [(\"speed\", 3), (\"acceleration\", 2)]</span>\n  expiresAt <span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>               <span class=\"token comment\">// Timestamp when buff expires (48h from creation)</span>\n  appliedAt <span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>               <span class=\"token comment\">// When the buff was earned</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><strong>Scavenging Reputation Tiers</strong></h3>\n<ul>\n<li><strong>0-99:</strong> \"Trash Picker\"</li>\n<li><strong>100-499:</strong> \"Salvage Runner\"</li>\n<li><strong>500-1499:</strong> \"Wasteland Scout\"</li>\n<li><strong>1500-3999:</strong> \"Master Scavenger\"</li>\n<li><strong>4000+:</strong> \"Legend of the Wastes\"</li>\n</ul>\n<p>Earn 1 reputation per mission completed (regardless of success).</p>\n<hr>\n<h2>Economic Balance</h2>\n<h3><strong>Parts Yield Math</strong></h3>\n<pre><code>Base parts for mission type:\n- Short (6h): 25 parts average (4.2 parts/hour)\n- Deep (12h): 60 parts average (5.0 parts/hour)  \n- Expedition (24h): 150 parts average (6.25 parts/hour)\n\nEfficiency scaling rewards longer commitment!\n\nMultipliers:\n√ó Zone multiplier (1.0x to 3.0x)\n√ó Faction bonus (1.0x to 1.15x)\n√ó Random variance (0.8x to 1.2x) (softer than before)\n√ó Event bonus (1.0x to 1.5x if lucky)\n\nExample (Expedition in Dead Machine Fields):\n150 √ó 2.0 (zone) √ó 1.1 (Dead faction) √ó 1.1 (good RNG) √ó 1.2 (found cache)\n= 150 √ó 2.0 √ó 1.1 √ó 1.1 √ó 1.2 = 436 parts\n</code></pre>\n<h3><strong>Comparison to Racing</strong></h3>\n<ul>\n<li><strong>Average race:</strong> Win = 10-30 parts, Place/Show = 5-15 parts, Loss = 0-3 parts</li>\n<li><strong>Entry fee:</strong> 0.5-2.0 ICP</li>\n<li><strong>Scavenging cost:</strong> No ICP fee! Only battery (which costs ICP to recharge anyway)</li>\n</ul>\n<p><strong>Balance Goal:</strong></p>\n<ul>\n<li>Racing is more lucrative for competitive bots (ICP prizes + parts + instant)</li>\n<li>Scavenging is reliable income for weak bots (guaranteed parts, no competition, chance at buffs)</li>\n<li>Scavenging efficiency peaks with stability-focused builds (creates build diversity)</li>\n<li>World buffs create strategic timing opportunities (24h scavenge ‚Üí recharge for overcharge ‚Üí race with potential double buffs)</li>\n<li>15% world buff chance adds excitement without guaranteeing advantage</li>\n</ul>\n<hr>\n<h2>Strategic Considerations</h2>\n<h3><strong>Fleet Optimization</strong></h3>\n<p>Players might build specialized bots:</p>\n<ul>\n<li><strong>Racing Champions:</strong> High speed/acceleration, maintained at 100% condition for competition</li>\n<li><strong>Scavenger Drones:</strong> High stability/power core, run constantly on 24h expeditions</li>\n<li><strong>Hybrid Scouts:</strong> Balanced stats, can race OR scavenge as needed</li>\n</ul>\n<h3><strong>Opportunity Cost</strong></h3>\n<ul>\n<li>Scavenging locks bot for hours ‚Üí can't race during that time</li>\n<li>If bot could win races ‚Üí racing is better ROI</li>\n<li>If bot can't compete ‚Üí scavenging is only way to contribute</li>\n</ul>\n<h3><strong>Synergy with Upgrades</strong></h3>\n<ul>\n<li>Scavenging provides parts for upgrading racing bots</li>\n<li>Upgraded racing bots earn ICP to buy more scavenger bots</li>\n<li>Creates economic flywheel for active players</li>\n</ul>\n<hr>\n<h2>UI/UX Considerations</h2>\n<h3><strong>Bot Status Display</strong></h3>\n<pre><code>Status: \"Scavenging Expedition - Dead Machine Fields\"\nReturns: \"12h 34m\" (countdown timer)\nExpected Haul: \"60-120 parts\"\nCurrent Condition: Hidden (locked during mission)\n</code></pre>\n<h3><strong>Mission Selection Interface</strong></h3>\n<p>Show comparison table:</p>\n<pre><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Mission      ‚îÇ Duration ‚îÇ Battery    ‚îÇ Condition ‚îÇ Parts Yield‚îÇ Buff Potential     ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ Short        ‚îÇ 6h       ‚îÇ 20-35      ‚îÇ 10-20     ‚îÇ 15-35      ‚îÇ 15%: +1-3pts (1stat)‚îÇ\n‚îÇ Deep         ‚îÇ 12h      ‚îÇ 35-55      ‚îÇ 20-35     ‚îÇ 40-80      ‚îÇ 15%: +2-4pts (2stats)‚îÇ\n‚îÇ Expedition   ‚îÇ 24h      ‚îÇ 60-85      ‚îÇ 35-60     ‚îÇ 100-200    ‚îÇ 15%: +3-6pts (3stats)‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\nYour bot (Stability: 72, Power Core: 58):\n‚úì Reduced condition wear: -15%\n‚úì Reduced battery drain: -25%\n</code></pre>\n<h3><strong>Completion Notification (with World Buff)</strong></h3>\n<pre><code>üîß Scavenging Complete!\n\nPokedBot #4079 has returned from the Dead Machine Fields!\n\nParts Found: 187 (+40% from cache discovery!)\nBattery Used: 68 (-12 from high power core)\nCondition Lost: 35 (-15 from high stability)\n\n‚ú® WASTELAND RESONANCE DISCOVERED! ‚ú®\nYour bot has absorbed ancient wasteland energy!\n\nWorld Buff Applied:\n‚ú® Speed +5 (next race only)\n‚ú® Acceleration +4 (next race only)\n‚ú® Stability +3 (next race only)\n\n‚è∞ Buff expires in 48 hours if unused!\n\nEvents:\n‚Ä¢ Discovered intact part cache (+40% parts)\n‚Ä¢ Dodged unstable terrain (acceleration check: PASS)\n‚Ä¢ ‚ö° WASTELAND RESONANCE ‚ö° (15% chance - lucky!)\n\nTotal Scavenging Missions: 47\nReputation: Master Scavenger (Tier 4)\n</code></pre>\n<h3><strong>Completion Notification (no World Buff)</strong></h3>\n<pre><code>üîß Scavenging Complete!\n\nPokedBot #4079 has returned from the Scrap Heaps.\n\nParts Found: 28\nBattery Used: 32\nCondition Lost: 18\n\nEvents:\n‚Ä¢ Uneventful scavenging run, salvage collected\n\nTotal Scavenging Missions: 48\nReputation: Master Scavenger (Tier 4)\n</code></pre>\n<hr>\n<h2>Wasteland Lore Integration</h2>\n<h3><strong>Flavor Text by Zone</strong></h3>\n<p><strong>Scrap Heaps:</strong></p>\n<blockquote>\n<p>\"The outer wastes. Mountains of twisted metal and broken dreams. Every scavenger's first hunting ground, picked clean a thousand times over. But there's always something left if you know where to look.\"</p>\n</blockquote>\n<p><strong>Abandoned Settlements:</strong></p>\n<blockquote>\n<p>\"Ghost towns from the before-times. Radiation's mostly gone, but the automated defenses aren't. Quick bots slip in, grab what they can, and get out before the turrets wake up.\"</p>\n</blockquote>\n<p><strong>Dead Machine Fields:</strong></p>\n<blockquote>\n<p>\"Where the titan-wars ended. Colossal war machines lie half-buried in the sand, their fusion cores still hot after centuries. Rich pickings for those brave (or desperate) enough to risk it.\"</p>\n</blockquote>\n<p><strong>The Void Pits:</strong></p>\n<blockquote>\n<p>\"Places where reality broke during the Blackhole Incident. Time doesn't flow right. Machines from futures that never happened lie scattered in impossible configurations. Only the void-touched dare venture here.\"</p>\n</blockquote>\n<h3><strong>Scavenger Ranks Flavor</strong></h3>\n<ul>\n<li><strong>Trash Picker:</strong> \"You paw through garbage. It's honest work.\"</li>\n<li><strong>Salvage Runner:</strong> \"You know the safe routes and the dangerous ones.\"</li>\n<li><strong>Wasteland Scout:</strong> \"The wastes speak to you. You hear where the good salvage hides.\"</li>\n<li><strong>Master Scavenger:</strong> \"Legends say you once found a pristine pre-war fusion core.\"</li>\n<li><strong>Legend of the Wastes:</strong> \"They say you've seen the Deep Void and returned unchanged. They say a lot of things.\"</li>\n</ul>\n<hr>\n<h2>Implementation Phases</h2>\n<h3><strong>Phase 1: Core System (MVP)</strong></h3>\n<ul>\n<li>All 3 mission types (6h/12h/24h)</li>\n<li>Single zone (Scrap Heaps) with 1.0x multiplier</li>\n<li>Basic stat influences (stability reduces condition loss, power core reduces battery)</li>\n<li>Simple parts calculation with random event system</li>\n<li>15% chance for world buff event (Wasteland Resonance)</li>\n<li>Two MCP tools: <code>garage_start_scavenging</code>, <code>garage_complete_scavenging</code></li>\n<li>World buff tracked on bot (if triggered), consumed after next race or 48h expiration</li>\n<li>Auto-cleanup of expired buffs when checking bot stats</li>\n</ul>\n<h3><strong>Phase 2: Zones &#x26; Missions</strong></h3>\n<ul>\n<li>Add all 3 mission types</li>\n<li>Add all 4 zones with multipliers</li>\n<li>Implement faction bonuses</li>\n<li>Random events system</li>\n</ul>\n<h3><strong>Phase 3: Career &#x26; Progression</strong></h3>\n<ul>\n<li>Scavenging reputation tracking</li>\n<li>Career stats on bot profile</li>\n<li>Leaderboard for best scavengers</li>\n<li>Achievement system</li>\n</ul>\n<h3><strong>Phase 4: Advanced Features</strong></h3>\n<ul>\n<li>Mission bundles (send multiple bots)</li>\n<li>Zone discovery (unlock harder zones with reputation)</li>\n<li>Rare artifact drops (tradeable NFTs?)</li>\n<li>Scavenger guilds (team missions)</li>\n</ul>\n<hr>\n<h2>Open Questions</h2>\n<ol>\n<li>\n<p><strong>Should scavenging compete with racing for bot time?</strong></p>\n<ul>\n<li>YES: Forces strategic choice (race vs scavenge)</li>\n<li>Creates more interesting fleet management</li>\n</ul>\n</li>\n<li>\n<p><strong>Should there be scavenging-only bots (can't race)?</strong></p>\n<ul>\n<li>Interesting design space: bots below certain ELO threshold can only scavenge</li>\n<li>Creates clear role separation</li>\n</ul>\n</li>\n<li>\n<p><strong>Should parts be fungible or zone-specific?</strong></p>\n<ul>\n<li>Fungible: Simpler, all parts are equal</li>\n<li>Zone-specific: \"Void parts\" for Blackhole upgrades, etc. (more complex but flavorful)</li>\n</ul>\n</li>\n<li>\n<p><strong>Can damaged bots scavenge?</strong></p>\n<ul>\n<li>YES (current design): Even critical bots can scavenge, they just take MORE damage</li>\n<li>Makes scavenging a \"desperation\" option for damaged fleets</li>\n</ul>\n</li>\n<li>\n<p><strong>Should there be social features?</strong></p>\n<ul>\n<li>Shared scavenging spots (first to complete gets bonus)</li>\n<li>Cooperative missions (pool bots for big haul)</li>\n<li>Scavenger market (trade parts directly)</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2>Success Metrics</h2>\n<ul>\n<li><strong>Adoption:</strong> % of bots that have completed at least 1 scavenging mission</li>\n<li><strong>Fleet Diversity:</strong> % of players running both racers and scavengers</li>\n<li><strong>Economic Health:</strong> Parts earned via scavenging vs racing (target: 40/60 split)</li>\n<li><strong>Engagement:</strong> Average scavenging missions per active bot per week</li>\n<li><strong>Retention:</strong> Do scavenging bots keep players engaged between races?</li>\n</ul>\n<hr>\n<h2>Final Thoughts</h2>\n<p>This system transforms \"weak\" or \"damaged\" bots from liabilities into assets. Instead of benching a bot with 20% condition and 1200 ELO, send it on a scavenging run. The wasteland doesn't care if you're fast‚Äîonly if you're tough enough to survive.</p>\n<p>It also creates interesting meta-strategy: Do you maintain a pristine racing stable, or run a scrappy operation with battle-worn scavengers funding your champions? Both paths viable, both flavorful, both engaging.</p>\n<p><strong>Core Philosophy:</strong> <em>Every bot has value. Fast ones race. Tough ones scavenge. Smart players use both.</em></p>\n"
    },
    {
      "slug": "TECHNICAL_REFERENCE",
      "metadata": {
        "title": "Technical Reference",
        "description": "Data structures, timers, security, and dependencies",
        "order": 8
      },
      "content": "<h1>PokedBots Racing - Technical Reference</h1>\n<p><strong>Deep Technical Documentation</strong></p>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/MCP_TOOLS\">‚Üê MCP Tools</a> | üìñ <a href=\"/docs/OVERVIEW\">Back to Overview</a></p>\n<hr>\n<h2>Automated Processes</h2>\n<h3>Race Scheduler Timer</h3>\n<p><strong>Status:</strong> Not yet implemented (manual race creation via RaceCalendar)\n<strong>Planned Frequency:</strong> Every 1-2 hours</p>\n<p><strong>Planned Logic:</strong></p>\n<ul>\n<li>Create 2-3 races scheduled 6-24 hours ahead</li>\n<li>Randomize distance (5-50km), terrain, class</li>\n<li>Set entry fees based on class (base √ó multiplier):\n<ul>\n<li>Scavenger: 1x base (0.05-0.2 ICP)</li>\n<li>Raider: 2x base (0.1-0.4 ICP)</li>\n<li>Elite: 5x base (0.25-1.0 ICP)</li>\n<li>SilentKlan: 10x base (0.5-2.0 ICP)</li>\n</ul>\n</li>\n<li>Apply 5% platform tax to prize pool</li>\n<li>Apply platform bonuses (Scavenger/Raider only):\n<ul>\n<li>Daily Sprints: +0.5 ICP</li>\n<li>Weekly Leagues: +2 ICP</li>\n<li>Monthly Cups: +5 ICP (Elite/SilentKlan)</li>\n</ul>\n</li>\n<li>SilentKlan races restricted to GodClass/Master with 10+ wins</li>\n</ul>\n<h3>Race Execution Timer</h3>\n<p><strong>Status:</strong> Implemented via timer-tool\n<strong>Trigger:</strong> Race startTime reached</p>\n<p><strong>Logic:</strong></p>\n<ol>\n<li>Find races with <code>status=#Upcoming</code> and <code>startTime &#x3C;= now</code></li>\n<li>Change status to <code>#InProgress</code></li>\n<li>Run deterministic simulation:\n<ul>\n<li>Calculate race time for each participant</li>\n<li>Apply terrain bonuses/penalties</li>\n<li>Add randomness (seed: raceId + startTime)</li>\n<li>Sort by completion time</li>\n</ul>\n</li>\n<li>Distribute prizes:\n<ul>\n<li>1st: 50% of prize pool</li>\n<li>2nd: 30% of prize pool</li>\n<li>3rd: 20% of prize pool</li>\n</ul>\n</li>\n<li>Update bot stats:\n<ul>\n<li>Increment <code>racesEntered</code></li>\n<li>Increment <code>wins</code>/<code>places</code>/<code>shows</code></li>\n<li>Add prize to <code>totalScrapEarned</code></li>\n<li>Reduce <code>condition</code> by 15</li>\n</ul>\n</li>\n<li>Change status to <code>#Completed</code></li>\n</ol>\n<p><strong>Note:</strong> Uses IC randomness beacon for deterministic seed generation</p>\n<h3>Upgrade Completion Timer</h3>\n<p><strong>Status:</strong> Implemented via timer-tool\n<strong>Trigger:</strong> Individual upgrade session <code>endsAt</code> timestamp</p>\n<p><strong>Logic:</strong></p>\n<ol>\n<li>Scheduled when upgrade starts (<code>endsAt = startedAt + 12 hours</code>)</li>\n<li>On completion:\n<ul>\n<li>Roll stat gain: 1-3 points base</li>\n<li>Apply faction modifiers:\n<ul>\n<li>UltimateMaster: 50% chance for 2x gain</li>\n<li>Wild Bot: ¬±10% variance (can be 0 or higher)</li>\n<li>Others: Standard gain</li>\n</ul>\n</li>\n<li>Add bonus to appropriate stat (speedBonus/powerCoreBonus/etc.)</li>\n<li>Add 50 XP</li>\n<li>Clear <code>upgradeEndsAt</code> timestamp</li>\n<li>Remove from <code>activeUpgrades</code> map</li>\n</ul>\n</li>\n</ol>\n<h3>Robot Decay System</h3>\n<p><strong>Status:</strong> ‚úÖ Implemented\n<strong>Frequency:</strong> Every hour (self-rescheduling timer)</p>\n<p><strong>Logic:</strong></p>\n<ul>\n<li>Runs on ALL initialized bots (not just inactive ones)</li>\n<li>Condition decay: ~0.21 per hour (~5 per day)</li>\n<li>Calibration decay: ~0.125 per hour (~3 per day)</li>\n<li>Faction modifiers:\n<ul>\n<li>Wild Bot: 20% faster decay (chaotic systems)</li>\n<li>UltimateMaster: 40% slower decay (supreme construction)</li>\n<li>Others: Standard decay rate</li>\n</ul>\n</li>\n<li>Minimum values: condition 30, calibration 30</li>\n<li>Drives maintenance economy (forces recharge/repair usage)</li>\n</ul>\n<hr>\n<h2>Data Structures</h2>\n<h3>Key Types</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// PokedBots-specific racing stats</span>\n<span class=\"token keyword\">type</span> PokedBotRacingStats <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  tokenIndex<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  ownerPrincipal<span class=\"token punctuation\">:</span> Principal<span class=\"token punctuation\">;</span>\n  faction<span class=\"token punctuation\">:</span> FactionType<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// UltimateMaster/Wild/Golden/Ultimate/Blackhole/Dead/Master/Bee/Food/Box/Murder/Game/Animal/Industrial</span>\n  \n  <span class=\"token comment\">// Upgrade bonuses (from scrapyard upgrades)</span>\n  speedBonus<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  powerCoreBonus<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  accelerationBonus<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  stabilityBonus<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Dynamic stats</span>\n  battery<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// 0-100, drains by 10 per race</span>\n  condition<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// 0-100, affects performance</span>\n  calibration<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>     <span class=\"token comment\">// 0-100, initial 80</span>\n  experience<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// XP earned from races/upgrades</span>\n  \n  <span class=\"token comment\">// Preferences (derived from metadata)</span>\n  preferredDistance<span class=\"token punctuation\">:</span> Distance<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// ShortSprint/MediumHaul/LongTrek</span>\n  preferredTerrain<span class=\"token punctuation\">:</span> Terrain<span class=\"token punctuation\">;</span>    <span class=\"token comment\">// ScrapHeaps/WastelandSand/MetalRoads</span>\n  \n  <span class=\"token comment\">// Career stats</span>\n  racesEntered<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  wins<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  places<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 2nd place finishes</span>\n  shows<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>           <span class=\"token comment\">// 3rd place finishes</span>\n  totalScrapEarned<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  factionReputation<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// Timestamps</span>\n  activatedAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n  lastRecharged<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Int<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 6-hour cooldown</span>\n  lastRepaired<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Int<span class=\"token punctuation\">;</span>   <span class=\"token comment\">// 12-hour cooldown</span>\n  lastDiagnostics<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Int<span class=\"token punctuation\">;</span>\n  lastRaced<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Int<span class=\"token punctuation\">;</span>\n  upgradeEndsAt<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Int<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 12-hour upgrade duration</span>\n  listedForSale<span class=\"token punctuation\">:</span> Bool<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Marketplace listing status</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Generic racing stats (used by simulator)</span>\n<span class=\"token keyword\">type</span> RacingStats <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  speed<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 30-100</span>\n  powerCore<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// 30-100 (endurance)</span>\n  acceleration<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>   <span class=\"token comment\">// 30-100</span>\n  stability<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// 30-100</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> Race <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  raceId<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  name<span class=\"token punctuation\">:</span> Text<span class=\"token punctuation\">;</span>               <span class=\"token comment\">// e.g., \"Wasteland Sprint #42\"</span>\n  distance<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// km</span>\n  terrain<span class=\"token punctuation\">:</span> Terrain<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// ScrapHeaps/WastelandSand/MetalRoads</span>\n  raceClass<span class=\"token punctuation\">:</span> RaceClass<span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Scavenger/Raider/Elite/SilentKlan</span>\n  entryFee<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// ICP e8s</span>\n  maxEntries<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>          <span class=\"token comment\">// Usually 10</span>\n  startTime<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n  duration<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// Race duration in seconds</span>\n  entryDeadline<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// 30 min before startTime</span>\n  createdAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n  entries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>RaceEntry<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// Participants</span>\n  status<span class=\"token punctuation\">:</span> RaceStatus<span class=\"token punctuation\">;</span>       <span class=\"token comment\">// Upcoming/InProgress/Completed/Cancelled</span>\n  results<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">[</span>RaceResult<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// Post-race results</span>\n  prizePool<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>           <span class=\"token comment\">// Total prize (entry fees + sponsors)</span>\n  platformTax<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// 5% tax (was silentKlanTax)</span>\n  sponsors<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>Sponsor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// Race sponsors</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> RaceEntry <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  nftId<span class=\"token punctuation\">:</span> Text<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// Token index as text</span>\n  owner<span class=\"token punctuation\">:</span> Principal<span class=\"token punctuation\">;</span>\n  entryFee<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  enteredAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> RaceResult <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  nftId<span class=\"token punctuation\">:</span> Text<span class=\"token punctuation\">;</span>\n  owner<span class=\"token punctuation\">:</span> Principal<span class=\"token punctuation\">;</span>\n  position<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>            <span class=\"token comment\">// 1st, 2nd, 3rd...</span>\n  finalTime<span class=\"token punctuation\">:</span> Float<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// Race completion time</span>\n  prizeAmount<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>         <span class=\"token comment\">// ICP e8s won</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> Sponsor <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  sponsor<span class=\"token punctuation\">:</span> Principal<span class=\"token punctuation\">;</span>\n  amount<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// ICP e8s contributed</span>\n  message<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span>Text<span class=\"token punctuation\">;</span>           <span class=\"token comment\">// Optional message (max 100 chars)</span>\n  timestamp<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> UpgradeType <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  #Velocity<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// +Speed</span>\n  #PowerCore<span class=\"token punctuation\">;</span>     <span class=\"token comment\">// +Power Core</span>\n  #Thruster<span class=\"token punctuation\">;</span>      <span class=\"token comment\">// +Acceleration</span>\n  #Gyro<span class=\"token punctuation\">;</span>          <span class=\"token comment\">// +Stability</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> UpgradeSession <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  tokenIndex<span class=\"token punctuation\">:</span> Nat<span class=\"token punctuation\">;</span>\n  upgradeType<span class=\"token punctuation\">:</span> UpgradeType<span class=\"token punctuation\">;</span>\n  startedAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n  endsAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// startedAt + 12 hours</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Faction bonuses during upgrades</span>\n<span class=\"token comment\">// UltimateMaster: 50% chance for 2x stat gain</span>\n<span class=\"token comment\">// Wild Bot: ¬±10% variance (unstable)</span>\n<span class=\"token comment\">// Others: Standard 1-3 stat points</span>\n</code></pre>\n<h3>Stable Variables</h3>\n<pre class=\"language-motoko\"><code class=\"language-motoko\"><span class=\"token comment\">// Garage Manager state</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_garageStats<span class=\"token punctuation\">:</span> Map<span class=\"token punctuation\">.</span>Map<span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span>Nat<span class=\"token punctuation\">,</span> PokedBotRacingStats<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_activeUpgrades<span class=\"token punctuation\">:</span> Map<span class=\"token punctuation\">.</span>Map<span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span>Nat<span class=\"token punctuation\">,</span> UpgradeSession<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Race Manager state</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_races<span class=\"token punctuation\">:</span> Map<span class=\"token punctuation\">.</span>Map<span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span>Nat<span class=\"token punctuation\">,</span> Race<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_nextRaceId<span class=\"token punctuation\">:</span> Nat <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Leaderboard state</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_leaderboardEntries<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Principal<span class=\"token punctuation\">,</span> LeaderboardEntry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// NFT Stats Manager state (base stats from metadata)</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_nftStats<span class=\"token punctuation\">:</span> Map<span class=\"token punctuation\">.</span>Map<span class=\"token operator\">&amp;</span>#x3C<span class=\"token punctuation\">;</span>Nat<span class=\"token punctuation\">,</span> NFTStats<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_schema<span class=\"token punctuation\">:</span> TraitSchema<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Marketplace cache</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_marketplaceCache<span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token punctuation\">{</span>\n  listings<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>Nat32<span class=\"token punctuation\">,</span> ExtIntegration<span class=\"token punctuation\">.</span>Listing<span class=\"token punctuation\">,</span> ExtIntegration<span class=\"token punctuation\">.</span>Metadata<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  cachedAt<span class=\"token punctuation\">:</span> Int<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">stable</span> <span class=\"token keyword\">var</span> stable_marketplaceCacheTTL<span class=\"token punctuation\">:</span> Int <span class=\"token operator\">=</span> <span class=\"token number\">300</span>_000_000_000<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 5 minutes</span>\n</code></pre>\n<hr>\n<h2>Security Considerations</h2>\n<h3>Randomness</h3>\n<ul>\n<li>Uses IC randomness beacon</li>\n<li>Race seed: raceId + startTime + blockHash</li>\n<li>Deterministic for same inputs</li>\n</ul>\n<h3>Authorization</h3>\n<ul>\n<li>All operations verify NFT ownership</li>\n<li>Calls <code>bearer(tokenId)</code> on EXT canister</li>\n<li>Cached principal verified before actions</li>\n</ul>\n<h3>Economic Safeguards</h3>\n<ul>\n<li>Entry fee scaling by class (1x/2x/5x/10x multiplier)</li>\n<li>Prize pool validation</li>\n<li>Platform 5% tax on all races</li>\n<li>Platform bonuses for beginner classes (Scavenger/Raider)</li>\n<li>ICRC-2 approval amounts checked</li>\n</ul>\n<h3>Data Integrity</h3>\n<ul>\n<li>Stable variables for persistence</li>\n<li>Ownership checks before mutations</li>\n<li>Race status prevents double-entry</li>\n<li>Upgrade cooldowns enforced</li>\n</ul>\n<h3>ICRC-2 Transfer Security</h3>\n<ul>\n<li>All transfers use exact amounts</li>\n<li>Fee included in calculations</li>\n<li>Two-step marketplace settlement</li>\n<li>Garage subaccount intermediary</li>\n</ul>\n<hr>\n<h2>Dependencies</h2>\n<h3>Motoko Packages (mops.toml)</h3>\n<pre><code>[dependencies]\nbase = \"0.11.1\"\nmap = \"9.0.1\"\nhttp-types = \"1.0.3\"\nic = \"1.0.1\"\nsha2 = \"0.0.2\"\njson = \"1.0.2\"\nmcp-motoko-sdk = \"https://github.com/rvanasa/mcp-motoko-sdk#v0.2.5\"\ntimer-tool = \"1.1.0\"\nicrc2-types = \"0.1.0\"\nbase16 = \"1.0.0\"\nclass-plus = \"0.1.0\"\nstar = \"0.3.3\"\n</code></pre>\n<h3>External Canisters</h3>\n<p><strong>ICP Ledger:</strong></p>\n<ul>\n<li>ID: <code>ryjl3-tyaaa-aaaaa-aaaba-cai</code></li>\n<li>Used for: ICRC-2 transfers, legacy transfers</li>\n<li>Methods:\n<ul>\n<li><code>icrc2_transfer_from</code>: Pull ICP from user (with approval)</li>\n<li><code>transfer</code>: Legacy transfer (garage to marketplace)</li>\n</ul>\n</li>\n</ul>\n<p><strong>PokedBots EXT NFT &#x26; Marketplace:</strong></p>\n<ul>\n<li>ID: <code>bzsui-sqaaa-aaaah-qce2a-cai</code></li>\n<li>Used for: NFT ownership, metadata, marketplace operations</li>\n<li>Methods:\n<ul>\n<li><code>tokens(accountId)</code>: Get owned token indices</li>\n<li><code>bearer(tokenId)</code>: Get token owner account ID</li>\n<li><code>metadata(tokenId)</code>: Get NFT metadata</li>\n<li><code>details(tokenId)</code>: Get listing details</li>\n<li><code>lock(tokenId, price, buyer, subaccount)</code>: Lock NFT for purchase</li>\n<li><code>settle(tokenId)</code>: Complete purchase settlement</li>\n<li><code>list({token, from_subaccount, price})</code>: List/unlist NFT</li>\n<li><code>transfer(...)</code>: Transfer NFT between accounts</li>\n</ul>\n</li>\n</ul>\n<p><strong>Integration Notes:</strong></p>\n<ul>\n<li>All ownership checks use <code>bearer()</code> as source of truth</li>\n<li>Token identifiers are EXT-encoded (canister + index)</li>\n<li>Account identifiers are 32-byte hex strings</li>\n<li>Garage subaccounts use \"GARG\" prefix + principal bytes</li>\n</ul>\n<hr>\n<h2>Token Economics</h2>\n<h3>ICP Flows</h3>\n<p><strong>Inflows:</strong></p>\n<ul>\n<li>Race entry fees (class-based scaling):\n<ul>\n<li>Scavenger: 0.05-0.2 ICP</li>\n<li>Raider: 0.1-0.4 ICP</li>\n<li>Elite: 0.25-1.0 ICP</li>\n<li>SilentKlan: 0.5-2.0 ICP</li>\n</ul>\n</li>\n<li>Race sponsorships (min 0.1 ICP)</li>\n<li>Recharge payments (0.1 ICP + 0.0001 fee)</li>\n<li>Repair payments (0.05 ICP + 0.0001 fee)</li>\n<li>Upgrade payments (3.33 ICP per part + 0.0001 fee):\n<ul>\n<li>First upgrade: 10 ICP (3 parts)</li>\n<li>Second upgrade: 17 ICP (5 parts)</li>\n<li>Third upgrade: 27 ICP (8 parts)</li>\n</ul>\n</li>\n<li>NFT purchases (marketplace price + 0.0002 fee)</li>\n</ul>\n<p><strong>Outflows:</strong></p>\n<ul>\n<li>Race prizes (after 5% platform tax):\n<ul>\n<li>1st place: 47.5% of prize pool</li>\n<li>2nd place: 23.75% of prize pool</li>\n<li>3rd place: 14.25% of prize pool</li>\n<li>4th place: 9.5% of prize pool</li>\n</ul>\n</li>\n<li>Platform bonuses:\n<ul>\n<li>Daily Sprints: +0.5 ICP (Scavenger/Raider)</li>\n<li>Weekly Leagues: +2 ICP (Scavenger/Raider)</li>\n<li>Monthly Cups: +5 ICP (Elite/SilentKlan)</li>\n</ul>\n</li>\n<li>Platform tax: 5% of entry fees (held in canister)</li>\n</ul>\n<hr>\n<h2>Performance Optimizations</h2>\n<h3>Marketplace Caching</h3>\n<ul>\n<li>5-minute TTL</li>\n<li>Reduces EXT canister calls</li>\n<li>Cursor-based pagination</li>\n</ul>\n<h3>Ownership Caching</h3>\n<ul>\n<li>Principal cached in racing stats</li>\n<li>Verified before operations</li>\n<li>Reduces EXT bearer() calls</li>\n</ul>\n<h3>Batch Processing</h3>\n<ul>\n<li>Timers process multiple items</li>\n<li>Race simulations batched</li>\n<li>Decay applied in bulk</li>\n</ul>\n<hr>\n<h2>Development Phases</h2>\n<h3>Phase 1: Marketplace Integration ‚úÖ</h3>\n<ul>\n<li>Browse/purchase PokedBots</li>\n<li>Garage subaccount system</li>\n<li>ICRC-2 payment flow</li>\n</ul>\n<h3>Phase 2: Racing Engine ‚úÖ</h3>\n<ul>\n<li>Race calendar</li>\n<li>Simulation engine</li>\n<li>Prize distribution</li>\n</ul>\n<h3>Phase 3: Maintenance &#x26; Upgrades ‚úÖ</h3>\n<ul>\n<li>Recharge/repair tools</li>\n<li>Upgrade system</li>\n<li>Decay mechanics</li>\n</ul>\n<h3>Phase 4: Leaderboards &#x26; Polish ‚úÖ</h3>\n<ul>\n<li>Career stats tracking</li>\n<li>Faction rankings</li>\n<li>Sponsorship system</li>\n</ul>\n<h3>Future: Scrapyard System üî®</h3>\n<ul>\n<li>Multi-collection browser</li>\n<li>Smart valuation</li>\n<li>Parts economy</li>\n<li>Progressive upgrades</li>\n</ul>\n<hr>\n<h2>Success Metrics</h2>\n<h3>User Engagement</h3>\n<ul>\n<li>Active racers per week</li>\n<li>Races per bot</li>\n<li>Average session duration</li>\n</ul>\n<h3>Economic Activity</h3>\n<ul>\n<li>ICP volume in races</li>\n<li>Marketplace purchases</li>\n<li>Upgrade spending</li>\n</ul>\n<h3>NFT Utility</h3>\n<ul>\n<li>Bots initialized for racing</li>\n<li>Win rate distribution</li>\n<li>Faction popularity</li>\n</ul>\n<hr>\n<h2>Navigation</h2>\n<p>üìñ <a href=\"/docs/MCP_TOOLS\">‚Üê MCP Tools</a> | üìñ <a href=\"/docs/OVERVIEW\">Back to Overview</a></p>\n<p><strong>Complete Documentation:</strong></p>\n<ul>\n<li>üìñ <a href=\"/docs/OVERVIEW\">Overview</a> - Start here</li>\n<li>üèóÔ∏è <a href=\"/docs/ARCHITECTURE\">Architecture</a> - Design decisions</li>\n<li>üîß <a href=\"/docs/GARAGE_SYSTEM\">Garage System</a> - Bot management</li>\n<li>‚ö° <a href=\"/docs/UPGRADE_SYSTEM\">Upgrade System</a> - Scrapyard &#x26; parts</li>\n<li>üèÅ <a href=\"/docs/RACING_SYSTEM\">Racing System</a> - Races &#x26; prizes</li>\n<li>üõí <a href=\"/docs/MARKETPLACE\">Marketplace</a> - Buy &#x26; trade</li>\n<li>üõ†Ô∏è <a href=\"/docs/MCP_TOOLS\">MCP Tools</a> - API reference</li>\n</ul>\n"
    }
  ],
  "guides": [
    {
      "slug": "01-quick-start",
      "metadata": {
        "title": "Quick Start Guide",
        "description": "Get started with PokedBots Racing in 5 minutes",
        "order": 1
      },
      "content": "<h1>PokedBots Racing - Quick Start Guide</h1>\n<h2>THE BASICS</h2>\n<p>You own robot NFTs that race against each other for ICP prizes. Each bot has 4 stats that determine performance:</p>\n<ul>\n<li><strong>Speed</strong> - Top speed on straightaways</li>\n<li><strong>Acceleration</strong> - How fast you reach top speed</li>\n<li><strong>Power Core</strong> - Energy efficiency (less battery drain) &#x26; hill climbing power</li>\n<li><strong>Stability</strong> - Consistency &#x26; durability</li>\n</ul>\n<h2>HOW RACING WORKS</h2>\n<h3>1. Register Your Bot</h3>\n<p>Pay 0.1 ICP one-time fee to register your bot for a racing license.</p>\n<h3>2. Find a Race</h3>\n<p>Races are scheduled at specific times throughout the day. Each race has a class (Scrap/Junker/Raider/Elite/SilentKlan based on your bot's Rating), terrain type, and prize pool.</p>\n<h3>3. Pay Entry Fee</h3>\n<p>Entry fees range from 0.1-2.4 ICP depending on the event type and your bot's class. Up to 12 bots per race.</p>\n<h3>4. Race Happens Automatically</h3>\n<p>At the start of every race, the system simulates the race based on all bots' stats, condition, battery, terrain bonuses, and RNG.</p>\n<h3>5. Winners Get Paid</h3>\n<ul>\n<li><strong>1st place:</strong> 45% of prize pool</li>\n<li><strong>2nd place:</strong> 28% of prize pool</li>\n<li><strong>3rd place:</strong> 18% of prize pool</li>\n<li><strong>4th place:</strong> 9% of prize pool</li>\n<li>Others: No prize</li>\n</ul>\n<h2>KEY MECHANICS</h2>\n<h3>Battery (Energy)</h3>\n<p>Drains each race. Low battery = HUGE speed/accel penalties. At 50% battery you lose ~25% performance.</p>\n<ul>\n<li><strong>Recharge:</strong> 0.1 ICP, restores 50-90 battery (RNG-based), 6hr cooldown</li>\n<li><strong>Overcharge bonus:</strong> Recharging at low battery gives temporary boost for next race: +0.3% Speed/Accel per 1% overcharge (max +18% at 60% overcharge), but -0.2% Power Core/Stability per 1% overcharge (max -12%)</li>\n</ul>\n<h3>Condition (Health)</h3>\n<p>Wears down each race. Low condition = reduced power core &#x26; stability stats (at 50% condition = -40% to those stats, at 0% condition = -90%).</p>\n<ul>\n<li><strong>Repair:</strong> 0.05 ICP, restores 25 condition, 3hr cooldown</li>\n</ul>\n<h3>Terrain Bonuses</h3>\n<p>Each bot prefers one terrain type (ScrapHeaps/WastelandSand/MetalRoads). Racing on your preferred terrain = +5% all stats.</p>\n<h3>Factions</h3>\n<p>Each bot belongs to a faction with unique bonuses (Dead/Master/Blackhole/etc). These give stat boosts, terrain bonuses, or special abilities.</p>\n<h2>BEGINNER STRATEGY</h2>\n<ol>\n<li><strong>Keep battery above 80%</strong> for full performance</li>\n<li><strong>Match your bot to races</strong> on their preferred terrain</li>\n<li><strong>Use scavenging</strong> to earn free upgrade parts (no ICP cost!)</li>\n<li><strong>Upgrade carefully</strong> - costs increase as your bot gets stronger</li>\n<li><strong>Manage maintenance costs</strong> - recharge (0.1 ICP) + repair (0.05 ICP) = 0.15 ICP per cycle. To stay profitable, you need to win enough races to cover these costs. Consider using free maintenance zones (ChargingStation/RepairBay) when not racing urgently.</li>\n</ol>\n<h2>NEXT STEPS</h2>\n<ul>\n<li>Read the <strong>Racing Classes Guide</strong> to understand brackets and prize pools</li>\n<li>Learn about <strong>Scavenging</strong> to earn free upgrade parts</li>\n<li>Check out <strong>Upgrade System</strong> to improve your bot permanently</li>\n</ul>\n"
    },
    {
      "slug": "02-racing-classes",
      "metadata": {
        "title": "Racing Classes Guide",
        "description": "Understand brackets, rating, and prize pools",
        "order": 2
      },
      "content": "<h1>Racing Brackets (Classes) - Complete Guide</h1>\n<h2>HOW BRACKETS WORK</h2>\n<p>Your bot's <strong>Rating</strong> (average of max stats) determines which class of races you can enter. Rating is calculated from your bot's base stats + upgrade bonuses. This is separate from ELO, which is used for matchmaking within your class.</p>\n<h2>5 RACING CLASSES</h2>\n<h3>SCRAP CLASS (Beginner)</h3>\n<ul>\n<li><strong>Rating Range:</strong> 0-19</li>\n<li><strong>Entry Fees:</strong> 0.1 ICP (Daily Sprint), 0.4 ICP (Weekly League)</li>\n<li><strong>Platform Bonus:</strong> 0.16 ICP (Daily Sprint), 0.65 ICP (Weekly League)</li>\n<li><strong>Competition:</strong> Weakest bots, easiest wins</li>\n</ul>\n<h3>JUNKER CLASS (Beginner)</h3>\n<ul>\n<li><strong>Rating Range:</strong> 20-29</li>\n<li><strong>Entry Fees:</strong> 0.2 ICP (Daily Sprint), 0.8 ICP (Weekly League)</li>\n<li><strong>Platform Bonus:</strong> 0.32 ICP (Daily Sprint), 1.30 ICP (Weekly League)</li>\n<li><strong>Competition:</strong> Low-tier bots</li>\n</ul>\n<h3>RAIDER CLASS (Intermediate)</h3>\n<ul>\n<li><strong>Rating Range:</strong> 30-39</li>\n<li><strong>Entry Fees:</strong> 0.3 ICP (Daily Sprint), 1.2 ICP (Weekly League)</li>\n<li><strong>Platform Bonus:</strong> 0.48 ICP (Daily Sprint), 1.95 ICP (Weekly League)</li>\n<li><strong>Competition:</strong> Mid-tier bots</li>\n</ul>\n<h3>ELITE CLASS (Advanced)</h3>\n<ul>\n<li><strong>Rating Range:</strong> 40-49</li>\n<li><strong>Entry Fees:</strong> 0.4 ICP (Daily Sprint), 1.6 ICP (Weekly League)</li>\n<li><strong>Platform Bonus:</strong> 0.65 ICP (Daily Sprint), 2.60 ICP (Weekly League)</li>\n<li><strong>Competition:</strong> Strong bots, tougher field</li>\n</ul>\n<h3>SILENTKLAN CLASS (Elite/Pro)</h3>\n<ul>\n<li><strong>Rating Range:</strong> 50+</li>\n<li><strong>Entry Fees:</strong> 0.6 ICP (Daily Sprint), 2.4 ICP (Weekly League)</li>\n<li><strong>Platform Bonus:</strong> 0.65 ICP (Daily Sprint), 3.90 ICP (Weekly League)</li>\n<li><strong>Competition:</strong> Best bots only</li>\n</ul>\n<h2>KEY POINTS</h2>\n<ul>\n<li>You can ONLY enter races in your current Rating class</li>\n<li>Winning = +ELO (for matchmaking within class), Losing = -ELO</li>\n<li>Rating determines class eligibility, ELO determines opponents within that class</li>\n<li>Prize pools scale with class difficulty and include platform bonuses</li>\n<li>Upgrade your stats to increase Rating and access higher classes</li>\n</ul>\n<h2>‚ö†Ô∏è BRACKET JUMPING WARNING</h2>\n<p><strong>Rating determines your race class!</strong> Getting lucky with upgrades can accidentally bounce you into a higher bracket:</p>\n<ul>\n<li>\n<p><strong>The Problem:</strong> You're at Rating 19 (Scrap class) and upgrade a stat. You get a double point upgrade (+2 instead of +1) and your rating jumps to 20 ‚Üí <strong>instantly moved to Junker class</strong> with higher entry fees and tougher competition!</p>\n</li>\n<li>\n<p><strong>Safe Approach:</strong> If you're near a bracket boundary (e.g., 19.5 rating), avoid upgrading stats that would push you over. Wait until you have 2+ stats ready to upgrade at once, or focus on different stats to stay balanced.</p>\n</li>\n<li>\n<p><strong>Bracket Boundaries to Watch:</strong></p>\n<ul>\n<li>Rating 19 ‚Üí 20 (Scrap to Junker)</li>\n<li>Rating 29 ‚Üí 30 (Junker to Raider)</li>\n<li>Rating 39 ‚Üí 40 (Raider to Elite)</li>\n<li>Rating 49 ‚Üí 50 (Elite to SilentKlan)</li>\n</ul>\n</li>\n<li>\n<p><strong>Recommendation:</strong> When within 2 points of a bracket jump, stop upgrading that stat until you're ready for the higher class. The double point lottery can catch you off guard!</p>\n</li>\n</ul>\n"
    },
    {
      "slug": "03-scavenging-guide",
      "metadata": {
        "title": "Scavenging Guide",
        "description": "Earn free upgrade parts through wasteland missions",
        "order": 3
      },
      "content": "<h1>Scavenging - Complete Guide</h1>\n<h2>What Is It?</h2>\n<p>Send your bots into the wasteland to gather upgrade parts. <strong>No ICP cost</strong> - only battery and condition consumption. You can register to race while scavenging - your bot will be pulled from the mission when the race starts (with penalties applied).</p>\n<p><strong>‚ö†Ô∏è Minimum Requirement:</strong> Your bot needs at least 10 battery to start any scavenging mission (including ChargingStation and RepairBay).</p>\n<h2>2 Mission Modes</h2>\n<h3>Continuous Mode (Default - No duration specified)</h3>\n<ul>\n<li>Accumulates rewards every 15 minutes automatically</li>\n<li>Retrieve bot anytime from the UI</li>\n<li>Most flexible - run as long as you want</li>\n<li><strong>WARNING:</strong> Bot dies if battery OR condition reaches 0 ‚Üí <strong>lose ALL pending rewards!</strong></li>\n</ul>\n<h3>Timed Mode (Specify duration_minutes)</h3>\n<ul>\n<li>Set specific duration: 15, 30, or 60 minutes</li>\n<li>Bot auto-returns when time expires with rewards</li>\n<li>Good for planning - set it and forget it</li>\n<li><strong>WARNING:</strong> If bot dies before timer ends ‚Üí <strong>lose ALL pending rewards!</strong></li>\n</ul>\n<h2>5 Zones (Choose Your Strategy)</h2>\n<h3>Scavenging Zones (Earn Parts + World Buff Chance)</h3>\n<p><strong>ScrapHeaps - Safe &#x26; Balanced</strong></p>\n<ul>\n<li>1.0x parts, 1.0x battery drain, 1.0x condition wear</li>\n<li><strong>40% Universal Parts</strong>, 60% specialized (15% each type)</li>\n<li>~10 parts/hour, ~20 battery/hour, ~8 condition/hour</li>\n<li>Best for: New bots, low-risk farming, safest option</li>\n</ul>\n<p><strong>AbandonedSettlements - Moderate Risk/Reward</strong></p>\n<ul>\n<li>1.6x parts, 2.0x battery drain, 2.0x condition wear</li>\n<li><strong>40% Universal Parts</strong>, 60% specialized (15% each type)</li>\n<li>~16 parts/hour, ~40 battery/hour, ~16 condition/hour</li>\n<li>Best for: More parts than ScrapHeaps, manageable costs</li>\n</ul>\n<p><strong>DeadMachineFields - High Risk/Reward</strong></p>\n<ul>\n<li>2.5x parts, 3.5x battery drain, 3.5x condition wear</li>\n<li><strong>40% Universal Parts</strong>, 60% specialized (15% each type)</li>\n<li>~25 parts/hour, ~70 battery/hour, ~28 condition/hour</li>\n<li>Best for: High stats bots, maximum parts (but highest costs)</li>\n</ul>\n<h3>Maintenance Zones (Free Repairs - No Parts)</h3>\n<p>‚ö†Ô∏è <strong>Minimum Requirement:</strong> Your bot needs at least 10 battery to start any scavenging mission (including ChargingStation and RepairBay).</p>\n<p><strong>RepairBay - Free Condition Restore</strong></p>\n<ul>\n<li>0x parts, 2.0x battery drain, <strong>RESTORES +12-18 condition/hour</strong></li>\n<li>Bypasses 12h repair cooldown and 0.05 ICP cost</li>\n<li>~40 battery/hour, +12-18 condition/hour (with stat bonuses)</li>\n<li>Best for: Free repairs, damaged bots under 50% condition</li>\n</ul>\n<p><strong>ChargingStation - Free Battery Restore</strong></p>\n<ul>\n<li>0x parts, <strong>RESTORES +1 battery per 15min</strong> (4/hour)</li>\n<li>Bypasses 6h recharge cooldown and 0.1 ICP cost</li>\n<li>Takes 25 hours to fully charge from 0% (slow but FREE!)</li>\n<li>Best for: Patient players, saving ICP, low-priority bots</li>\n</ul>\n<p><strong>üí° Pro Tip: Overcharge Strategy</strong></p>\n<ul>\n<li>Use <strong>RepairBay</strong> to spend battery while getting free condition repairs</li>\n<li>Overcharge formula: (100 - battery) √ó 0.4 √ó efficiency (capped at 60%)</li>\n<li>Lower battery at recharge = bigger overcharge potential (10% battery ‚Üí ~36% overcharge avg)</li>\n<li>Efficiency varies by condition + RNG: 100% condition = 0.55-1.35√ó (highly random!)</li>\n<li>Overcharge bonus: +0.3% Speed/Accel per 1% overcharge (max +18% at 60%)</li>\n<li>Strategy: Drop battery low in RepairBay, then recharge for big one-time race boost!</li>\n</ul>\n<h2>Part Types &#x26; Distribution</h2>\n<p><strong>5 Part Types:</strong></p>\n<ul>\n<li><strong>Universal Parts</strong> - Use for ANY upgrade (most valuable!)</li>\n<li><strong>Speed Chips</strong> - Speed upgrades only</li>\n<li><strong>Power Core Fragments</strong> - Power Core upgrades only</li>\n<li><strong>Thruster Kits</strong> - Acceleration upgrades only</li>\n<li><strong>Gyro Modules</strong> - Stability upgrades only</li>\n</ul>\n<p><strong>Part Exchange:</strong></p>\n<ul>\n<li>Convert specialized parts to other types at <strong>25% cost</strong></li>\n<li>Example: 100 Speed Chips ‚Üí 75 Thruster Kits</li>\n<li>Universal Parts are always better (no conversion loss!)</li>\n</ul>\n<p><strong>Zone Strategy:</strong></p>\n<ul>\n<li>All zones have the same 40% Universal / 60% Specialized split</li>\n<li>Harder zones = MORE total parts (1.6x ‚Üí 2.5x) but higher battery/condition costs</li>\n<li>Universal Parts let you upgrade any stat without conversion penalty</li>\n</ul>\n<h2>Faction Bonuses (Specialization System)</h2>\n<p>Each faction excels at finding specific parts:</p>\n<p><strong>Speed Specialists:</strong> +30% Speed Chips</p>\n<ul>\n<li>Bee, Wild</li>\n</ul>\n<p><strong>Power Specialists:</strong> +30% Power Core Fragments</p>\n<ul>\n<li>Blackhole, Golden</li>\n</ul>\n<p><strong>Acceleration Specialists:</strong> +30% Thruster Kits</p>\n<ul>\n<li>Game, Animal</li>\n</ul>\n<p><strong>Stability Specialists:</strong> +30% Gyro Modules</p>\n<ul>\n<li>Industrial, Box</li>\n</ul>\n<p><strong>Balanced Factions:</strong> +15% Universal Parts</p>\n<ul>\n<li>Dead, Master, Murder, Food, UltimateMaster, Ultimate</li>\n</ul>\n<p><strong>Strategy:</strong> Specialize in your faction's parts, trade with others for parts you need!</p>\n<h2>World Buffs (Bonus Stats)</h2>\n<p><strong>How It Works:</strong></p>\n<ul>\n<li>2.0% base chance per 15-minute tick (~8% per hour)</li>\n<li>Up to 3.2% with 100 Acceleration stat (+60% boost)</li>\n<li>Grants 2-4 bonus stat points for your next race</li>\n<li>Expires in 48 hours if unused</li>\n<li><strong>Blackhole faction:</strong> Gets +3 Speed/Accel BONUS on top of regular buff</li>\n</ul>\n<p><strong>Important:</strong></p>\n<ul>\n<li>ONLY available in scavenging zones (ScrapHeaps, AbandonedSettlements, DeadMachineFields)</li>\n<li>NOT available in maintenance zones (RepairBay, ChargingStation)</li>\n<li>Earned during accumulation (not on completion to prevent spam)</li>\n</ul>\n<h2>Stat Bonuses (Make Stats Matter!)</h2>\n<p><strong>Speed:</strong> +10% parts yield at 100 Speed\n<strong>Power Core:</strong> Up to -75% battery drain at 100 Power Core (exponential scaling)\n<strong>Stability:</strong> Up to -75% condition loss at 100 Stability (exponential scaling)\n<strong>Acceleration:</strong> +60% world buff chance at 100 Acceleration</p>\n<h2>Pro Tips</h2>\n<ul>\n<li><strong>Start with ScrapHeaps</strong> - Safe way to learn mechanics with lowest battery/condition costs</li>\n<li><strong>High Power Core = efficiency</strong> - Much less battery drain (exponential benefit)</li>\n<li><strong>High Stability = durability</strong> - Survive dangerous zones longer</li>\n<li><strong>Monitor your bot!</strong> - Check condition/battery regularly to avoid death</li>\n<li><strong>Use RepairBay</strong> - Free alternative to 0.05 ICP repairs (slow but FREE)</li>\n<li><strong>Use ChargingStation</strong> - Free alternative to 0.1 ICP recharge (25h for full charge, requires 10+ battery to start)</li>\n<li><strong>Faction matters</strong> - Dead/Master/Murder = best for Universal Parts</li>\n<li><strong>Racing while scavenging</strong> - Bot pulled when race starts, partial rewards + penalties applied</li>\n</ul>\n<h2>Death Warning ‚ö†Ô∏è</h2>\n<p>If your bot reaches <strong>0 battery OR 0 condition</strong> during scavenging:</p>\n<ul>\n<li>Mission ends immediately</li>\n<li><strong>ALL pending parts are LOST</strong></li>\n<li>Bot returns with 0 rewards</li>\n</ul>\n<p><strong>Always leave a safety buffer!</strong> Don't push your bot to the limit.</p>\n"
    },
    {
      "slug": "04-upgrade-system",
      "metadata": {
        "title": "Upgrade System Guide",
        "description": "Permanently improve your bot's stats",
        "order": 4
      },
      "content": "<h1>Upgrade Parts - Complete Guide</h1>\n<h2>WHAT ARE PARTS?</h2>\n<p>Currency for upgrading your bot's stats permanently. You gather them through scavenging missions (no ICP cost) or buy upgrades directly with ICP.</p>\n<h2>5 PART TYPES</h2>\n<ul>\n<li><strong>Speed Chips</strong> ‚Üí Upgrade Speed (Velocity)</li>\n<li><strong>Power Core Fragments</strong> ‚Üí Upgrade Power Core</li>\n<li><strong>Thruster Kits</strong> ‚Üí Upgrade Acceleration (Thruster)</li>\n<li><strong>Gyro Modules</strong> ‚Üí Upgrade Stability (Gyro)</li>\n<li><strong>Universal Parts</strong> ‚Üí Can substitute for ANY type (most valuable!)</li>\n</ul>\n<h2>UPGRADE SYSTEM V2 (Gacha-Style)</h2>\n<h3>Payment Options</h3>\n<p><strong>Pay with ICP (Dynamic Pricing):</strong></p>\n<p><strong>Cost Formula:</strong> <code>0.5 + (currentStat/40)¬≤</code> √ó rating premium √ó synergy multiplier</p>\n<p><strong>Example costs (per stat point):</strong></p>\n<ul>\n<li>Rating 20 bot, stat 20‚Üí21: ~0.43 ICP (43 parts)</li>\n<li>Rating 40 bot, stat 30‚Üí31: ~0.84 ICP (84 parts)</li>\n<li>Rating 60 bot, stat 40‚Üí41: ~1.78 ICP (178 parts)</li>\n<li>Rating 80 bot, stat 50‚Üí51: ~4.20 ICP (420 parts)</li>\n</ul>\n<p><strong>Key Points:</strong></p>\n<ul>\n<li>Costs scale with BOTH current stat AND overall rating</li>\n<li>Higher individual stats get exponentially more expensive</li>\n<li>Spreading upgrades across multiple stats is cheaper than specializing</li>\n</ul>\n<p><strong>Or Pay With Parts:</strong></p>\n<ul>\n<li>100 parts = 1 ICP equivalent</li>\n<li>Use Speed Chips, Power Core Fragments, Thruster Kits, Gyro Modules</li>\n<li>Universal Parts work for any upgrade type</li>\n</ul>\n<h3>Success Rates (RNG-Based)</h3>\n<p>Each stat tracked independently (Speed, Power Core, Acceleration, Stability):</p>\n<ul>\n<li><strong>Smooth curve:</strong> 85% (first upgrade) ‚Üí 15% (15th upgrade) ‚Üí 1% (16+ upgrades)</li>\n<li><strong>Formula:</strong> 85% - (upgradeCount √ó 5.6%), minimum 1%</li>\n<li><strong>Examples:</strong>\n<ul>\n<li>0 upgrades: 85.0%</li>\n<li>5 upgrades: 57.0%</li>\n<li>10 upgrades: 29.0%</li>\n<li>15 upgrades: 1.0%</li>\n<li>16+ upgrades: 1.0% (soft cap)</li>\n</ul>\n</li>\n</ul>\n<h3>Pity System</h3>\n<ul>\n<li>+5% success per consecutive failure (max +25%)</li>\n<li>Resets on any success</li>\n<li>Persists across canister upgrades</li>\n<li>Can boost late-game 1% ‚Üí 26% after 5 fails</li>\n</ul>\n<h3>Double Point Lottery</h3>\n<ul>\n<li>15% ‚Üí 2% chance (upgrades 0-15), then 0%</li>\n<li>Awards +2 stat points instead of +1</li>\n<li>Disabled completely after +15 upgrades per stat</li>\n<li>Creates exciting 'jackpot' moments</li>\n</ul>\n<h3>50% Refund on Failure</h3>\n<ul>\n<li><strong>ICP:</strong> 50% refunded automatically via prize distribution</li>\n<li><strong>Parts:</strong> 50% returned directly to inventory</li>\n<li>Reduces financial risk for both payment types</li>\n<li>Refund matches payment method used</li>\n</ul>\n<h3>Upgrade Duration</h3>\n<p><strong>Duration:</strong> 12 hours (can race during upgrade)</p>\n<h2>STRATEGY TIPS</h2>\n<ul>\n<li>Early upgrades cheap &#x26; reliable (85% success, 0.43+ ICP)</li>\n<li>Gets expensive &#x26; risky after +10 upgrades</li>\n<li>Soft cap at +15 (15% success, then 1%)</li>\n<li>Use Universal Parts to avoid scavenging for specific types</li>\n<li>Pity system prevents long losing streaks</li>\n<li>12 hours per upgrade (can race during it)</li>\n<li>Spreading stats is more cost-effective than specializing</li>\n</ul>\n<p><strong>Example:</strong> Rating 20 bot upgrading Speed from 20‚Üí21 costs 0.43 ICP, 85% success, 15% chance for +2.</p>\n"
    },
    {
      "slug": "05-costs-and-fees",
      "metadata": {
        "title": "Costs & Fees Reference",
        "description": "All ICP costs for racing, maintenance, and upgrades",
        "order": 5
      },
      "content": "<h1>PokedBots - All In-Game Costs</h1>\n<h2>INITIAL SETUP</h2>\n<ul>\n<li><strong>Register bot for racing license:</strong> 0.1 ICP (one-time per bot)</li>\n</ul>\n<h2>MAINTENANCE (Recurring)</h2>\n<ul>\n<li><strong>Recharge battery:</strong> 0.1 ICP, restores 50-90 battery (RNG), 6hr cooldown</li>\n<li><strong>Repair condition:</strong> 0.05 ICP, restores 25 condition, 3hr cooldown</li>\n</ul>\n<h2>RACING</h2>\n<ul>\n<li><strong>Race entry fees:</strong> 0.1-2.4 ICP (varies by class and event type)</li>\n<li><strong>Battery drain per race:</strong> Base 2.5 per km √ó terrain (1.0-1.2√ó) √ó Power Core efficiency √ó stat scaling\n<ul>\n<li>Example: 4km race = 10 battery, 10km = 25 battery, 20km = 50 battery (before modifiers)</li>\n</ul>\n</li>\n<li><strong>Condition wear per race:</strong> Base 1.2 per km √ó terrain (1.0-1.5√ó) √ó stat scaling\n<ul>\n<li>Example: 4km race = 5 condition, 10km = 12 condition, 20km = 24 condition (before modifiers)</li>\n</ul>\n</li>\n</ul>\n<h2>UPGRADES (12hr sessions)</h2>\n<p>Pay with parts OR ICP (dynamic pricing):</p>\n<p><strong>Cost Formula:</strong> <code>0.5 + (currentStat/40)¬≤</code> √ó rating premium √ó synergy multiplier</p>\n<p><strong>Example costs (per stat point):</strong></p>\n<ul>\n<li>Rating 20 bot, stat 20‚Üí21: ~0.43 ICP (43 parts)</li>\n<li>Rating 40 bot, stat 30‚Üí31: ~0.84 ICP (84 parts)</li>\n<li>Rating 60 bot, stat 40‚Üí41: ~1.78 ICP (178 parts)</li>\n<li>Rating 80 bot, stat 50‚Üí51: ~4.20 ICP (420 parts)</li>\n</ul>\n<p><strong>Key Points:</strong></p>\n<ul>\n<li>Costs scale with BOTH current stat AND overall rating</li>\n<li>Higher individual stats get exponentially more expensive</li>\n<li>Spreading upgrades across multiple stats is cheaper than specializing</li>\n<li>100 parts = 1 ICP equivalent</li>\n</ul>\n<h2>MARKETPLACE</h2>\n<ul>\n<li><strong>List bot for sale:</strong> Free</li>\n<li><strong>Transfer bot:</strong> Free</li>\n<li><strong>Purchase bot:</strong> Varies (seller sets price)</li>\n</ul>\n<p><strong>Note:</strong> All ICP transactions include small 0.0001 ICP transfer fee</p>\n"
    },
    {
      "slug": "06-marketplace-shopping",
      "metadata": {
        "title": "Marketplace Shopping Guide",
        "description": "How to find the right bot to buy",
        "order": 6
      },
      "content": "<h1>How to Shop for Bots on the Marketplace</h1>\n<h2>WHAT TO LOOK FOR</h2>\n<ul>\n<li><strong>Rating 50+</strong> = SilentKlan (rare on marketplace - likely need to upgrade from Elite)</li>\n<li><strong>Rating 40-49</strong> = Elite starter, high price</li>\n<li><strong>Rating 30-39</strong> = Raider starter, mid-tier price</li>\n<li><strong>Rating 20-29</strong> = Junker starter, affordable</li>\n<li><strong>Rating 0-19</strong> = Scrap starter, budget option</li>\n<li><strong>Terrain preference</strong> = Match to common race types</li>\n<li><strong>Balanced stats</strong> = More consistent than specialists</li>\n<li><strong>Faction bonuses</strong> = Dead (scavenging), Blackhole (MetalRoads), Master (balanced)</li>\n</ul>\n<h2>RATING GUIDE</h2>\n<p><strong>What is Rating?</strong></p>\n<ul>\n<li>Average of bot's 4 max stats (Speed, Power Core, Acceleration, Stability)</li>\n<li>Determines which race class you can enter</li>\n<li>Higher rating = access to bigger prize pools but tougher competition</li>\n</ul>\n<p><strong>Beginner-Friendly Ratings:</strong></p>\n<ul>\n<li><strong>20-29 (Junker):</strong> Best starting point - affordable, reasonable competition</li>\n<li><strong>30-39 (Raider):</strong> Intermediate tier - good prize pools, manageable fees</li>\n</ul>\n<p><strong>Advanced Ratings:</strong></p>\n<ul>\n<li><strong>40-49 (Elite):</strong> Strong bots required - high entry fees, tough races</li>\n<li><strong>50+ (SilentKlan):</strong> Top-tier only - highest prizes, best bots compete</li>\n</ul>\n<h2>TERRAIN PREFERENCE</h2>\n<p>Each bot has a preferred terrain (derived from NFT background color):</p>\n<ul>\n<li><strong>ScrapHeaps</strong>: +5% performance bonus on ScrapHeaps tracks</li>\n<li><strong>WastelandSand</strong>: +5% performance bonus on WastelandSand tracks</li>\n<li><strong>MetalRoads</strong>: +5% performance bonus on MetalRoads tracks</li>\n</ul>\n<p><strong>Strategy:</strong> All terrains appear equally across race classes. Choose based on which terrain you want to specialize in or race most often.</p>\n<h2>STAT DISTRIBUTION</h2>\n<p><strong>Balanced Bots (Recommended):</strong></p>\n<ul>\n<li>All 4 stats relatively equal</li>\n<li>More consistent performance across different race types</li>\n<li>Easier to manage and upgrade</li>\n</ul>\n<p><strong>Specialist Bots (Advanced):</strong></p>\n<ul>\n<li>One or two stats maxed, others low</li>\n<li>Very strong in specific situations</li>\n<li>Harder to upgrade (costs scale with individual stat values)</li>\n</ul>\n<h2>FACTION BONUSES</h2>\n<p>Different factions excel at different aspects:</p>\n<p><strong>Best for Racing:</strong></p>\n<ul>\n<li><strong>UltimateMaster</strong>: +15% all stats, -25% to -40% decay rates</li>\n<li><strong>Golden</strong>: +15% all stats when condition ‚â•90% (pristine maintenance required)</li>\n<li><strong>Ultimate</strong>: +12% Speed/Accel</li>\n<li><strong>Blackhole</strong>: +12% on MetalRoads terrain, world buffs grant +3 Speed/Accel BONUS on top of regular buff</li>\n<li><strong>Wild</strong>: +20% Accel, -10% Stability</li>\n<li><strong>Dead</strong>: +10% PowerCore, +8% Stability, -15% decay</li>\n<li><strong>Master</strong>: +12% Speed, +8% PowerCore</li>\n</ul>\n<p><strong>Best for Scavenging:</strong></p>\n<ul>\n<li><strong>Dead</strong>: 1.40x DeadMachineFields (1.10x others), -50% condition loss, +15% Universal Parts</li>\n<li><strong>Master</strong>: 1.12x all zones, -25% battery, every 10th mission doubles parts, +15% Universal Parts</li>\n<li><strong>Food</strong>: 1.12x ScrapHeaps/Settlements, -20% battery, +30% world buff strength, +15% Universal Parts</li>\n<li><strong>UltimateMaster</strong>: 1.20x all zones, -30% battery, 15% double parts, +20 battery return, +15% Universal Parts</li>\n</ul>\n<p><strong>Balanced/Versatile:</strong></p>\n<ul>\n<li><strong>UltimateMaster</strong>: Strongest overall (racing + scavenging)</li>\n<li><strong>Master</strong>: Good at both racing and scavenging</li>\n<li><strong>Dead</strong>: Strong racing stats + excellent dangerous zone scavenging</li>\n</ul>\n<p><strong>Scavenging Part Specializations:</strong></p>\n<ul>\n<li><strong>Speed Specialists</strong> (Bee, Wild): +30% Speed Chips</li>\n<li><strong>Power Specialists</strong> (Blackhole, Golden): +30% Power Core Fragments</li>\n<li><strong>Acceleration Specialists</strong> (Game, Animal): +30% Thruster Kits</li>\n<li><strong>Stability Specialists</strong> (Industrial, Box): +30% Gyro Modules</li>\n<li><strong>Balanced Factions</strong> (Dead, Master, Murder, Food, UltimateMaster, Ultimate): +15% Universal Parts</li>\n</ul>\n<h2>BEGINNER SHOPPING CHECKLIST</h2>\n<ol>\n<li><strong>Set your budget</strong> - Prices fluctuate with ICP market</li>\n<li><strong>Choose Rating 20-29</strong> (Junker) or 30-39 (Raider) for best starting experience</li>\n<li><strong>Look for balanced stats</strong> - Avoid heavy specialists</li>\n<li><strong>Match terrain</strong> to common race types</li>\n<li><strong>Consider faction</strong> - Dead/Master/Food for scavenging focus, Blackhole/Wild for racing</li>\n<li><strong>Estimate upgrade potential</strong> - Check upgrade counters to see growth room (see below)</li>\n</ol>\n<h2>ESTIMATING UPGRADE POTENTIAL</h2>\n<p><strong>Why This Matters:</strong>\nA bot with fewer upgrades has more room to grow before hitting diminishing returns.</p>\n<p><strong>How To Calculate Upgrades:</strong>\nEach stat shows: <strong>Current Stat (Base Stat)</strong></p>\n<ul>\n<li>Current = Base + Successful Upgrades</li>\n<li>Example: <code>29 (22)</code> means 29 - 22 = <strong>7 upgrades</strong></li>\n</ul>\n<p><strong>Success Rate Guide:</strong></p>\n<ul>\n<li>Success rates: 85% (first upgrade) ‚Üí 1% (at 15+ upgrades)</li>\n<li>Formula: 85% - (upgrades √ó 5.6%), minimum 1%</li>\n</ul>\n<p><strong>What To Look For:</strong></p>\n<ul>\n<li><strong>0-5 upgrades per stat:</strong> Excellent - high success rates (85-57%)</li>\n<li><strong>6-10 upgrades per stat:</strong> Good - moderate success rates (51-29%)</li>\n<li><strong>11-15 upgrades per stat:</strong> Fair - low success rates (23-1%)</li>\n<li><strong>15+ upgrades per stat:</strong> Soft cap - 1% success rate (brutal)</li>\n</ul>\n<p><strong>Example (Bot #1140 from screenshot):</strong></p>\n<ul>\n<li>Speed: 29 (22) = 7 upgrades ‚Üí 46% success rate</li>\n<li>Power Core: 24 (18) = 6 upgrades ‚Üí 51% success rate</li>\n<li>Acceleration: 24 (22) = 2 upgrades ‚Üí 74% success rate (great!)</li>\n<li>Stability: 16 (15) = 1 upgrade ‚Üí 79% success rate (excellent!)</li>\n</ul>\n<p><strong>Verdict:</strong> Mixed potential - Speed/PWR harder to upgrade, ACC/STB still have great odds.</p>\n<p><strong>Strategy:</strong> Calculate upgrades for each stat (Current - Base). Favor bots with lower upgrade counts for easier/cheaper growth.</p>\n<h2>ADVANCED TIPS</h2>\n<ul>\n<li><strong>Low condition/battery bots</strong> may be cheaper - factor in 0.15 ICP maintenance cost</li>\n<li><strong>Recently upgraded bots</strong> have better stats but cost more</li>\n<li><strong>Ultra-rare factions</strong> (UltimateMaster/Golden/Ultimate) have strongest base racing bonuses</li>\n<li><strong>Balanced factions</strong> (Dead/Master/Food) excel at scavenging Universal Parts</li>\n</ul>\n"
    },
    {
      "slug": "07-garage-management",
      "metadata": {
        "title": "Garage Management Strategy",
        "description": "Balance racing and scavenging for maximum profit",
        "order": 7
      },
      "content": "<h1>Garage Management - Balancing Races &#x26; Scavenging</h1>\n<h2>THE CORE STRATEGY</h2>\n<p>Maximize income (race prizes) while gathering free parts (scavenging). Both can happen simultaneously!</p>\n<h2>RACE-FIRST APPROACH (Recommended)</h2>\n<ol>\n<li><strong>Enter races when available</strong> - Races happen multiple times daily, limited spots</li>\n<li><strong>Fill downtime with scavenging</strong> - Use continuous mode or timed missions</li>\n<li><strong>Use RepairBay/ChargingStation</strong> - Free maintenance zones to save ICP</li>\n</ol>\n<h2>SCAVENGING WHILE RACING (Advanced)</h2>\n<p>You CAN register to race while scavenging. When race starts:</p>\n<ul>\n<li>Bot pulled from mission automatically</li>\n<li>Partial parts awarded (with 50% early withdrawal penalty)</li>\n<li>Condition damage scales with mission progress (minimum 50% of full penalty)</li>\n</ul>\n<p><strong>Strategy:</strong> Register for races opportunistically - penalties are manageable and prizes often exceed lost parts</p>\n<h2>BATTERY/CONDITION MANAGEMENT</h2>\n<h3>Before Racing</h3>\n<ul>\n<li>Keep battery 80%+ (recharge if below)</li>\n<li>Keep condition 90%+ (repair if needed)</li>\n<li><strong>Cost:</strong> 0.1 ICP recharge + 0.05 ICP repair = 0.15 ICP maintenance</li>\n</ul>\n<h3>After Racing</h3>\n<ul>\n<li>Battery drains 10-20 per race</li>\n<li>Condition wears 3-7 per race</li>\n<li>Can usually do 3-4 races before needing maintenance</li>\n</ul>\n<h2>OPTIMAL ROTATION (5 bots example)</h2>\n<h3>Bot 1-2: Racing focus</h3>\n<ul>\n<li>Enter every available race in their class</li>\n<li>Scavenge 5h missions between races</li>\n<li>Maintain 80%+ battery/condition</li>\n</ul>\n<h3>Bot 3-4: Scavenge focus</h3>\n<ul>\n<li>Run continuous mode in DeadMachineFields or AbandonedSettlements</li>\n<li>Pull out for races when opportunities arise</li>\n<li>Use RepairBay/ChargingStation for free maintenance</li>\n</ul>\n<h3>Bot 5: Flex/Upgrade</h3>\n<ul>\n<li>Rotate through 12h upgrades</li>\n<li>Can still race while upgrading</li>\n<li>Scavenge when not upgrading</li>\n</ul>\n<h2>PRO TIPS</h2>\n<ul>\n<li>Dead faction bots = best scavengers (+30% Power Core Fragments bonus)</li>\n<li>High Power Core = less battery drain = more races between recharges (up to 30% reduction)</li>\n<li>Use free zones (ChargingStation, RepairBay) to minimize ICP costs</li>\n<li>Enter races early (spots fill up fast for good prizes)</li>\n<li>Continuous scavenging is most flexible - retrieve anytime</li>\n</ul>\n<h2>COST OPTIMIZATION</h2>\n<h3>Expensive Approach (0.15 ICP per maintenance cycle)</h3>\n<ul>\n<li>Pay 0.1 ICP recharge + 0.05 ICP repair every 3-4 races</li>\n<li>Fast recovery, can race immediately</li>\n<li>Best for active players racing frequently</li>\n</ul>\n<h3>Free Approach (0 ICP, slow recovery)</h3>\n<ul>\n<li>Use ChargingStation (25h for full charge) + RepairBay (5h for 60+ condition)</li>\n<li>No ICP cost, but much slower</li>\n<li>Best for casual players or low-priority bots</li>\n</ul>\n<h3>Hybrid Approach (Recommended)</h3>\n<ul>\n<li>Use ChargingStation/RepairBay when NOT racing urgently</li>\n<li>Pay ICP recharge/repair only when race window is closing</li>\n<li>Balances cost and flexibility</li>\n</ul>\n"
    },
    {
      "slug": "08-garage-auras",
      "metadata": {
        "title": "Garage Auras (Collection Bonuses)",
        "description": "How owning multiple bots of the same faction grants powerful bonuses",
        "order": 8
      },
      "content": "<h1>Garage Auras - Collection Bonuses</h1>\n<h2>WHAT ARE GARAGE AURAS?</h2>\n<p>Garage auras are <strong>permanent bonuses</strong> that apply to ALL bots in your collection when you own multiple bots of the same faction. The more bots of a faction you collect, the stronger the bonuses become.</p>\n<p><strong>Key Features:</strong></p>\n<ul>\n<li>Bonuses apply to <strong>ALL</strong> your bots, not just the faction that grants them</li>\n<li>Stat bonuses increase your bots' racing performance</li>\n<li>Cost bonuses reduce ICP expenses (repairs, recharges, upgrades)</li>\n<li>Yield bonuses increase earnings (race prizes, scavenging parts)</li>\n</ul>\n<h2>ULTRA-RARE FACTIONS (Strongest Bonuses)</h2>\n<h3>UltimateMaster (1+ bot)</h3>\n<p><strong>Stat Bonus:</strong> +5 to all stats (+20 total = +5 rating)</p>\n<ul>\n<li>The ultimate balanced bonus - instant power boost to your entire garage</li>\n<li>Requires only 1 bot for full effect (rarest faction)</li>\n</ul>\n<h3>Wild (2+ bots)</h3>\n<p><strong>Stat Bonus:</strong> +4 to all stats (+16 total = +4 rating)</p>\n<ul>\n<li>Second strongest all-around bonus</li>\n<li>Requires 2 ultra-rare bots</li>\n</ul>\n<h3>Ultimate (2/3+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>2+ bots: +3 Speed, +3 Acceleration</li>\n<li>3+ bots: +5 Speed, +5 Acceleration</li>\n</ul>\n<p><strong>Cost Bonus:</strong></p>\n<ul>\n<li>2+ bots: -15% scavenging battery/condition drain</li>\n<li>3+ bots: -30% scavenging battery/condition drain</li>\n</ul>\n<p>Elite speed demons - pure racing focus with scavenging efficiency</p>\n<h3>Golden (2/3+ bots)</h3>\n<p><strong>Yield Bonus:</strong></p>\n<ul>\n<li>2+ bots: +6% race prize earnings</li>\n<li>3+ bots: +15% race prize earnings</li>\n</ul>\n<p>The money makers - significantly boosts ICP earnings from racing</p>\n<h2>SUPER-RARE FACTIONS</h2>\n<h3>Master (2/4/6+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>2+ bots: +2 to all stats (+8 total = +2 rating)</li>\n<li>4+ bots: +3 to all stats (+12 total = +3 rating)</li>\n<li>6+ bots: +4 to all stats (+16 total = +4 rating)</li>\n</ul>\n<p>Balanced and versatile - good for both racing and progression. Rivals Wild at 6 bots!</p>\n<h3>Blackhole (2/4/6+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>2+ bots: +5 Power Core</li>\n<li>4+ bots: +8 Power Core</li>\n<li>6+ bots: +10 Power Core</li>\n</ul>\n<p>Energy efficiency specialists - reduces battery drain in races. Strongest single-stat bonus.</p>\n<h3>Dead (2/4/6+ bots)</h3>\n<p><strong>Yield Bonus:</strong></p>\n<ul>\n<li>2+ bots: +15% scavenging parts</li>\n<li>4+ bots: +30% scavenging parts</li>\n<li>6+ bots: +45% scavenging parts</li>\n</ul>\n<p>The ultimate scavengers - earn significantly more upgrade parts. Best for whales grinding upgrades.</p>\n<h2>RARE FACTIONS (Progressive Bonuses)</h2>\n<p>All rare factions require 2/4/6 bots for maximum effect.</p>\n<h3>Bee (2/4/6+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>2+ bots: +3 Speed</li>\n<li>4+ bots: +6 Speed</li>\n<li>6+ bots: +8 Speed</li>\n</ul>\n<p>Pure speed focus</p>\n<h3>Murder (2/4/6+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>2+ bots: +3 Acceleration</li>\n<li>4+ bots: +6 Acceleration</li>\n<li>6+ bots: +8 Acceleration</li>\n</ul>\n<p>Launch power specialists</p>\n<h3>Box (2/4/6+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>2+ bots: +3 Stability</li>\n<li>4+ bots: +6 Stability</li>\n<li>6+ bots: +8 Stability</li>\n</ul>\n<p>Consistency and durability focus</p>\n<h3>Food (2/4/6+ bots)</h3>\n<p><strong>Cost Bonus:</strong></p>\n<ul>\n<li>2+ bots: -15% recharge cooldown (6h ‚Üí 5.1h)</li>\n<li>4+ bots: -30% recharge cooldown (6h ‚Üí 4.2h)</li>\n<li>6+ bots: -45% recharge cooldown (6h ‚Üí 3.3h)</li>\n</ul>\n<p>Race more frequently with faster recharges</p>\n<h2>COMMON FACTIONS (Economic Bonuses)</h2>\n<h3>Game (2/4/6+ bots)</h3>\n<p><strong>Cost Bonus:</strong></p>\n<ul>\n<li>2+ bots: -5% upgrade costs</li>\n<li>4+ bots: -12% upgrade costs</li>\n<li>6+ bots: -20% upgrade costs</li>\n</ul>\n<p>Makes upgrading significantly cheaper</p>\n<h3>Industrial (2/4/6+ bots)</h3>\n<p><strong>Cost Bonus:</strong></p>\n<ul>\n<li>2+ bots: -20% repair costs (0.05 ICP ‚Üí 0.04 ICP)</li>\n<li>4+ bots: -40% repair costs (0.05 ICP ‚Üí 0.03 ICP)</li>\n<li>6+ bots: -60% repair costs (0.05 ICP ‚Üí 0.02 ICP)</li>\n</ul>\n<p>Maintenance becomes almost free</p>\n<h3>Animal (4/8/16+ bots)</h3>\n<p><strong>Stat Bonuses:</strong></p>\n<ul>\n<li>4+ bots: +1 to all stats (+4 total = +1 rating)</li>\n<li>8+ bots: +2 to all stats (+8 total = +2 rating)</li>\n<li>16+ bots: +3 to all stats (+12 total = +3 rating)</li>\n</ul>\n<p>Balanced progression - requires large collection for meaningful power</p>\n<h2>STRATEGY TIPS</h2>\n<h3>For New Players</h3>\n<ul>\n<li><strong>Master faction</strong> (2-4 bots) is best value - balanced stat bonuses at reasonable rarity</li>\n<li><strong>Food/Industrial</strong> help reduce operating costs significantly</li>\n<li>Don't chase ultra-rares early - focus on building a cohesive 2-4 bot collection</li>\n</ul>\n<h3>For Collectors</h3>\n<ul>\n<li><strong>UltimateMaster</strong> provides instant +5 rating boost from just 1 bot</li>\n<li><strong>Golden</strong> (3 bots) gives massive +15% earnings boost - compounds over time</li>\n<li><strong>Dead</strong> (4 bots) +30% parts generation makes self-upgrading easier</li>\n</ul>\n<h3>For Competitive Players</h3>\n<ul>\n<li><strong>Ultimate</strong> (3 bots) +5 Speed/Accel makes your entire garage faster</li>\n<li><strong>Wild</strong> (2 bots) +4 all stats is the most well-rounded ultra-rare bonus</li>\n<li><strong>Blackhole</strong> (4 bots) +8 Power Core lets bots race more between recharges</li>\n</ul>\n<h3>Mixed Collections</h3>\n<ul>\n<li>Bonuses stack multiplicatively across different factions</li>\n<li>Example: 2 Master + 2 Dead = +2 all stats + 15% more parts</li>\n<li>Example: 1 UltimateMaster + 2 Food = +5 all stats + 15% faster recharges</li>\n</ul>\n<h2>ECONOMIC IMPACT</h2>\n<h3>Stat Bonuses</h3>\n<p><strong>IMPORTANT:</strong> Garage aura stat bonuses do NOT increase your bot's rating. Rating is calculated only from base stats + upgrades.</p>\n<p>However, the effective stats in races ARE boosted, which means:</p>\n<ul>\n<li><strong>Competitive edge</strong> - Your bots perform better in their current class without moving to harder brackets</li>\n<li><strong>Sweet spot advantage</strong> - Stay in lower classes with boosted performance = easier wins</li>\n<li><strong>Hidden power</strong> - Bots appear weaker on paper but race stronger</li>\n<li><strong>No upgrade pressure</strong> - Less need to upgrade stats, save ICP for other uses</li>\n</ul>\n<p><strong>Example:</strong> A rating 30 bot with +5 from UltimateMaster aura still enters Raider races (30-39), but races with effective 35 stats against true 30-35 opponents.</p>\n<h3>Cost Bonuses</h3>\n<ul>\n<li><strong>Game</strong> (6 bots): Save 20% on all upgrades (0.5 ICP ‚Üí 0.4 ICP base)</li>\n<li><strong>Industrial</strong> (6 bots): Save 60% on repairs (0.05 ICP ‚Üí 0.02 ICP)</li>\n<li><strong>Food</strong> (6 bots): Recharge 45% faster (race 2-3 more times per day)</li>\n</ul>\n<h3>Yield Bonuses</h3>\n<ul>\n<li><strong>Golden</strong> (3 bots): +15% race earnings compounds rapidly</li>\n<li><strong>Dead</strong> (4 bots): +30% parts generation = faster self-upgrading</li>\n<li><strong>Ultimate</strong> (3 bots): -30% scavenging costs = longer missions, more parts</li>\n</ul>\n<h2>HOW TO BUILD YOUR COLLECTION</h2>\n<ol>\n<li><strong>Choose your focus:</strong> Racing performance (stat bonuses) vs Economic efficiency (cost/yield bonuses)</li>\n<li><strong>Start with 2-4 bots</strong> of one faction to activate first tier bonuses</li>\n<li><strong>Scale gradually</strong> - rare factions need 6 bots for max effect</li>\n<li><strong>Mix strategically</strong> - combine stat factions with cost factions for balanced benefits</li>\n<li><strong>Consider resale</strong> - collection bonuses make your entire garage more valuable</li>\n</ol>\n<h2>IMPORTANT NOTES</h2>\n<ul>\n<li>Bonuses apply immediately when you acquire the required bot count</li>\n<li>Bonuses disappear if you sell/transfer bots and drop below the threshold</li>\n<li>All bots in your garage benefit, regardless of their own faction</li>\n<li>Marketplace bots do NOT count toward your bonuses (must be in your garage)</li>\n<li>Bonuses persist across races - they're always active</li>\n</ul>\n"
    },
    {
      "slug": "09-economics-and-value-flow",
      "metadata": {
        "title": "Economics & Value Flow",
        "description": "Complete transparency on where your ICP goes and how the platform sustains itself",
        "order": 9
      },
      "content": "<h1>Economics &#x26; Value Flow</h1>\n<h2>OVERVIEW</h2>\n<p>PokedBots Racing is designed as a <strong>player-first economy</strong> where all ICP flowing into the system is redistributed back to players through prizes, rewards, and ecosystem growth. The platform operates transparently with no profit extraction.</p>\n<h2>CORE PRINCIPLE: ZERO PLATFORM PROFIT</h2>\n<p><strong>Every ICP that enters the system goes back to players.</strong> There are no hidden fees, no profit margins, and no money leaving the ecosystem. This document explains exactly where your ICP goes.</p>\n<h2>1. RACE ENTRY FEES ‚Üí PRIZE POOLS</h2>\n<p><strong>Entry Fee Structure:</strong></p>\n<ul>\n<li>Scrap: 0.1 ICP</li>\n<li>Junker: 0.2 ICP</li>\n<li>Raider: 0.3 ICP</li>\n<li>Elite: 0.4 ICP</li>\n<li>SilentKlan: 0.5 ICP</li>\n</ul>\n<p><strong>Where it goes:</strong></p>\n<ul>\n<li><strong>100% ‚Üí Prize Pool</strong> - Your entry fee goes directly into the race's prize pool</li>\n<li><strong>Platform Bonus Added</strong> - Fixed amount added per race (see below)</li>\n</ul>\n<p><strong>Example (Junker Daily Sprint with 8 entries):</strong></p>\n<pre><code>Entry fees collected:    8 √ó 0.2 = 1.6 ICP\nPlatform bonus added:           0.4 ICP (fixed)\nTotal prize pool:               2.0 ICP\n</code></pre>\n<p>Players put in 1.6 ICP, winners receive 2.0 ICP. The platform <strong>adds</strong> 0.4 ICP, it doesn't take anything.</p>\n<h2>2. PLATFORM BONUS ‚Üí PRIZE POOLS</h2>\n<p><strong>Fixed platform contributions per race:</strong></p>\n<p><strong>Daily Sprint:</strong></p>\n<ul>\n<li>Scrap: 0.20 ICP</li>\n<li>Junker: 0.40 ICP</li>\n<li>Raider: 0.60 ICP</li>\n<li>Elite: 0.80 ICP</li>\n<li>SilentKlan: 1.00 ICP</li>\n</ul>\n<p><strong>Weekly League:</strong></p>\n<ul>\n<li>Scrap: 0.80 ICP</li>\n<li>Junker: 1.60 ICP</li>\n<li>Raider: 2.40 ICP</li>\n<li>Elite: 3.20 ICP</li>\n<li>SilentKlan: 4.80 ICP</li>\n</ul>\n<p><strong>Monthly Cup:</strong></p>\n<ul>\n<li>Elite: 8.0 ICP</li>\n<li>SilentKlan: 12.0 ICP</li>\n</ul>\n<p><strong>Source of platform bonuses:</strong></p>\n<ol>\n<li><strong>Maintenance fees</strong> - Recharge (0.1 ICP) and Repair (0.05 ICP) costs</li>\n<li><strong>Upgrade fees</strong> - When players choose ICP upgrades instead of free parts</li>\n<li><strong>Developer contribution</strong> - ~100 ICP monthly (temporary bootstrap)</li>\n<li><strong>Betting rake</strong> - 8% of betting pools reinvested into racing prizes</li>\n</ol>\n<p><strong>Sustainability model:</strong>\nThe platform treasury is funded by player activity (maintenance, upgrades, betting) and grows as the ecosystem expands. Developer contributions are temporary - as entry fee volume increases, the system becomes fully self-sustaining without external funding.</p>\n<p><strong>Note on marketplace:</strong> The built-in NFT marketplace uses the EXT standard. Any marketplace transaction fees go to the original NFT creator, not the platform.</p>\n<h2>3. BETTING SYSTEM ‚Üí PARI-MUTUEL POOLS</h2>\n<p><strong>How pari-mutuel betting works:</strong></p>\n<ul>\n<li>All bets on a race go into shared pools (Win/Place/Show)</li>\n<li>Winners split the pool proportionally to their bet size</li>\n<li>No \"house\" betting against you - you're competing with other bettors</li>\n</ul>\n<p><strong>Rake structure (10% total):</strong></p>\n<ul>\n<li><strong>8% ‚Üí Future racing prize pools</strong> - Funds platform bonuses for upcoming races</li>\n<li><strong>2% ‚Üí Platform operations</strong> - Covers canister cycles, infrastructure costs</li>\n</ul>\n<p><strong>Example (100 ICP total betting pool):</strong></p>\n<pre><code>Total bets:              100 ICP\nRake (10%):               10 ICP\n  ‚îú‚îÄ Racing (8%):          8 ICP ‚Üí Added to future race prizes\n  ‚îî‚îÄ Operations (2%):      2 ICP ‚Üí Canister cycles, infrastructure\nWinners share:            90 ICP (distributed among winning bets)\n</code></pre>\n<p><strong>Key point:</strong> The 8% racing rake is <strong>reinvested into prize pools</strong>, creating a virtuous cycle where betting activity increases racing rewards for everyone.</p>\n<h2>4. MAINTENANCE COSTS ‚Üí PLATFORM TREASURY</h2>\n<p><strong>Maintenance fees:</strong></p>\n<ul>\n<li><strong>Recharge</strong>: 0.1 ICP (restores battery + potential overcharge bonus)</li>\n<li><strong>Repair</strong>: 0.05 ICP (restores condition)</li>\n<li><strong>Purpose</strong>: Maintain competitive balance and bot value</li>\n<li><strong>Allocation</strong>: Goes to platform treasury to fund race prize pool bonuses</li>\n<li><strong>Volume</strong>: Active bots typically recharge 1-2x daily + repair 2-3x daily (~0.25-0.35 ICP/day per bot)</li>\n</ul>\n<p>These fees serve dual purposes:</p>\n<ol>\n<li><strong>Game balance</strong> - Prevent bot oversaturation and maintain competitive racing</li>\n<li><strong>Prize pool funding</strong> - Help sustain platform bonuses without developer subsidy</li>\n</ol>\n<h2>5. NFT MARKETPLACE</h2>\n<p><strong>Built-in marketplace using EXT standard:</strong></p>\n<ul>\n<li>Buy and sell PokedBots directly on the platform</li>\n<li>Transaction fees (per EXT standard) go to the <strong>original NFT creator</strong>, not the platform</li>\n<li>Platform facilitates trades but doesn't extract marketplace fees</li>\n<li>This ensures fair compensation for NFT creators while keeping trading accessible</li>\n</ul>\n<h2>MONEY FLOW DIAGRAM</h2>\n<pre><code>INCOMING ICP\n‚îú‚îÄ Race Entry Fees (100%)\n‚îÇ  ‚îî‚îÄ‚Üí Race Prize Pools (100%)\n‚îÇ\n‚îú‚îÄ Maintenance Fees\n‚îÇ  ‚îú‚îÄ Recharge: 0.1 ICP\n‚îÇ  ‚îú‚îÄ Repair: 0.05 ICP\n‚îÇ  ‚îî‚îÄ‚Üí Platform Treasury ‚Üí Race Bonuses\n‚îÇ\n‚îú‚îÄ Upgrade Fees (optional ICP upgrades)\n‚îÇ  ‚îî‚îÄ‚Üí Platform Treasury ‚Üí Race Bonuses\n‚îÇ\n‚îú‚îÄ Developer Contribution (~100 ICP/month)\n‚îÇ  ‚îî‚îÄ‚Üí Platform Treasury ‚Üí Race Bonuses\n‚îÇ\n‚îú‚îÄ Platform Bonus (from treasury)\n‚îÇ  ‚îî‚îÄ‚Üí Race Prize Pools (fixed per race)\n‚îÇ\n‚îî‚îÄ Betting Pools (90% to winners)\n   ‚îî‚îÄ Rake (10%)\n      ‚îú‚îÄ‚Üí Racing prize bonuses (8%)\n      ‚îî‚îÄ‚Üí Canister operations (2%)\n\nOUTGOING ICP\n‚îú‚îÄ Race Prize Pools ‚Üí Winners (100%)\n‚îú‚îÄ Betting Payouts ‚Üí Winners (90% of pools)\n‚îî‚îÄ Infrastructure ‚Üí Canister cycles, hosting (2% of betting)\n\nMARKETPLACE (EXT Standard)\n‚îî‚îÄ NFT sale fees ‚Üí Original NFT creator (not platform)\n</code></pre>\n<h2>SELF-SUSTAINING CYCLE</h2>\n<p>The system is designed to become fully self-sustaining without developer funding:</p>\n<ol>\n<li><strong>Player activity</strong> (maintenance, upgrades) ‚Üí platform treasury</li>\n<li><strong>Betting activity</strong> generates 8% rake ‚Üí platform treasury</li>\n<li><strong>Platform treasury</strong> funds race bonuses</li>\n<li><strong>Bigger prize pools</strong> attract more racers</li>\n<li><strong>More racing</strong> drives more maintenance/upgrade fees and betting</li>\n<li><strong>Increased volume</strong> eliminates need for developer contributions</li>\n<li><strong>Cycle becomes self-perpetuating</strong></li>\n</ol>\n<p>The 2% operations rake (from betting only) covers infrastructure costs (canister cycles, storage, compute), keeping the platform running indefinitely.</p>\n<p><strong>Growth path to sustainability:</strong></p>\n<ul>\n<li><strong>Current</strong>: Developer adds ~100 ICP/month + player fees fund bonuses</li>\n<li><strong>Target</strong>: Player fees + betting rake fully fund bonuses at scale</li>\n<li><strong>Timeline</strong>: As player count grows, entry fee volume increases, reducing developer contribution to zero</li>\n</ul>\n<h2>UPGRADE SYSTEM ECONOMICS</h2>\n<p><strong>Upgrade costs</strong> are paid in ICP or parts:</p>\n<ul>\n<li><strong>ICP upgrades</strong>: Goes to platform treasury to fund race bonuses</li>\n<li><strong>Parts upgrades</strong>: Free (earned through scavenging) - costs nothing</li>\n</ul>\n<p>Most players use free parts from scavenging. ICP upgrades are optional for players who want instant upgrades without grinding parts.</p>\n<p><strong>ICP upgrade allocation:</strong></p>\n<ul>\n<li>Funds platform treasury</li>\n<li>Helps sustain race prize pool bonuses</li>\n<li>Reduces need for developer contributions</li>\n</ul>\n<h2>SCAVENGING SYSTEM ‚Üí FREE VALUE</h2>\n<p><strong>Scavenging is pure value creation:</strong></p>\n<ul>\n<li>Costs nothing (just time)</li>\n<li>Generates upgrade parts</li>\n<li>Parts = ICP savings (100 parts ‚âà 1 ICP upgrade value)</li>\n</ul>\n<p>Players can earn ~2-5 ICP worth of parts per bot per week through scavenging, creating a F2P path to competitive upgrades.</p>\n<h2>TRANSPARENCY COMMITMENTS</h2>\n<ol>\n<li><strong>On-chain verification</strong>: All transactions are visible on ICP ledger</li>\n<li><strong>Open-source code</strong>: Backend logic is auditable</li>\n<li><strong>Public metrics</strong>: Platform treasury balance visible to all</li>\n<li><strong>No hidden fees</strong>: Every fee disclosed in this document</li>\n</ol>\n<p>You can verify every transaction:</p>\n<ul>\n<li>Race prize pool distributions</li>\n<li>Betting payouts</li>\n<li>Platform bonus contributions</li>\n<li>Treasury movements</li>\n</ul>\n<p><strong>View all canister transactions:</strong> <a href=\"https://www.icexplorer.io/address/details/p6nop-vyaaa-aaaai-q4djq-cai\">https://www.icexplorer.io/address/details/p6nop-vyaaa-aaaai-q4djq-cai</a></p>\n<h2>FAQ</h2>\n<h3>\"Where does the initial platform treasury come from?\"</h3>\n<p>Funded by the developers at launch (~100 ICP/month ongoing) plus all player activity fees (maintenance, upgrades, betting rake). As the platform grows, player-generated fees will fully sustain prize bonuses without developer contributions.</p>\n<p><strong>Revenue estimate (at 20 active racing bots):</strong></p>\n<ul>\n<li>Maintenance: ~20 bots √ó 0.25 ICP/day = 5 ICP/day = 150 ICP/month</li>\n<li>Developer contribution: 100 ICP/month</li>\n<li><strong>Total available for bonuses: ~250 ICP/month</strong></li>\n</ul>\n<p>As bot count grows, maintenance fees scale linearly while developer contribution reduces to zero.</p>\n<h3>\"What about marketplace fees?\"</h3>\n<p>The built-in marketplace uses the EXT NFT standard. Transaction fees go to the original NFT creator (as per EXT standard), not to the platform. This ensures creators are fairly compensated while the platform remains fee-free for trading.</p>\n<h3>\"What if betting rake exceeds platform bonus costs?\"</h3>\n<p>Excess rake accumulates in the treasury for:</p>\n<ol>\n<li>Larger platform bonuses (e.g., special event prizes)</li>\n<li>Feature development (new tracks, game modes)</li>\n<li>Marketing/growth (brings more players ‚Üí bigger pools)</li>\n<li>Buffer for lower-activity periods</li>\n</ol>\n<h3>\"Is the 2% operations fee permanent?\"</h3>\n<p>Yes, it covers ongoing infrastructure costs (canister cycles, storage, compute). Without it, the platform would require external funding or player subscriptions.</p>\n<h3>\"Can you prove the platform isn't profiting?\"</h3>\n<p>Yes - all canister transactions are on-chain and auditable. You can verify:</p>\n<ul>\n<li>Treasury balance</li>\n<li>All ICP transfers in/out</li>\n<li>Prize pool distributions</li>\n<li>Betting payouts</li>\n</ul>\n<p><strong>View all transactions:</strong> <a href=\"https://www.icexplorer.io/address/details/p6nop-vyaaa-aaaai-q4djq-cai\">https://www.icexplorer.io/address/details/p6nop-vyaaa-aaaai-q4djq-cai</a></p>\n<h3>\"What happens if the platform becomes profitable?\"</h3>\n<p>Any excess treasury beyond operational reserves (e.g., 1000 ICP buffer) will be distributed through:</p>\n<ol>\n<li>Increased platform bonuses</li>\n<li>Special tournament prizes</li>\n<li>Community development grants</li>\n</ol>\n<p>The goal is <strong>ecosystem growth</strong>, not profit extraction.</p>\n<h2>BOTTOM LINE</h2>\n<p><strong>PokedBots Racing is not a business extracting profit from players.</strong></p>\n<p>It's a <strong>player-owned economy</strong> where:</p>\n<ul>\n<li>Your entry fees become prize pools</li>\n<li>Platform bonuses are added (not subtracted)</li>\n<li>Betting rake is reinvested in prizes</li>\n<li>All value flows back to players</li>\n</ul>\n<p>The 2% operations fee (from betting only) covers infrastructure. Everything else goes to winners, either immediately through prizes or reinvested through platform bonuses.</p>\n<p><strong>Your ICP stays in the ecosystem. The platform adds value, it doesn't extract it.</strong></p>\n"
    }
  ]
}